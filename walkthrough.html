<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Walkthrough | The targets R Package User Manual</title>
  <meta name="description" content="In-depth discussion of the major functionality of targets." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Walkthrough | The targets R Package User Manual" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://books.ropensci.org/targets" />
  <meta property="og:image" content="https://books.ropensci.org/targets/man/figures/logo.png" />
  <meta property="og:description" content="In-depth discussion of the major functionality of targets." />
  <meta name="github-repo" content="ropensci-books/targets" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Walkthrough | The targets R Package User Manual" />
  
  <meta name="twitter:description" content="In-depth discussion of the major functionality of targets." />
  <meta name="twitter:image" content="https://books.ropensci.org/targets/man/figures/logo.png" />

<meta name="author" content="Will Landau" />
<meta name="author" content="Copyright Eli Lilly and Company" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="man/figures/apple-touch-icon.png" />
  <link rel="shortcut icon" href="man/figures/favicon.ico" type="image/x-icon" />
<link rel="prev" href="index.html"/>
<link rel="next" href="markdown.html"/>
<script src="libs/header-attrs-2.13/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet" />
<script src="libs/vis-9.1.0/vis-network.min.js"></script>
<script src="libs/visNetwork-binding-2.1.0/visNetwork.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-150843595-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-150843595-1');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The targets R Package User Manual</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction<span></span></a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#motivation"><i class="fa fa-check"></i><b>1.1</b> Motivation<span></span></a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#pipeline-toolkits"><i class="fa fa-check"></i><b>1.2</b> Pipeline toolkits<span></span></a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#the-targets-package"><i class="fa fa-check"></i><b>1.3</b> The <code>targets</code> package<span></span></a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#about-this-manual"><i class="fa fa-check"></i><b>1.4</b> About this manual<span></span></a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#what-about-drake"><i class="fa fa-check"></i><b>1.5</b> What about <code>drake</code>?<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="walkthrough.html"><a href="walkthrough.html"><i class="fa fa-check"></i><b>2</b> Walkthrough<span></span></a>
<ul>
<li class="chapter" data-level="2.1" data-path="walkthrough.html"><a href="walkthrough.html#about-this-minimal-example"><i class="fa fa-check"></i><b>2.1</b> About this minimal example<span></span></a></li>
<li class="chapter" data-level="2.2" data-path="walkthrough.html"><a href="walkthrough.html#file-structure"><i class="fa fa-check"></i><b>2.2</b> File structure<span></span></a></li>
<li class="chapter" data-level="2.3" data-path="walkthrough.html"><a href="walkthrough.html#target-script-file"><i class="fa fa-check"></i><b>2.3</b> Target script file<span></span></a></li>
<li class="chapter" data-level="2.4" data-path="walkthrough.html"><a href="walkthrough.html#inspect-the-pipeline"><i class="fa fa-check"></i><b>2.4</b> Inspect the pipeline<span></span></a></li>
<li class="chapter" data-level="2.5" data-path="walkthrough.html"><a href="walkthrough.html#run-the-pipeline"><i class="fa fa-check"></i><b>2.5</b> Run the pipeline<span></span></a></li>
<li class="chapter" data-level="2.6" data-path="walkthrough.html"><a href="walkthrough.html#changes"><i class="fa fa-check"></i><b>2.6</b> Changes<span></span></a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="walkthrough.html"><a href="walkthrough.html#change-code"><i class="fa fa-check"></i><b>2.6.1</b> Change code<span></span></a></li>
<li class="chapter" data-level="2.6.2" data-path="walkthrough.html"><a href="walkthrough.html#change-data"><i class="fa fa-check"></i><b>2.6.2</b> Change data<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="walkthrough.html"><a href="walkthrough.html#read-your-data"><i class="fa fa-check"></i><b>2.7</b> Read your data<span></span></a></li>
<li class="chapter" data-level="2.8" data-path="walkthrough.html"><a href="walkthrough.html#read-metadata"><i class="fa fa-check"></i><b>2.8</b> Read metadata<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="markdown.html"><a href="markdown.html"><i class="fa fa-check"></i><b>3</b> Target Markdown<span></span></a>
<ul>
<li class="chapter" data-level="3.1" data-path="markdown.html"><a href="markdown.html#access"><i class="fa fa-check"></i><b>3.1</b> Access<span></span></a></li>
<li class="chapter" data-level="3.2" data-path="markdown.html"><a href="markdown.html#purpose"><i class="fa fa-check"></i><b>3.2</b> Purpose<span></span></a></li>
<li class="chapter" data-level="3.3" data-path="markdown.html"><a href="markdown.html#example"><i class="fa fa-check"></i><b>3.3</b> Example<span></span></a></li>
<li class="chapter" data-level="3.4" data-path="markdown.html"><a href="markdown.html#required-packages"><i class="fa fa-check"></i><b>3.4</b> Required packages<span></span></a></li>
<li class="chapter" data-level="3.5" data-path="markdown.html"><a href="markdown.html#setup"><i class="fa fa-check"></i><b>3.5</b> Setup<span></span></a></li>
<li class="chapter" data-level="3.6" data-path="markdown.html"><a href="markdown.html#globals"><i class="fa fa-check"></i><b>3.6</b> Globals<span></span></a></li>
<li class="chapter" data-level="3.7" data-path="markdown.html"><a href="markdown.html#target-definitions"><i class="fa fa-check"></i><b>3.7</b> Target definitions<span></span></a></li>
<li class="chapter" data-level="3.8" data-path="markdown.html"><a href="markdown.html#pipeline"><i class="fa fa-check"></i><b>3.8</b> Pipeline<span></span></a></li>
<li class="chapter" data-level="3.9" data-path="markdown.html"><a href="markdown.html#output"><i class="fa fa-check"></i><b>3.9</b> Output<span></span></a></li>
<li class="chapter" data-level="3.10" data-path="markdown.html"><a href="markdown.html#conditioning-on-interactive-mode"><i class="fa fa-check"></i><b>3.10</b> Conditioning on interactive mode<span></span></a>
<ul>
<li class="chapter" data-level="3.10.1" data-path="markdown.html"><a href="markdown.html#tar_interactive"><i class="fa fa-check"></i><b>3.10.1</b> <code>tar_interactive()</code><span></span></a></li>
<li class="chapter" data-level="3.10.2" data-path="markdown.html"><a href="markdown.html#tar_toggle"><i class="fa fa-check"></i><b>3.10.2</b> <code>tar_toggle()</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.11" data-path="markdown.html"><a href="markdown.html#chunk-options"><i class="fa fa-check"></i><b>3.11</b> Chunk options<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="debugging.html"><a href="debugging.html"><i class="fa fa-check"></i><b>4</b> Debugging<span></span></a>
<ul>
<li class="chapter" data-level="4.1" data-path="debugging.html"><a href="debugging.html#error-messages"><i class="fa fa-check"></i><b>4.1</b> Error messages<span></span></a></li>
<li class="chapter" data-level="4.2" data-path="debugging.html"><a href="debugging.html#environment-browser"><i class="fa fa-check"></i><b>4.2</b> Environment browser<span></span></a></li>
<li class="chapter" data-level="4.3" data-path="debugging.html"><a href="debugging.html#the-debug-option"><i class="fa fa-check"></i><b>4.3</b> The debug option<span></span></a></li>
<li class="chapter" data-level="4.4" data-path="debugging.html"><a href="debugging.html#workspaces"><i class="fa fa-check"></i><b>4.4</b> Workspaces<span></span></a></li>
<li class="chapter" data-level="4.5" data-path="debugging.html"><a href="debugging.html#tradeoffs"><i class="fa fa-check"></i><b>4.5</b> Tradeoffs<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="performance.html"><a href="performance.html"><i class="fa fa-check"></i><b>5</b> Performance<span></span></a>
<ul>
<li class="chapter" data-level="5.1" data-path="performance.html"><a href="performance.html#monitoring-the-pipeline"><i class="fa fa-check"></i><b>5.1</b> Monitoring the pipeline<span></span></a></li>
<li class="chapter" data-level="5.2" data-path="performance.html"><a href="performance.html#performance-1"><i class="fa fa-check"></i><b>5.2</b> Performance<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>6</b> Functions<span></span></a>
<ul>
<li class="chapter" data-level="6.1" data-path="functions.html"><a href="functions.html#problems-with-script-based-workflows"><i class="fa fa-check"></i><b>6.1</b> Problems with script-based workflows<span></span></a></li>
<li class="chapter" data-level="6.2" data-path="functions.html"><a href="functions.html#functions-1"><i class="fa fa-check"></i><b>6.2</b> Functions<span></span></a></li>
<li class="chapter" data-level="6.3" data-path="functions.html"><a href="functions.html#writing-functions"><i class="fa fa-check"></i><b>6.3</b> Writing functions<span></span></a></li>
<li class="chapter" data-level="6.4" data-path="functions.html"><a href="functions.html#functions-in-pipelines"><i class="fa fa-check"></i><b>6.4</b> Functions in pipelines<span></span></a></li>
<li class="chapter" data-level="6.5" data-path="functions.html"><a href="functions.html#tracking-changes"><i class="fa fa-check"></i><b>6.5</b> Tracking changes<span></span></a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="targets.html"><a href="targets.html"><i class="fa fa-check"></i><b>7</b> Target construction<span></span></a>
<ul>
<li class="chapter" data-level="7.1" data-path="targets.html"><a href="targets.html#target-names"><i class="fa fa-check"></i><b>7.1</b> Target names<span></span></a></li>
<li class="chapter" data-level="7.2" data-path="targets.html"><a href="targets.html#what-a-target-should-do"><i class="fa fa-check"></i><b>7.2</b> What a target should do<span></span></a></li>
<li class="chapter" data-level="7.3" data-path="targets.html"><a href="targets.html#how-much-a-target-should-do"><i class="fa fa-check"></i><b>7.3</b> How much a target should do<span></span></a></li>
<li class="chapter" data-level="7.4" data-path="targets.html"><a href="targets.html#working-with-tools-outside-r"><i class="fa fa-check"></i><b>7.4</b> Working with tools outside R<span></span></a></li>
<li class="chapter" data-level="7.5" data-path="targets.html"><a href="targets.html#side-effects"><i class="fa fa-check"></i><b>7.5</b> Side effects<span></span></a></li>
<li class="chapter" data-level="7.6" data-path="targets.html"><a href="targets.html#dependencies"><i class="fa fa-check"></i><b>7.6</b> Dependencies<span></span></a></li>
<li class="chapter" data-level="7.7" data-path="targets.html"><a href="targets.html#return-value"><i class="fa fa-check"></i><b>7.7</b> Return value<span></span></a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="targets.html"><a href="targets.html#saving"><i class="fa fa-check"></i><b>7.7.1</b> Saving<span></span></a></li>
<li class="chapter" data-level="7.7.2" data-path="targets.html"><a href="targets.html#hashing"><i class="fa fa-check"></i><b>7.7.2</b> Hashing<span></span></a></li>
<li class="chapter" data-level="7.7.3" data-path="targets.html"><a href="targets.html#workaround"><i class="fa fa-check"></i><b>7.7.3</b> Workaround<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>8</b> Packages<span></span></a>
<ul>
<li class="chapter" data-level="8.1" data-path="packages.html"><a href="packages.html#loading-and-configuring-r-packages"><i class="fa fa-check"></i><b>8.1</b> Loading and configuring R packages<span></span></a></li>
<li class="chapter" data-level="8.2" data-path="packages.html"><a href="packages.html#r-packages-as-projects"><i class="fa fa-check"></i><b>8.2</b> R packages as projects<span></span></a></li>
<li class="chapter" data-level="8.3" data-path="packages.html"><a href="packages.html#target-factories"><i class="fa fa-check"></i><b>8.3</b> Target Factories<span></span></a></li>
<li class="chapter" data-level="8.4" data-path="packages.html"><a href="packages.html#package-based-invalidation"><i class="fa fa-check"></i><b>8.4</b> Package-based invalidation<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="projects.html"><a href="projects.html"><i class="fa fa-check"></i><b>9</b> Projects<span></span></a>
<ul>
<li class="chapter" data-level="9.1" data-path="projects.html"><a href="projects.html#extra-reproducibility"><i class="fa fa-check"></i><b>9.1</b> Extra reproducibility<span></span></a></li>
<li class="chapter" data-level="9.2" data-path="projects.html"><a href="projects.html#project-files"><i class="fa fa-check"></i><b>9.2</b> Project files<span></span></a></li>
<li class="chapter" data-level="9.3" data-path="projects.html"><a href="projects.html#multiple-projects"><i class="fa fa-check"></i><b>9.3</b> Multiple projects<span></span></a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="projects.html"><a href="projects.html#create-each-project."><i class="fa fa-check"></i><b>9.3.1</b> Create each project.<span></span></a></li>
<li class="chapter" data-level="9.3.2" data-path="projects.html"><a href="projects.html#configure-each-project."><i class="fa fa-check"></i><b>9.3.2</b> Configure each project.<span></span></a></li>
<li class="chapter" data-level="9.3.3" data-path="projects.html"><a href="projects.html#run-each-project"><i class="fa fa-check"></i><b>9.3.3</b> Run each project<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="projects.html"><a href="projects.html#interdependent-projects"><i class="fa fa-check"></i><b>9.4</b> Interdependent projects<span></span></a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="projects.html"><a href="projects.html#config-inheritance"><i class="fa fa-check"></i><b>9.4.1</b> Config inheritance<span></span></a></li>
<li class="chapter" data-level="9.4.2" data-path="projects.html"><a href="projects.html#sharing-targets"><i class="fa fa-check"></i><b>9.4.2</b> Sharing targets<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="projects.html"><a href="projects.html#the-config-package"><i class="fa fa-check"></i><b>9.5</b> The config package<span></span></a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="files.html"><a href="files.html"><i class="fa fa-check"></i><b>10</b> External files and literate programming<span></span></a>
<ul>
<li class="chapter" data-level="10.1" data-path="files.html"><a href="files.html#internal-data-files"><i class="fa fa-check"></i><b>10.1</b> Internal data files<span></span></a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="files.html"><a href="files.html#data-version-control-and-the-cloud"><i class="fa fa-check"></i><b>10.1.1</b> Data version control and the cloud<span></span></a></li>
<li class="chapter" data-level="10.1.2" data-path="files.html"><a href="files.html#cleaning-up-local-internal-data-files"><i class="fa fa-check"></i><b>10.1.2</b> Cleaning up local internal data files<span></span></a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="files.html"><a href="files.html#internal-script-files"><i class="fa fa-check"></i><b>10.2</b> Internal script files<span></span></a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="files.html"><a href="files.html#cleaning-up-internal-script-files"><i class="fa fa-check"></i><b>10.2.1</b> Cleaning up internal script files<span></span></a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="files.html"><a href="files.html#external-input-files"><i class="fa fa-check"></i><b>10.3</b> External input files<span></span></a></li>
<li class="chapter" data-level="10.4" data-path="files.html"><a href="files.html#external-output-files"><i class="fa fa-check"></i><b>10.4</b> External output files<span></span></a></li>
<li class="chapter" data-level="10.5" data-path="files.html"><a href="files.html#literate-programming"><i class="fa fa-check"></i><b>10.5</b> Literate programming<span></span></a></li>
<li class="chapter" data-level="10.6" data-path="files.html"><a href="files.html#parameterized-r-markdown"><i class="fa fa-check"></i><b>10.6</b> Parameterized R Markdown<span></span></a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="files.html"><a href="files.html#single-parameter-set"><i class="fa fa-check"></i><b>10.6.1</b> Single parameter set<span></span></a></li>
<li class="chapter" data-level="10.6.2" data-path="files.html"><a href="files.html#multiple-parameter-sets"><i class="fa fa-check"></i><b>10.6.2</b> Multiple parameter sets<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="dynamic.html"><a href="dynamic.html"><i class="fa fa-check"></i><b>11</b> Dynamic branching<span></span></a>
<ul>
<li class="chapter" data-level="11.1" data-path="dynamic.html"><a href="dynamic.html#branching"><i class="fa fa-check"></i><b>11.1</b> Branching<span></span></a></li>
<li class="chapter" data-level="11.2" data-path="dynamic.html"><a href="dynamic.html#about-dynamic-branching"><i class="fa fa-check"></i><b>11.2</b> About dynamic branching<span></span></a></li>
<li class="chapter" data-level="11.3" data-path="dynamic.html"><a href="dynamic.html#patterns"><i class="fa fa-check"></i><b>11.3</b> Patterns<span></span></a></li>
<li class="chapter" data-level="11.4" data-path="dynamic.html"><a href="dynamic.html#pattern-construction"><i class="fa fa-check"></i><b>11.4</b> Pattern construction<span></span></a></li>
<li class="chapter" data-level="11.5" data-path="dynamic.html"><a href="dynamic.html#branch-provenance"><i class="fa fa-check"></i><b>11.5</b> Branch provenance<span></span></a></li>
<li class="chapter" data-level="11.6" data-path="dynamic.html"><a href="dynamic.html#testing-patterns"><i class="fa fa-check"></i><b>11.6</b> Testing patterns<span></span></a></li>
<li class="chapter" data-level="11.7" data-path="dynamic.html"><a href="dynamic.html#branching-over-files"><i class="fa fa-check"></i><b>11.7</b> Branching over files<span></span></a></li>
<li class="chapter" data-level="11.8" data-path="dynamic.html"><a href="dynamic.html#branching-over-rows"><i class="fa fa-check"></i><b>11.8</b> Branching over rows<span></span></a></li>
<li class="chapter" data-level="11.9" data-path="dynamic.html"><a href="dynamic.html#iteration"><i class="fa fa-check"></i><b>11.9</b> Iteration<span></span></a>
<ul>
<li class="chapter" data-level="11.9.1" data-path="dynamic.html"><a href="dynamic.html#vector-iteration"><i class="fa fa-check"></i><b>11.9.1</b> Vector iteration<span></span></a></li>
<li class="chapter" data-level="11.9.2" data-path="dynamic.html"><a href="dynamic.html#list-iteration"><i class="fa fa-check"></i><b>11.9.2</b> List iteration<span></span></a></li>
<li class="chapter" data-level="11.9.3" data-path="dynamic.html"><a href="dynamic.html#group-iteration"><i class="fa fa-check"></i><b>11.9.3</b> Group iteration<span></span></a></li>
</ul></li>
<li class="chapter" data-level="11.10" data-path="dynamic.html"><a href="dynamic.html#dynamic-branching-performance"><i class="fa fa-check"></i><b>11.10</b> Dynamic branching performance<span></span></a></li>
<li class="chapter" data-level="11.11" data-path="dynamic.html"><a href="dynamic.html#batching"><i class="fa fa-check"></i><b>11.11</b> Batching<span></span></a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="static.html"><a href="static.html"><i class="fa fa-check"></i><b>12</b> Static branching<span></span></a>
<ul>
<li class="chapter" data-level="12.1" data-path="static.html"><a href="static.html#branching-1"><i class="fa fa-check"></i><b>12.1</b> Branching<span></span></a></li>
<li class="chapter" data-level="12.2" data-path="static.html"><a href="static.html#when-to-use-static-branching"><i class="fa fa-check"></i><b>12.2</b> When to use static branching<span></span></a></li>
<li class="chapter" data-level="12.3" data-path="static.html"><a href="static.html#map"><i class="fa fa-check"></i><b>12.3</b> Map<span></span></a></li>
<li class="chapter" data-level="12.4" data-path="static.html"><a href="static.html#dynamic-within-static-branching"><i class="fa fa-check"></i><b>12.4</b> Dynamic-within-static branching<span></span></a></li>
<li class="chapter" data-level="12.5" data-path="static.html"><a href="static.html#combine"><i class="fa fa-check"></i><b>12.5</b> Combine<span></span></a></li>
<li class="chapter" data-level="12.6" data-path="static.html"><a href="static.html#metaprogramming"><i class="fa fa-check"></i><b>12.6</b> Metaprogramming<span></span></a></li>
<li class="chapter" data-level="12.7" data-path="static.html"><a href="static.html#hooks"><i class="fa fa-check"></i><b>12.7</b> Hooks<span></span></a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="hpc.html"><a href="hpc.html"><i class="fa fa-check"></i><b>13</b> High-performance computing<span></span></a>
<ul>
<li class="chapter" data-level="13.1" data-path="hpc.html"><a href="hpc.html#clustermq"><i class="fa fa-check"></i><b>13.1</b> Clustermq<span></span></a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="hpc.html"><a href="hpc.html#persistent-workers"><i class="fa fa-check"></i><b>13.1.1</b> Persistent workers<span></span></a></li>
<li class="chapter" data-level="13.1.2" data-path="hpc.html"><a href="hpc.html#clustermq-installation"><i class="fa fa-check"></i><b>13.1.2</b> Clustermq installation<span></span></a></li>
<li class="chapter" data-level="13.1.3" data-path="hpc.html"><a href="hpc.html#clustermq-locally"><i class="fa fa-check"></i><b>13.1.3</b> Clustermq locally<span></span></a></li>
<li class="chapter" data-level="13.1.4" data-path="hpc.html"><a href="hpc.html#clustermq-remotely"><i class="fa fa-check"></i><b>13.1.4</b> Clustermq remotely<span></span></a></li>
<li class="chapter" data-level="13.1.5" data-path="hpc.html"><a href="hpc.html#clustermq-configuration"><i class="fa fa-check"></i><b>13.1.5</b> Clustermq configuration<span></span></a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="hpc.html"><a href="hpc.html#future"><i class="fa fa-check"></i><b>13.2</b> Future<span></span></a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="hpc.html"><a href="hpc.html#transient-workers"><i class="fa fa-check"></i><b>13.2.1</b> Transient workers<span></span></a></li>
<li class="chapter" data-level="13.2.2" data-path="hpc.html"><a href="hpc.html#future-installation"><i class="fa fa-check"></i><b>13.2.2</b> Future installation<span></span></a></li>
<li class="chapter" data-level="13.2.3" data-path="hpc.html"><a href="hpc.html#future-locally"><i class="fa fa-check"></i><b>13.2.3</b> Future locally<span></span></a></li>
<li class="chapter" data-level="13.2.4" data-path="hpc.html"><a href="hpc.html#future-remotely"><i class="fa fa-check"></i><b>13.2.4</b> Future remotely<span></span></a></li>
<li class="chapter" data-level="13.2.5" data-path="hpc.html"><a href="hpc.html#future-configuration"><i class="fa fa-check"></i><b>13.2.5</b> Future configuration<span></span></a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="hpc.html"><a href="hpc.html#advanced"><i class="fa fa-check"></i><b>13.3</b> Advanced<span></span></a></li>
<li class="chapter" data-level="13.4" data-path="hpc.html"><a href="hpc.html#cloud-computing"><i class="fa fa-check"></i><b>13.4</b> Cloud computing<span></span></a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="storage_amazon.html"><a href="storage_amazon.html"><i class="fa fa-check"></i><b>14</b> Integration with Amazon S3 storage<span></span></a>
<ul>
<li class="chapter" data-level="14.1" data-path="storage_amazon.html"><a href="storage_amazon.html#a-disclaimer"><i class="fa fa-check"></i><b>14.1</b> A disclaimer<span></span></a></li>
<li class="chapter" data-level="14.2" data-path="storage_amazon.html"><a href="storage_amazon.html#communicate-with-your-collaborators"><i class="fa fa-check"></i><b>14.2</b> Communicate with your collaborators<span></span></a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="storage_amazon.html"><a href="storage_amazon.html#get-started-with-the-amazon-s3-web-console"><i class="fa fa-check"></i><b>14.2.1</b> Get started with the Amazon S3 web console<span></span></a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="storage_amazon.html"><a href="storage_amazon.html#configure-your-local-machine"><i class="fa fa-check"></i><b>14.3</b> Configure your local machine<span></span></a></li>
<li class="chapter" data-level="14.4" data-path="storage_amazon.html"><a href="storage_amazon.html#create-s3-buckets"><i class="fa fa-check"></i><b>14.4</b> Create S3 buckets<span></span></a></li>
<li class="chapter" data-level="14.5" data-path="storage_amazon.html"><a href="storage_amazon.html#configure-the-pipeline"><i class="fa fa-check"></i><b>14.5</b> Configure the pipeline<span></span></a></li>
<li class="chapter" data-level="14.6" data-path="storage_amazon.html"><a href="storage_amazon.html#run-the-pipeline-1"><i class="fa fa-check"></i><b>14.6</b> Run the pipeline<span></span></a></li>
<li class="chapter" data-level="14.7" data-path="storage_amazon.html"><a href="storage_amazon.html#manage-the-data"><i class="fa fa-check"></i><b>14.7</b> Manage the data<span></span></a></li>
<li class="chapter" data-level="14.8" data-path="storage_amazon.html"><a href="storage_amazon.html#data-version-control"><i class="fa fa-check"></i><b>14.8</b> Data version control<span></span></a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="drake.html"><a href="drake.html"><i class="fa fa-check"></i><b>15</b> What about <code>drake</code>?<span></span></a>
<ul>
<li class="chapter" data-level="15.1" data-path="drake.html"><a href="drake.html#why-is-drake-superseded"><i class="fa fa-check"></i><b>15.1</b> Why is <code>drake</code> superseded?<span></span></a></li>
<li class="chapter" data-level="15.2" data-path="drake.html"><a href="drake.html#transitioning-to-targets"><i class="fa fa-check"></i><b>15.2</b> Transitioning to <code>targets</code><span></span></a></li>
<li class="chapter" data-level="15.3" data-path="drake.html"><a href="drake.html#advantages-of-targets-over-drake"><i class="fa fa-check"></i><b>15.3</b> Advantages of <code>targets</code> over <code>drake</code><span></span></a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="drake.html"><a href="drake.html#better-guardrails-by-design"><i class="fa fa-check"></i><b>15.3.1</b> Better guardrails by design<span></span></a></li>
<li class="chapter" data-level="15.3.2" data-path="drake.html"><a href="drake.html#enhanced-debugging-support"><i class="fa fa-check"></i><b>15.3.2</b> Enhanced debugging support<span></span></a></li>
<li class="chapter" data-level="15.3.3" data-path="drake.html"><a href="drake.html#improved-tracking-of-package-functions"><i class="fa fa-check"></i><b>15.3.3</b> Improved tracking of package functions<span></span></a></li>
<li class="chapter" data-level="15.3.4" data-path="drake.html"><a href="drake.html#lighter-friendlier-data-management"><i class="fa fa-check"></i><b>15.3.4</b> Lighter, friendlier data management<span></span></a></li>
<li class="chapter" data-level="15.3.5" data-path="drake.html"><a href="drake.html#cloud-storage"><i class="fa fa-check"></i><b>15.3.5</b> Cloud storage<span></span></a></li>
<li class="chapter" data-level="15.3.6" data-path="drake.html"><a href="drake.html#show-status-of-functions-and-global-objects"><i class="fa fa-check"></i><b>15.3.6</b> Show status of functions and global objects<span></span></a></li>
<li class="chapter" data-level="15.3.7" data-path="drake.html"><a href="drake.html#dynamic-branching-with-dplyrgroup_by"><i class="fa fa-check"></i><b>15.3.7</b> Dynamic branching with <code>dplyr::group_by()</code><span></span></a></li>
<li class="chapter" data-level="15.3.8" data-path="drake.html"><a href="drake.html#composable-dynamic-branching"><i class="fa fa-check"></i><b>15.3.8</b> Composable dynamic branching<span></span></a></li>
<li class="chapter" data-level="15.3.9" data-path="drake.html"><a href="drake.html#improved-parallel-efficiency"><i class="fa fa-check"></i><b>15.3.9</b> Improved parallel efficiency<span></span></a></li>
<li class="chapter" data-level="15.3.10" data-path="drake.html"><a href="drake.html#metaprogramming-1"><i class="fa fa-check"></i><b>15.3.10</b> Metaprogramming<span></span></a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The targets R Package User Manual</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="walkthrough" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Chapter 2</span> Walkthrough<a href="walkthrough.html#walkthrough" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This chapter walks through a minimal example of a <a href="https://github.com/ropensci/targets"><code>targets</code></a>-powered data analysis project. The source code is available <a href="https://github.com/wlandau/targets-minimal">here</a>, and it has a free <a href="https://rstudio.cloud/project/1430691">RStudio Cloud workspace</a> where you can try the code in your web browser. The <a href="https://docs.ropensci.org/targets/index.html#examples">documentation website</a> links to other examples.</p>
<div id="about-this-minimal-example" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> About this minimal example<a href="walkthrough.html#about-this-minimal-example" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The goal of this minimal workflow is to assess the relationship among ozone, wind, and temperature in base R’s <code>airquality</code> dataset. We read the data from a file, preprocess it, visualize some of the variables, fit a regression model, and generate an R Markdown report to communicate the results.</p>
</div>
<div id="file-structure" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> File structure<a href="walkthrough.html#file-structure" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The file structure of the project looks like this.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="walkthrough.html#cb1-1" aria-hidden="true" tabindex="-1"></a>├── _targets.R</span>
<span id="cb1-2"><a href="walkthrough.html#cb1-2" aria-hidden="true" tabindex="-1"></a>├── R<span class="sc">/</span></span>
<span id="cb1-3"><a href="walkthrough.html#cb1-3" aria-hidden="true" tabindex="-1"></a>├──── functions.R</span>
<span id="cb1-4"><a href="walkthrough.html#cb1-4" aria-hidden="true" tabindex="-1"></a>├── data<span class="sc">/</span></span>
<span id="cb1-5"><a href="walkthrough.html#cb1-5" aria-hidden="true" tabindex="-1"></a>└──── raw_data.csv</span></code></pre></div>
<p><code>raw_data.csv</code> contains the data we want to analyze.</p>
<pre><code>Ozone,Solar.R,Wind,Temp,Month,Day
36,118,8.0,72,5,2
12,149,12.6,74,5,3
...</code></pre>
<p><code>functions.R</code> contains our custom user-defined functions. (See the <a href="functions.html#functions">functions chapter</a> for a discussion of function-oriented workflows.)</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="walkthrough.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># functions.R</span></span>
<span id="cb3-2"><a href="walkthrough.html#cb3-2" aria-hidden="true" tabindex="-1"></a>create_plot <span class="ot">&lt;-</span> <span class="cf">function</span>(data) {</span>
<span id="cb3-3"><a href="walkthrough.html#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(data) <span class="sc">+</span></span>
<span id="cb3-4"><a href="walkthrough.html#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> Ozone)) <span class="sc">+</span></span>
<span id="cb3-5"><a href="walkthrough.html#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_gray</span>(<span class="dv">24</span>)</span>
<span id="cb3-6"><a href="walkthrough.html#cb3-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="target-script-file" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Target script file<a href="walkthrough.html#target-script-file" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Whereas files <code>raw_data.csv</code> and <code>functions.R</code> are typical user-defined components of a <a href="https://rstats.wtf/project-oriented-workflow.html">project-oriented workflow</a>, the target script file <code>_targets.R</code> file is special. Every <a href="https://github.com/ropensci/targets"><code>targets</code></a> workflow needs a <a href="https://docs.ropensci.org/targets/reference/tar_script.html">target script file</a> to formally define the targets in the pipeline. By default, the target script is a file called <code>_targets.R</code> in the project’s <a href="https://martinctc.github.io/blog/rstudio-projects-and-working-directories-a-beginner%27s-guide/">root directory</a>.<a href="drake.html#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> Functions <a href="https://docs.ropensci.org/targets/reference/tar_script.html"><code>tar_script()</code></a> and <a href="https://docs.ropensci.org/targets/reference/tar_edit.html"><code>tar_edit()</code></a> can help you create a target script file. Ours looks like this:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="walkthrough.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># _targets.R file</span></span>
<span id="cb4-2"><a href="walkthrough.html#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(targets)</span>
<span id="cb4-3"><a href="walkthrough.html#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;R/functions.R&quot;</span>)</span>
<span id="cb4-4"><a href="walkthrough.html#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">tidyverse.quiet =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-5"><a href="walkthrough.html#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_option_set</span>(<span class="at">packages =</span> <span class="fu">c</span>(<span class="st">&quot;biglm&quot;</span>, <span class="st">&quot;tidyverse&quot;</span>))</span>
<span id="cb4-6"><a href="walkthrough.html#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">list</span>(</span>
<span id="cb4-7"><a href="walkthrough.html#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(</span>
<span id="cb4-8"><a href="walkthrough.html#cb4-8" aria-hidden="true" tabindex="-1"></a>    raw_data_file,</span>
<span id="cb4-9"><a href="walkthrough.html#cb4-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;data/raw_data.csv&quot;</span>,</span>
<span id="cb4-10"><a href="walkthrough.html#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">format =</span> <span class="st">&quot;file&quot;</span></span>
<span id="cb4-11"><a href="walkthrough.html#cb4-11" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb4-12"><a href="walkthrough.html#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(</span>
<span id="cb4-13"><a href="walkthrough.html#cb4-13" aria-hidden="true" tabindex="-1"></a>    raw_data,</span>
<span id="cb4-14"><a href="walkthrough.html#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">read_csv</span>(raw_data_file, <span class="at">col_types =</span> <span class="fu">cols</span>())</span>
<span id="cb4-15"><a href="walkthrough.html#cb4-15" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb4-16"><a href="walkthrough.html#cb4-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(</span>
<span id="cb4-17"><a href="walkthrough.html#cb4-17" aria-hidden="true" tabindex="-1"></a>    data,</span>
<span id="cb4-18"><a href="walkthrough.html#cb4-18" aria-hidden="true" tabindex="-1"></a>    raw_data <span class="sc">%&gt;%</span></span>
<span id="cb4-19"><a href="walkthrough.html#cb4-19" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Ozone))</span>
<span id="cb4-20"><a href="walkthrough.html#cb4-20" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb4-21"><a href="walkthrough.html#cb4-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(hist, <span class="fu">create_plot</span>(data)),</span>
<span id="cb4-22"><a href="walkthrough.html#cb4-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(fit, <span class="fu">biglm</span>(Ozone <span class="sc">~</span> Wind <span class="sc">+</span> Temp, data))</span>
<span id="cb4-23"><a href="walkthrough.html#cb4-23" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>All target script files have these requirements.</p>
<ol style="list-style-type: decimal">
<li>Load the <a href="https://github.com/ropensci/targets"><code>targets</code></a> package itself. (target scripts created with <code>tar_script()</code> automatically insert a <code>library(targets)</code> line at the top by default.)</li>
<li>Load your custom functions and global objects into the R session. In our case, our only such object is the <code>create_plot()</code> function, and we load it into the session by calling <code>source("R/functions.R")</code>.</li>
<li>Call <code>tar_option_set()</code> to set the default settings for all you targets, such as the names of required packages and the data storage format. Individual targets can override these settings.</li>
<li>Define individual targets with the <code>tar_target()</code> function. Each target is an intermediate step of the workflow. At minimum, a target must have a name and an R expression. This expression runs when the pipeline builds the target, and the return value is saved as a file in the <code>_targets/objects/</code> folder. The only targets not stored in <code>_targets/objects/</code> are dynamic files such as <code>raw_data_file</code>. Here, <code>format = "file"</code> makes <code>raw_data_file</code> a dynamic file. That means <code>targets</code> watches the data at the file paths returned from the expression (in this case, <code>"data/raw_data.csv")</code>.<a href="drake.html#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a></li>
<li>Every target script must end with a list of your <code>tar_target()</code> objects. Those objects can be nested, i.e. lists within lists.</li>
</ol>
</div>
<div id="inspect-the-pipeline" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Inspect the pipeline<a href="walkthrough.html#inspect-the-pipeline" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Before you run the pipeline for real, you should always inspect the manifest and the graph for errors. <code>tar_manifest()</code> shows you a data frame information about the targets, and it has functionality to specify the targets and columns returned.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="walkthrough.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_manifest</span>(<span class="at">fields =</span> <span class="st">&quot;command&quot;</span>)</span>
<span id="cb5-2"><a href="walkthrough.html#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 5 × 2</span></span>
<span id="cb5-3"><a href="walkthrough.html#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   name          command                                      </span></span>
<span id="cb5-4"><a href="walkthrough.html#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;         &lt;chr&gt;                                        </span></span>
<span id="cb5-5"><a href="walkthrough.html#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 raw_data_file &quot;\&quot;data/raw_data.csv\&quot;&quot;                      </span></span>
<span id="cb5-6"><a href="walkthrough.html#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 raw_data      &quot;read_csv(raw_data_file, col_types = cols())&quot;</span></span>
<span id="cb5-7"><a href="walkthrough.html#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 data          &quot;raw_data %&gt;% filter(!is.na(Ozone))&quot;         </span></span>
<span id="cb5-8"><a href="walkthrough.html#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 fit           &quot;biglm(Ozone ~ Wind + Temp, data)&quot;           </span></span>
<span id="cb5-9"><a href="walkthrough.html#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 hist          &quot;create_plot(data)&quot;</span></span></code></pre></div>
<p>There are also graphical displays with <code>tar_glimpse()</code></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="walkthrough.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_glimpse</span>()</span></code></pre></div>
<div id="htmlwidget-1a22ac0dd0a9cff56950" style="width:672px;height:480px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-1a22ac0dd0a9cff56950">{"x":{"nodes":{"name":["raw_data","fit","hist","raw_data_file","data"],"type":["stem","stem","stem","stem","stem"],"status":["none","none","none","none","none"],"seconds":[null,null,null,null,null],"bytes":[null,null,null,null,null],"branches":[null,null,null,null,null],"label":["raw_data","fit","hist","raw_data_file","data"],"color":["#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac"],"id":["raw_data","fit","hist","raw_data_file","data"],"level":[2,4,4,1,3],"shape":["dot","dot","dot","dot","dot"]},"edges":{"from":["raw_data_file","data","data","raw_data"],"to":["raw_data","fit","hist","data"],"arrows":["to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":{"type":"cubicBezier","forceDirection":"horizontal"}},"physics":{"stabilization":false},"interaction":{"zoomSpeed":1},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":{"from":1,"to":1},"algorithm":"hierarchical","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"right","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Stem"],"shape":["dot"],"color":["#899DA4"]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
<p>and <code>tar_visnetwork()</code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="walkthrough.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_visnetwork</span>()</span></code></pre></div>
<div id="htmlwidget-de0932768d47ddf3b37e" style="width:672px;height:480px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-de0932768d47ddf3b37e">{"x":{"nodes":{"name":["data","fit","hist","raw_data","raw_data_file","create_plot"],"type":["stem","stem","stem","stem","stem","function"],"status":["outdated","outdated","outdated","outdated","outdated","outdated"],"seconds":[null,null,null,null,null,null],"bytes":[null,null,null,null,null,null],"branches":[null,null,null,null,null,null],"label":["data","fit","hist","raw_data","raw_data_file","create_plot"],"color":["#78B7C5","#78B7C5","#78B7C5","#78B7C5","#78B7C5","#78B7C5"],"id":["data","fit","hist","raw_data","raw_data_file","create_plot"],"level":[3,4,4,2,1,1],"shape":["dot","dot","dot","dot","dot","triangle"]},"edges":{"from":["raw_data_file","data","create_plot","data","raw_data"],"to":["raw_data","fit","hist","hist","data"],"arrows":["to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":{"type":"cubicBezier","forceDirection":"horizontal"}},"physics":{"stabilization":false},"interaction":{"zoomSpeed":1},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":{"from":1,"to":1},"algorithm":"hierarchical","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"right","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Outdated","Stem","Function"],"color":["#78B7C5","#899DA4","#899DA4"],"shape":["dot","dot","triangle"]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
<p>Both graphing functions above visualize the underlying directed acyclic graph (DAG) and tell you how targets are connected. This DAG is indifferent to the order of targets in your pipeline. You will still get the same graph even if you rearrange them. This is because <code>targets</code> uses static code analysis to detect the dependencies of each target, and this process does not depend on target order. For details, visit the dependency detection section of the <a href="targets.html#targets">target construction chapter</a>.</p>
</div>
<div id="run-the-pipeline" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Run the pipeline<a href="walkthrough.html#run-the-pipeline" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>tar_make()</code> runs the workflow. It creates a fresh clean external R process, reads the target script to learn about the pipeline, runs the correct targets in the correct order given by the graph, and saves the necessary data to the <code>_targets/</code> data store. <a href="drake.html#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="walkthrough.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_make</span>()</span>
<span id="cb8-2"><a href="walkthrough.html#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • start target raw_data_file</span></span>
<span id="cb8-3"><a href="walkthrough.html#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • built target raw_data_file</span></span>
<span id="cb8-4"><a href="walkthrough.html#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • start target raw_data</span></span>
<span id="cb8-5"><a href="walkthrough.html#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • built target raw_data</span></span>
<span id="cb8-6"><a href="walkthrough.html#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • start target data</span></span>
<span id="cb8-7"><a href="walkthrough.html#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • built target data</span></span>
<span id="cb8-8"><a href="walkthrough.html#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • start target fit</span></span>
<span id="cb8-9"><a href="walkthrough.html#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • built target fit</span></span>
<span id="cb8-10"><a href="walkthrough.html#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • start target hist</span></span>
<span id="cb8-11"><a href="walkthrough.html#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • built target hist</span></span>
<span id="cb8-12"><a href="walkthrough.html#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • end pipeline: 3.478 seconds</span></span></code></pre></div>
<p>The next time you run <code>tar_make()</code>, <code>targets</code> skips everything that is already up to date, which saves a lot of time in large projects with long runtimes.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="walkthrough.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_make</span>()</span>
<span id="cb9-2"><a href="walkthrough.html#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✔ skip target raw_data_file</span></span>
<span id="cb9-3"><a href="walkthrough.html#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✔ skip target raw_data</span></span>
<span id="cb9-4"><a href="walkthrough.html#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✔ skip target data</span></span>
<span id="cb9-5"><a href="walkthrough.html#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✔ skip target fit</span></span>
<span id="cb9-6"><a href="walkthrough.html#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✔ skip target hist</span></span>
<span id="cb9-7"><a href="walkthrough.html#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✔ skip pipeline: 0.303 seconds</span></span></code></pre></div>
<p>You can use <code>tar_visnetwork()</code> and <code>tar_outdated()</code> to check ahead of time which targets are up to date.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="walkthrough.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_visnetwork</span>()</span></code></pre></div>
<div id="htmlwidget-a064174782f36145e1f7" style="width:672px;height:480px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-a064174782f36145e1f7">{"x":{"nodes":{"name":["data","fit","hist","raw_data","raw_data_file","create_plot"],"type":["stem","stem","stem","stem","stem","function"],"status":["uptodate","uptodate","uptodate","uptodate","uptodate","uptodate"],"seconds":[0.01,0.004,0.013,0.159,1.522,null],"bytes":[1355,1824,44868,1528,2890,null],"branches":[null,null,null,null,null,null],"label":["data","fit","hist","raw_data","raw_data_file","create_plot"],"color":["#354823","#354823","#354823","#354823","#354823","#354823"],"id":["data","fit","hist","raw_data","raw_data_file","create_plot"],"level":[3,4,4,2,1,1],"shape":["dot","dot","dot","dot","dot","triangle"]},"edges":{"from":["raw_data_file","data","create_plot","data","raw_data"],"to":["raw_data","fit","hist","hist","data"],"arrows":["to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":{"type":"cubicBezier","forceDirection":"horizontal"}},"physics":{"stabilization":false},"interaction":{"zoomSpeed":1},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":{"from":1,"to":1},"algorithm":"hierarchical","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"right","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Up to date","Stem","Function"],"color":["#354823","#899DA4","#899DA4"],"shape":["dot","dot","triangle"]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="walkthrough.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_outdated</span>()</span>
<span id="cb11-2"><a href="walkthrough.html#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; character(0)</span></span></code></pre></div>
</div>
<div id="changes" class="section level2 hasAnchor" number="2.6">
<h2><span class="header-section-number">2.6</span> Changes<a href="walkthrough.html#changes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <code>targets</code> package notices when you make changes to code and data, and those changes affect which targets rerun and which targets are skipped. Internally, special rules called “cues” decide whether a target reruns. The <a href="https://docs.ropensci.org/targets/reference/tar_cue.html"><code>tar_cue()</code></a> function lets you suppress some of these cues, and the <a href="https://docs.ropensci.org/tarchetypes/"><code>tarchetypes</code></a> package supports nuanced <a href="https://docs.ropensci.org/tarchetypes/reference/index.html#section-cues">cue factories</a> and <a href="https://docs.ropensci.org/tarchetypes/reference/index.html#section-targets-with-custom-invalidation-rules">target factories</a> to further customize target invalidation behavior. The <a href="https://docs.ropensci.org/targets/reference/tar_cue.html"><code>tar_cue()</code></a> function documentation <a href="https://docs.ropensci.org/targets/reference/tar_cue.html#target-invalidation-rules">explains cues in detail</a>, as well as <a href="https://docs.ropensci.org/targets/reference/tar_cue.html#dependency-based-invalidation-and-user-defined-functions">specifics on how <code>targets</code> detects changes to upstream dependencies</a>.</p>
<div id="change-code" class="section level3 hasAnchor" number="2.6.1">
<h3><span class="header-section-number">2.6.1</span> Change code<a href="walkthrough.html#change-code" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you change one of your functions, the targets that depend on it will no longer be up to date, and <code>tar_make()</code> will rebuild them. For example, let’s set the number of bins in our histogram.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="walkthrough.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Edit functions.R.</span></span>
<span id="cb12-2"><a href="walkthrough.html#cb12-2" aria-hidden="true" tabindex="-1"></a>create_plot <span class="ot">&lt;-</span> <span class="cf">function</span>(data) {</span>
<span id="cb12-3"><a href="walkthrough.html#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(data) <span class="sc">+</span></span>
<span id="cb12-4"><a href="walkthrough.html#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> Ozone), <span class="at">bins =</span> <span class="dv">10</span>) <span class="sc">+</span> <span class="co"># Set number of bins.</span></span>
<span id="cb12-5"><a href="walkthrough.html#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_gray</span>(<span class="dv">24</span>)</span>
<span id="cb12-6"><a href="walkthrough.html#cb12-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><code>targets</code> detects the change. <code>hist</code> is outdated (as would be any targets downstream of <code>hist</code>) and the others are still up to date.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="walkthrough.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_visnetwork</span>()</span></code></pre></div>
<div id="htmlwidget-457a94b4b7e3482a457d" style="width:672px;height:480px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-457a94b4b7e3482a457d">{"x":{"nodes":{"name":["data","fit","hist","raw_data","raw_data_file","create_plot"],"type":["stem","stem","stem","stem","stem","function"],"status":["uptodate","uptodate","outdated","uptodate","uptodate","outdated"],"seconds":[0.01,0.004,0.013,0.159,1.522,null],"bytes":[1355,1824,44868,1528,2890,null],"branches":[null,null,null,null,null,null],"label":["data","fit","hist","raw_data","raw_data_file","create_plot"],"color":["#354823","#354823","#78B7C5","#354823","#354823","#78B7C5"],"id":["data","fit","hist","raw_data","raw_data_file","create_plot"],"level":[3,4,4,2,1,1],"shape":["dot","dot","dot","dot","dot","triangle"]},"edges":{"from":["raw_data_file","data","create_plot","data","raw_data"],"to":["raw_data","fit","hist","hist","data"],"arrows":["to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":{"type":"cubicBezier","forceDirection":"horizontal"}},"physics":{"stabilization":false},"interaction":{"zoomSpeed":1},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":{"from":1,"to":1},"algorithm":"hierarchical","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"right","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Up to date","Outdated","Stem","Function"],"color":["#354823","#78B7C5","#899DA4","#899DA4"],"shape":["dot","dot","dot","triangle"]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="walkthrough.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_outdated</span>()</span>
<span id="cb14-2"><a href="walkthrough.html#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;hist&quot;</span></span></code></pre></div>
<p>That means <code>tar_make()</code> reruns <code>hist</code> and nothing else.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="walkthrough.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_make</span>()</span>
<span id="cb15-2"><a href="walkthrough.html#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✔ skip target raw_data_file</span></span>
<span id="cb15-3"><a href="walkthrough.html#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✔ skip target raw_data</span></span>
<span id="cb15-4"><a href="walkthrough.html#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✔ skip target data</span></span>
<span id="cb15-5"><a href="walkthrough.html#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✔ skip target fit</span></span>
<span id="cb15-6"><a href="walkthrough.html#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • start target hist</span></span>
<span id="cb15-7"><a href="walkthrough.html#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • built target hist</span></span>
<span id="cb15-8"><a href="walkthrough.html#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • end pipeline: 2.018 seconds</span></span></code></pre></div>
<p>We would see similar behavior if we changed the R expressions in any <code>tar_target()</code> calls in the target script file.</p>
</div>
<div id="change-data" class="section level3 hasAnchor" number="2.6.2">
<h3><span class="header-section-number">2.6.2</span> Change data<a href="walkthrough.html#change-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If we change the data file <code>raw_data.csv</code>, <code>targets</code> notices the change. This is because <code>raw_data_file</code> is a dynamic file (i.e. <code>tar_target(format = "file")</code>) that returned <code>"raw_data.csv"</code>. Let’s try it out. Below, let’s use only the first 100 rows of the <code>airquality</code> dataset.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="walkthrough.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(<span class="fu">head</span>(airquality, <span class="at">n =</span> <span class="dv">100</span>), <span class="st">&quot;data/raw_data.csv&quot;</span>)</span></code></pre></div>
<p>Sure enough, <code>raw_data_file</code> and everything downstream is out of date, so all our targets are outdated.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="walkthrough.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_visnetwork</span>()</span></code></pre></div>
<div id="htmlwidget-d5a48df58adf0f02dd9b" style="width:672px;height:480px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-d5a48df58adf0f02dd9b">{"x":{"nodes":{"name":["data","fit","hist","raw_data","raw_data_file","create_plot"],"type":["stem","stem","stem","stem","stem","function"],"status":["outdated","outdated","outdated","outdated","outdated","uptodate"],"seconds":[0.01,0.004,1.313,0.159,1.522,null],"bytes":[1355,1824,44878,1528,2890,null],"branches":[null,null,null,null,null,null],"label":["data","fit","hist","raw_data","raw_data_file","create_plot"],"color":["#78B7C5","#78B7C5","#78B7C5","#78B7C5","#78B7C5","#354823"],"id":["data","fit","hist","raw_data","raw_data_file","create_plot"],"level":[3,4,4,2,1,1],"shape":["dot","dot","dot","dot","dot","triangle"]},"edges":{"from":["raw_data_file","data","create_plot","data","raw_data"],"to":["raw_data","fit","hist","hist","data"],"arrows":["to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":{"type":"cubicBezier","forceDirection":"horizontal"}},"physics":{"stabilization":false},"interaction":{"zoomSpeed":1},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":{"from":1,"to":1},"algorithm":"hierarchical","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"right","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Outdated","Up to date","Stem","Function"],"color":["#78B7C5","#354823","#899DA4","#899DA4"],"shape":["dot","dot","dot","triangle"]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="walkthrough.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_outdated</span>()</span>
<span id="cb18-2"><a href="walkthrough.html#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;raw_data&quot;      &quot;fit&quot;           &quot;hist&quot;          &quot;raw_data_file&quot;</span></span>
<span id="cb18-3"><a href="walkthrough.html#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5] &quot;data&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="walkthrough.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_make</span>()</span>
<span id="cb19-2"><a href="walkthrough.html#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • start target raw_data_file</span></span>
<span id="cb19-3"><a href="walkthrough.html#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • built target raw_data_file</span></span>
<span id="cb19-4"><a href="walkthrough.html#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • start target raw_data</span></span>
<span id="cb19-5"><a href="walkthrough.html#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • built target raw_data</span></span>
<span id="cb19-6"><a href="walkthrough.html#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • start target data</span></span>
<span id="cb19-7"><a href="walkthrough.html#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • built target data</span></span>
<span id="cb19-8"><a href="walkthrough.html#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • start target fit</span></span>
<span id="cb19-9"><a href="walkthrough.html#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • built target fit</span></span>
<span id="cb19-10"><a href="walkthrough.html#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • start target hist</span></span>
<span id="cb19-11"><a href="walkthrough.html#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • built target hist</span></span>
<span id="cb19-12"><a href="walkthrough.html#cb19-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • end pipeline: 3.182 seconds</span></span></code></pre></div>
</div>
</div>
<div id="read-your-data" class="section level2 hasAnchor" number="2.7">
<h2><span class="header-section-number">2.7</span> Read your data<a href="walkthrough.html#read-your-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>targets</code> has a convenient functions <code>tar_read()</code> to read your data from the <code>_targets/</code> data store.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="walkthrough.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_read</span>(hist)</span></code></pre></div>
<p>There is also a <code>tar_load()</code> function, which loads the return values of targets into the current environment (or the environment of your choosing) and returns nothing (<code>NULL</code>). <code>tar_load()</code> supports <a href="https://tidyselect.r-lib.org/"><code>tidyselect</code></a> verbs like <code>starts_with()</code></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="walkthrough.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_load</span>(<span class="fu">starts_with</span>(<span class="st">&quot;fit&quot;</span>))</span>
<span id="cb21-2"><a href="walkthrough.html#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(biglm)</span>
<span id="cb21-3"><a href="walkthrough.html#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Loading required package: DBI</span></span>
<span id="cb21-4"><a href="walkthrough.html#cb21-4" aria-hidden="true" tabindex="-1"></a>fit</span>
<span id="cb21-5"><a href="walkthrough.html#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Large data regression model: biglm(Ozone ~ Wind + Temp, data)</span></span>
<span id="cb21-6"><a href="walkthrough.html#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Sample size =  69</span></span></code></pre></div>
<p>The purpose of <code>tar_read()</code> and <code>tar_load()</code> is to make exploratory data analysis easy and convenient. Use these functions to verify the correctness of the output from the pipeline and come up with ideas for new targets if needed.</p>
</div>
<div id="read-metadata" class="section level2 hasAnchor" number="2.8">
<h2><span class="header-section-number">2.8</span> Read metadata<a href="walkthrough.html#read-metadata" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To read the build progress of your targets while <code>tar_make()</code> is running, you can open a new R session and run <code>tar_progress()</code>. It reads the spreadsheet in <code>_targets/meta/progress</code> and tells you which targets are running, built, errored, or cancelled.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="walkthrough.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_progress</span>()</span>
<span id="cb22-2"><a href="walkthrough.html#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 5 × 2</span></span>
<span id="cb22-3"><a href="walkthrough.html#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   name          progress</span></span>
<span id="cb22-4"><a href="walkthrough.html#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;         &lt;chr&gt;   </span></span>
<span id="cb22-5"><a href="walkthrough.html#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 raw_data_file built   </span></span>
<span id="cb22-6"><a href="walkthrough.html#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 raw_data      built   </span></span>
<span id="cb22-7"><a href="walkthrough.html#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 data          built   </span></span>
<span id="cb22-8"><a href="walkthrough.html#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 fit           built   </span></span>
<span id="cb22-9"><a href="walkthrough.html#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 hist          built</span></span></code></pre></div>
<p>Likewise, the <code>tar_meta()</code> function reads <code>_targets/meta/meta</code> and tells you high-level information about the target’s settings, data, and results. The <code>warnings</code>, <code>error</code>, and <code>traceback</code> columns give you diagnostic information about targets with problems.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="walkthrough.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_meta</span>()</span>
<span id="cb23-2"><a href="walkthrough.html#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 18</span></span>
<span id="cb23-3"><a href="walkthrough.html#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   name  type  data  command depend    seed path  time                size  bytes</span></span>
<span id="cb23-4"><a href="walkthrough.html#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;int&gt; &lt;lis&gt; &lt;dttm&gt;              &lt;chr&gt; &lt;int&gt;</span></span>
<span id="cb23-5"><a href="walkthrough.html#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 crea… func… 658f… &lt;NA&gt;    &lt;NA&gt;   NA      &lt;chr&gt; NA                  &lt;NA&gt;     NA</span></span>
<span id="cb23-6"><a href="walkthrough.html#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 data  stem  fb03… 173ca5… 64b59…  1.59e9 &lt;chr&gt; 2022-03-14 00:19:08 1834…  1003</span></span>
<span id="cb23-7"><a href="walkthrough.html#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 fit   stem  7bd1… aa0df6… 7ebfd…  1.78e9 &lt;chr&gt; 2022-03-14 00:19:08 6c3b…  1485</span></span>
<span id="cb23-8"><a href="walkthrough.html#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 hist  stem  01e7… 688771… 6b49b… -1.03e9 &lt;chr&gt; 2022-03-14 00:19:09 9a85… 44455</span></span>
<span id="cb23-9"><a href="walkthrough.html#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 raw_… stem  ebea… 000ed0… 6ef08… -9.80e8 &lt;chr&gt; 2022-03-14 00:19:08 7325…  1171</span></span>
<span id="cb23-10"><a href="walkthrough.html#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 raw_… stem  2b16… b6df0c… ef46d…  2.11e9 &lt;chr&gt; 2022-03-14 00:18:58 9fb6…  1884</span></span>
<span id="cb23-11"><a href="walkthrough.html#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 8 more variables: format &lt;chr&gt;, repository &lt;chr&gt;, iteration &lt;chr&gt;,</span></span>
<span id="cb23-12"><a href="walkthrough.html#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   parent &lt;lgl&gt;, children &lt;list&gt;, seconds &lt;dbl&gt;, warnings &lt;lgl&gt;, error &lt;lgl&gt;</span></span></code></pre></div>
<p>The <code>_targets/meta/meta</code> spreadsheet file is critically important. Although <code>targets</code> can still work properly if files are missing from <code>_targets/objects</code>, the pipeline will error out if <code>_targets/meta/meta</code> is corrupted. If <code>tar_meta()</code> works, the project should be fine.</p>

</div>
</div>
<div style = "background: #1C356D; color: white; padding: 10px 10px 10px 25px; font-size: 1em; width: 100%;">
  Copyright Eli Lilly and Company
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="markdown.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ropensci-books/targets/edit/main/walkthrough.Rmd",
"text": "Edit this chapter"
},
"history": {
"link": "https://github.com/ropensci-books/targets/commits/main/walkthrough.Rmd",
"text": "Chapter edit history"
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
