<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Walkthrough | The targets R Package User Manual</title>
  <meta name="description" content="In-depth discussion of the major functionality of targets." />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Walkthrough | The targets R Package User Manual" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://books.ropensci.org/targets/man/figures/logo.png" />
  <meta property="og:description" content="In-depth discussion of the major functionality of targets." />
  <meta name="github-repo" content="ropensci-books/targets" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Walkthrough | The targets R Package User Manual" />
  
  <meta name="twitter:description" content="In-depth discussion of the major functionality of targets." />
  <meta name="twitter:image" content="https://books.ropensci.org/targets/man/figures/logo.png" />

<meta name="author" content="Will Landau" />
<meta name="author" content="Copyright Eli Lilly and Company" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="man/figures/apple-touch-icon.png" />
  <link rel="shortcut icon" href="man/figures/favicon.ico" type="image/x-icon" />
<link rel="prev" href="index.html"/>
<link rel="next" href="debugging.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet" />
<script src="libs/vis-9.1.0/vis-network.min.js"></script>
<script src="libs/visNetwork-binding-2.1.0/visNetwork.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-150843595-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-150843595-1');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The targets R Package User Manual</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#motivation"><i class="fa fa-check"></i><b>1.1</b> Motivation</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#pipeline-tools"><i class="fa fa-check"></i><b>1.2</b> Pipeline tools</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#the-targets-package"><i class="fa fa-check"></i><b>1.3</b> The <code>targets</code> package</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#about-this-manual"><i class="fa fa-check"></i><b>1.4</b> About this manual</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#what-about-drake"><i class="fa fa-check"></i><b>1.5</b> What about <code>drake</code>?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="walkthrough.html"><a href="walkthrough.html"><i class="fa fa-check"></i><b>2</b> Walkthrough</a>
<ul>
<li class="chapter" data-level="2.1" data-path="walkthrough.html"><a href="walkthrough.html#about-this-example"><i class="fa fa-check"></i><b>2.1</b> About this example</a></li>
<li class="chapter" data-level="2.2" data-path="walkthrough.html"><a href="walkthrough.html#file-structure"><i class="fa fa-check"></i><b>2.2</b> File structure</a></li>
<li class="chapter" data-level="2.3" data-path="walkthrough.html"><a href="walkthrough.html#target-script-file"><i class="fa fa-check"></i><b>2.3</b> Target script file</a></li>
<li class="chapter" data-level="2.4" data-path="walkthrough.html"><a href="walkthrough.html#inspect-the-pipeline"><i class="fa fa-check"></i><b>2.4</b> Inspect the pipeline</a></li>
<li class="chapter" data-level="2.5" data-path="walkthrough.html"><a href="walkthrough.html#run-the-pipeline"><i class="fa fa-check"></i><b>2.5</b> Run the pipeline</a></li>
<li class="chapter" data-level="2.6" data-path="walkthrough.html"><a href="walkthrough.html#changes"><i class="fa fa-check"></i><b>2.6</b> Changes</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="walkthrough.html"><a href="walkthrough.html#change-code"><i class="fa fa-check"></i><b>2.6.1</b> Change code</a></li>
<li class="chapter" data-level="2.6.2" data-path="walkthrough.html"><a href="walkthrough.html#change-data"><i class="fa fa-check"></i><b>2.6.2</b> Change data</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="walkthrough.html"><a href="walkthrough.html#read-metadata"><i class="fa fa-check"></i><b>2.7</b> Read metadata</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="debugging.html"><a href="debugging.html"><i class="fa fa-check"></i><b>3</b> Debugging</a>
<ul>
<li class="chapter" data-level="3.1" data-path="debugging.html"><a href="debugging.html#error-messages"><i class="fa fa-check"></i><b>3.1</b> Error messages</a></li>
<li class="chapter" data-level="3.2" data-path="debugging.html"><a href="debugging.html#environment-browser"><i class="fa fa-check"></i><b>3.2</b> Environment browser</a></li>
<li class="chapter" data-level="3.3" data-path="debugging.html"><a href="debugging.html#the-debug-option"><i class="fa fa-check"></i><b>3.3</b> The debug option</a></li>
<li class="chapter" data-level="3.4" data-path="debugging.html"><a href="debugging.html#workspaces"><i class="fa fa-check"></i><b>3.4</b> Workspaces</a></li>
<li class="chapter" data-level="3.5" data-path="debugging.html"><a href="debugging.html#tradeoffs"><i class="fa fa-check"></i><b>3.5</b> Tradeoffs</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="performance.html"><a href="performance.html"><i class="fa fa-check"></i><b>4</b> Performance</a>
<ul>
<li class="chapter" data-level="4.1" data-path="performance.html"><a href="performance.html#monitoring-the-pipeline"><i class="fa fa-check"></i><b>4.1</b> Monitoring the pipeline</a></li>
<li class="chapter" data-level="4.2" data-path="performance.html"><a href="performance.html#performance-1"><i class="fa fa-check"></i><b>4.2</b> Performance</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>5</b> Functions</a>
<ul>
<li class="chapter" data-level="5.1" data-path="functions.html"><a href="functions.html#problems-with-script-based-workflows"><i class="fa fa-check"></i><b>5.1</b> Problems with script-based workflows</a></li>
<li class="chapter" data-level="5.2" data-path="functions.html"><a href="functions.html#functions-1"><i class="fa fa-check"></i><b>5.2</b> Functions</a></li>
<li class="chapter" data-level="5.3" data-path="functions.html"><a href="functions.html#writing-functions"><i class="fa fa-check"></i><b>5.3</b> Writing functions</a></li>
<li class="chapter" data-level="5.4" data-path="functions.html"><a href="functions.html#functions-in-pipelines"><i class="fa fa-check"></i><b>5.4</b> Functions in pipelines</a></li>
<li class="chapter" data-level="5.5" data-path="functions.html"><a href="functions.html#tracking-changes"><i class="fa fa-check"></i><b>5.5</b> Tracking changes</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="targets.html"><a href="targets.html"><i class="fa fa-check"></i><b>6</b> Target construction</a>
<ul>
<li class="chapter" data-level="6.1" data-path="targets.html"><a href="targets.html#target-names"><i class="fa fa-check"></i><b>6.1</b> Target names</a></li>
<li class="chapter" data-level="6.2" data-path="targets.html"><a href="targets.html#what-a-target-should-do"><i class="fa fa-check"></i><b>6.2</b> What a target should do</a></li>
<li class="chapter" data-level="6.3" data-path="targets.html"><a href="targets.html#how-much-a-target-should-do"><i class="fa fa-check"></i><b>6.3</b> How much a target should do</a></li>
<li class="chapter" data-level="6.4" data-path="targets.html"><a href="targets.html#working-with-tools-outside-r"><i class="fa fa-check"></i><b>6.4</b> Working with tools outside R</a></li>
<li class="chapter" data-level="6.5" data-path="targets.html"><a href="targets.html#side-effects"><i class="fa fa-check"></i><b>6.5</b> Side effects</a></li>
<li class="chapter" data-level="6.6" data-path="targets.html"><a href="targets.html#dependencies"><i class="fa fa-check"></i><b>6.6</b> Dependencies</a></li>
<li class="chapter" data-level="6.7" data-path="targets.html"><a href="targets.html#return-value"><i class="fa fa-check"></i><b>6.7</b> Return value</a>
<ul>
<li class="chapter" data-level="6.7.1" data-path="targets.html"><a href="targets.html#saving"><i class="fa fa-check"></i><b>6.7.1</b> Saving</a></li>
<li class="chapter" data-level="6.7.2" data-path="targets.html"><a href="targets.html#hashing"><i class="fa fa-check"></i><b>6.7.2</b> Hashing</a></li>
<li class="chapter" data-level="6.7.3" data-path="targets.html"><a href="targets.html#workaround"><i class="fa fa-check"></i><b>6.7.3</b> Workaround</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>7</b> Packages</a>
<ul>
<li class="chapter" data-level="7.1" data-path="packages.html"><a href="packages.html#loading-and-configuring-r-packages"><i class="fa fa-check"></i><b>7.1</b> Loading and configuring R packages</a></li>
<li class="chapter" data-level="7.2" data-path="packages.html"><a href="packages.html#r-packages-as-projects"><i class="fa fa-check"></i><b>7.2</b> R packages as projects</a></li>
<li class="chapter" data-level="7.3" data-path="packages.html"><a href="packages.html#target-factories"><i class="fa fa-check"></i><b>7.3</b> Target Factories</a></li>
<li class="chapter" data-level="7.4" data-path="packages.html"><a href="packages.html#package-based-invalidation"><i class="fa fa-check"></i><b>7.4</b> Package-based invalidation</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="projects.html"><a href="projects.html"><i class="fa fa-check"></i><b>8</b> Projects</a>
<ul>
<li class="chapter" data-level="8.1" data-path="projects.html"><a href="projects.html#extra-reproducibility"><i class="fa fa-check"></i><b>8.1</b> Extra reproducibility</a></li>
<li class="chapter" data-level="8.2" data-path="projects.html"><a href="projects.html#project-files"><i class="fa fa-check"></i><b>8.2</b> Project files</a></li>
<li class="chapter" data-level="8.3" data-path="projects.html"><a href="projects.html#multiple-projects"><i class="fa fa-check"></i><b>8.3</b> Multiple projects</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="projects.html"><a href="projects.html#create-each-project."><i class="fa fa-check"></i><b>8.3.1</b> Create each project.</a></li>
<li class="chapter" data-level="8.3.2" data-path="projects.html"><a href="projects.html#configure-each-project."><i class="fa fa-check"></i><b>8.3.2</b> Configure each project.</a></li>
<li class="chapter" data-level="8.3.3" data-path="projects.html"><a href="projects.html#run-each-project"><i class="fa fa-check"></i><b>8.3.3</b> Run each project</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="projects.html"><a href="projects.html#interdependent-projects"><i class="fa fa-check"></i><b>8.4</b> Interdependent projects</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="projects.html"><a href="projects.html#config-inheritance"><i class="fa fa-check"></i><b>8.4.1</b> Config inheritance</a></li>
<li class="chapter" data-level="8.4.2" data-path="projects.html"><a href="projects.html#sharing-targets"><i class="fa fa-check"></i><b>8.4.2</b> Sharing targets</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="projects.html"><a href="projects.html#the-config-package"><i class="fa fa-check"></i><b>8.5</b> The config package</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>9</b> Data: storage and memory</a>
<ul>
<li class="chapter" data-level="9.1" data-path="data.html"><a href="data.html#local-data-store"><i class="fa fa-check"></i><b>9.1</b> Local data store</a></li>
<li class="chapter" data-level="9.2" data-path="data.html"><a href="data.html#external-files"><i class="fa fa-check"></i><b>9.2</b> External files</a></li>
<li class="chapter" data-level="9.3" data-path="data.html"><a href="data.html#memory"><i class="fa fa-check"></i><b>9.3</b> Memory</a></li>
<li class="chapter" data-level="9.4" data-path="data.html"><a href="data.html#cloud-storage"><i class="fa fa-check"></i><b>9.4</b> Cloud storage</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="data.html"><a href="data.html#cost"><i class="fa fa-check"></i><b>9.4.1</b> Cost</a></li>
<li class="chapter" data-level="9.4.2" data-path="data.html"><a href="data.html#aws-setup"><i class="fa fa-check"></i><b>9.4.2</b> AWS setup</a></li>
<li class="chapter" data-level="9.4.3" data-path="data.html"><a href="data.html#gcp-setup"><i class="fa fa-check"></i><b>9.4.3</b> GCP setup</a></li>
<li class="chapter" data-level="9.4.4" data-path="data.html"><a href="data.html#usage"><i class="fa fa-check"></i><b>9.4.4</b> Usage</a></li>
<li class="chapter" data-level="9.4.5" data-path="data.html"><a href="data.html#data-version-control"><i class="fa fa-check"></i><b>9.4.5</b> Data version control</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="data.html"><a href="data.html#cleaning-up-local-internal-data-files"><i class="fa fa-check"></i><b>9.5</b> Cleaning up local internal data files</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="literate-programming.html"><a href="literate-programming.html"><i class="fa fa-check"></i><b>10</b> Literate programming</a>
<ul>
<li class="chapter" data-level="10.1" data-path="literate-programming.html"><a href="literate-programming.html#literate-programming-within-a-target"><i class="fa fa-check"></i><b>10.1</b> Literate programming within a target</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="literate-programming.html"><a href="literate-programming.html#r-markdown-targets"><i class="fa fa-check"></i><b>10.1.1</b> R Markdown targets</a></li>
<li class="chapter" data-level="10.1.2" data-path="literate-programming.html"><a href="literate-programming.html#quarto-targets"><i class="fa fa-check"></i><b>10.1.2</b> Quarto targets</a></li>
<li class="chapter" data-level="10.1.3" data-path="literate-programming.html"><a href="literate-programming.html#parameterized-documents"><i class="fa fa-check"></i><b>10.1.3</b> Parameterized documents</a></li>
<li class="chapter" data-level="10.1.4" data-path="literate-programming.html"><a href="literate-programming.html#single-parameter-set"><i class="fa fa-check"></i><b>10.1.4</b> Single parameter set</a></li>
<li class="chapter" data-level="10.1.5" data-path="literate-programming.html"><a href="literate-programming.html#multiple-parameter-sets"><i class="fa fa-check"></i><b>10.1.5</b> Multiple parameter sets</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="literate-programming.html"><a href="literate-programming.html#target-markdown"><i class="fa fa-check"></i><b>10.2</b> Target Markdown</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="literate-programming.html"><a href="literate-programming.html#access"><i class="fa fa-check"></i><b>10.2.1</b> Access</a></li>
<li class="chapter" data-level="10.2.2" data-path="literate-programming.html"><a href="literate-programming.html#purpose"><i class="fa fa-check"></i><b>10.2.2</b> Purpose</a></li>
<li class="chapter" data-level="10.2.3" data-path="literate-programming.html"><a href="literate-programming.html#example"><i class="fa fa-check"></i><b>10.2.3</b> Example</a></li>
<li class="chapter" data-level="10.2.4" data-path="literate-programming.html"><a href="literate-programming.html#required-packages"><i class="fa fa-check"></i><b>10.2.4</b> Required packages</a></li>
<li class="chapter" data-level="10.2.5" data-path="literate-programming.html"><a href="literate-programming.html#setup"><i class="fa fa-check"></i><b>10.2.5</b> Setup</a></li>
<li class="chapter" data-level="10.2.6" data-path="literate-programming.html"><a href="literate-programming.html#globals"><i class="fa fa-check"></i><b>10.2.6</b> Globals</a></li>
<li class="chapter" data-level="10.2.7" data-path="literate-programming.html"><a href="literate-programming.html#target-definitions"><i class="fa fa-check"></i><b>10.2.7</b> Target definitions</a></li>
<li class="chapter" data-level="10.2.8" data-path="literate-programming.html"><a href="literate-programming.html#pipeline"><i class="fa fa-check"></i><b>10.2.8</b> Pipeline</a></li>
<li class="chapter" data-level="10.2.9" data-path="literate-programming.html"><a href="literate-programming.html#output"><i class="fa fa-check"></i><b>10.2.9</b> Output</a></li>
<li class="chapter" data-level="10.2.10" data-path="literate-programming.html"><a href="literate-programming.html#conditioning-on-interactive-mode"><i class="fa fa-check"></i><b>10.2.10</b> Conditioning on interactive mode</a></li>
<li class="chapter" data-level="10.2.11" data-path="literate-programming.html"><a href="literate-programming.html#tar_interactive"><i class="fa fa-check"></i><b>10.2.11</b> <code>tar_interactive()</code></a></li>
<li class="chapter" data-level="10.2.12" data-path="literate-programming.html"><a href="literate-programming.html#tar_toggle"><i class="fa fa-check"></i><b>10.2.12</b> <code>tar_toggle()</code></a></li>
<li class="chapter" data-level="10.2.13" data-path="literate-programming.html"><a href="literate-programming.html#chunk-options"><i class="fa fa-check"></i><b>10.2.13</b> Chunk options</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="dynamic.html"><a href="dynamic.html"><i class="fa fa-check"></i><b>11</b> Dynamic branching</a>
<ul>
<li class="chapter" data-level="11.1" data-path="dynamic.html"><a href="dynamic.html#branching"><i class="fa fa-check"></i><b>11.1</b> Branching</a></li>
<li class="chapter" data-level="11.2" data-path="dynamic.html"><a href="dynamic.html#about-dynamic-branching"><i class="fa fa-check"></i><b>11.2</b> About dynamic branching</a></li>
<li class="chapter" data-level="11.3" data-path="dynamic.html"><a href="dynamic.html#patterns"><i class="fa fa-check"></i><b>11.3</b> Patterns</a></li>
<li class="chapter" data-level="11.4" data-path="dynamic.html"><a href="dynamic.html#pattern-construction"><i class="fa fa-check"></i><b>11.4</b> Pattern construction</a></li>
<li class="chapter" data-level="11.5" data-path="dynamic.html"><a href="dynamic.html#branch-provenance"><i class="fa fa-check"></i><b>11.5</b> Branch provenance</a></li>
<li class="chapter" data-level="11.6" data-path="dynamic.html"><a href="dynamic.html#testing-patterns"><i class="fa fa-check"></i><b>11.6</b> Testing patterns</a></li>
<li class="chapter" data-level="11.7" data-path="dynamic.html"><a href="dynamic.html#branching-over-files"><i class="fa fa-check"></i><b>11.7</b> Branching over files</a></li>
<li class="chapter" data-level="11.8" data-path="dynamic.html"><a href="dynamic.html#branching-over-rows"><i class="fa fa-check"></i><b>11.8</b> Branching over rows</a></li>
<li class="chapter" data-level="11.9" data-path="dynamic.html"><a href="dynamic.html#iteration"><i class="fa fa-check"></i><b>11.9</b> Iteration</a>
<ul>
<li class="chapter" data-level="11.9.1" data-path="dynamic.html"><a href="dynamic.html#vector-iteration"><i class="fa fa-check"></i><b>11.9.1</b> Vector iteration</a></li>
<li class="chapter" data-level="11.9.2" data-path="dynamic.html"><a href="dynamic.html#list-iteration"><i class="fa fa-check"></i><b>11.9.2</b> List iteration</a></li>
<li class="chapter" data-level="11.9.3" data-path="dynamic.html"><a href="dynamic.html#group-iteration"><i class="fa fa-check"></i><b>11.9.3</b> Group iteration</a></li>
</ul></li>
<li class="chapter" data-level="11.10" data-path="dynamic.html"><a href="dynamic.html#dynamic-branching-performance"><i class="fa fa-check"></i><b>11.10</b> Dynamic branching performance</a></li>
<li class="chapter" data-level="11.11" data-path="dynamic.html"><a href="dynamic.html#batching"><i class="fa fa-check"></i><b>11.11</b> Batching</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="static.html"><a href="static.html"><i class="fa fa-check"></i><b>12</b> Static branching</a>
<ul>
<li class="chapter" data-level="12.1" data-path="static.html"><a href="static.html#branching-1"><i class="fa fa-check"></i><b>12.1</b> Branching</a></li>
<li class="chapter" data-level="12.2" data-path="static.html"><a href="static.html#when-to-use-static-branching"><i class="fa fa-check"></i><b>12.2</b> When to use static branching</a></li>
<li class="chapter" data-level="12.3" data-path="static.html"><a href="static.html#map"><i class="fa fa-check"></i><b>12.3</b> Map</a></li>
<li class="chapter" data-level="12.4" data-path="static.html"><a href="static.html#dynamic-within-static-branching"><i class="fa fa-check"></i><b>12.4</b> Dynamic-within-static branching</a></li>
<li class="chapter" data-level="12.5" data-path="static.html"><a href="static.html#combine"><i class="fa fa-check"></i><b>12.5</b> Combine</a></li>
<li class="chapter" data-level="12.6" data-path="static.html"><a href="static.html#metaprogramming"><i class="fa fa-check"></i><b>12.6</b> Metaprogramming</a></li>
<li class="chapter" data-level="12.7" data-path="static.html"><a href="static.html#hooks"><i class="fa fa-check"></i><b>12.7</b> Hooks</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="hpc.html"><a href="hpc.html"><i class="fa fa-check"></i><b>13</b> High-performance computing</a>
<ul>
<li class="chapter" data-level="13.1" data-path="hpc.html"><a href="hpc.html#clustermq"><i class="fa fa-check"></i><b>13.1</b> Clustermq</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="hpc.html"><a href="hpc.html#persistent-workers"><i class="fa fa-check"></i><b>13.1.1</b> Persistent workers</a></li>
<li class="chapter" data-level="13.1.2" data-path="hpc.html"><a href="hpc.html#clustermq-installation"><i class="fa fa-check"></i><b>13.1.2</b> Clustermq installation</a></li>
<li class="chapter" data-level="13.1.3" data-path="hpc.html"><a href="hpc.html#clustermq-locally"><i class="fa fa-check"></i><b>13.1.3</b> Clustermq locally</a></li>
<li class="chapter" data-level="13.1.4" data-path="hpc.html"><a href="hpc.html#clustermq-remotely"><i class="fa fa-check"></i><b>13.1.4</b> Clustermq remotely</a></li>
<li class="chapter" data-level="13.1.5" data-path="hpc.html"><a href="hpc.html#clustermq-configuration"><i class="fa fa-check"></i><b>13.1.5</b> Clustermq configuration</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="hpc.html"><a href="hpc.html#future"><i class="fa fa-check"></i><b>13.2</b> Future</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="hpc.html"><a href="hpc.html#transient-workers"><i class="fa fa-check"></i><b>13.2.1</b> Transient workers</a></li>
<li class="chapter" data-level="13.2.2" data-path="hpc.html"><a href="hpc.html#future-installation"><i class="fa fa-check"></i><b>13.2.2</b> Future installation</a></li>
<li class="chapter" data-level="13.2.3" data-path="hpc.html"><a href="hpc.html#future-locally"><i class="fa fa-check"></i><b>13.2.3</b> Future locally</a></li>
<li class="chapter" data-level="13.2.4" data-path="hpc.html"><a href="hpc.html#future-remotely"><i class="fa fa-check"></i><b>13.2.4</b> Future remotely</a></li>
<li class="chapter" data-level="13.2.5" data-path="hpc.html"><a href="hpc.html#future-configuration"><i class="fa fa-check"></i><b>13.2.5</b> Future configuration</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="hpc.html"><a href="hpc.html#advanced"><i class="fa fa-check"></i><b>13.3</b> Advanced</a></li>
<li class="chapter" data-level="13.4" data-path="hpc.html"><a href="hpc.html#cloud-computing"><i class="fa fa-check"></i><b>13.4</b> Cloud computing</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="drake.html"><a href="drake.html"><i class="fa fa-check"></i><b>14</b> What about <code>drake</code>?</a>
<ul>
<li class="chapter" data-level="14.1" data-path="drake.html"><a href="drake.html#why-is-drake-superseded"><i class="fa fa-check"></i><b>14.1</b> Why is <code>drake</code> superseded?</a></li>
<li class="chapter" data-level="14.2" data-path="drake.html"><a href="drake.html#transitioning-to-targets"><i class="fa fa-check"></i><b>14.2</b> Transitioning to <code>targets</code></a></li>
<li class="chapter" data-level="14.3" data-path="drake.html"><a href="drake.html#advantages-of-targets-over-drake"><i class="fa fa-check"></i><b>14.3</b> Advantages of <code>targets</code> over <code>drake</code></a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="drake.html"><a href="drake.html#better-guardrails-by-design"><i class="fa fa-check"></i><b>14.3.1</b> Better guardrails by design</a></li>
<li class="chapter" data-level="14.3.2" data-path="drake.html"><a href="drake.html#enhanced-debugging-support"><i class="fa fa-check"></i><b>14.3.2</b> Enhanced debugging support</a></li>
<li class="chapter" data-level="14.3.3" data-path="drake.html"><a href="drake.html#improved-tracking-of-package-functions"><i class="fa fa-check"></i><b>14.3.3</b> Improved tracking of package functions</a></li>
<li class="chapter" data-level="14.3.4" data-path="drake.html"><a href="drake.html#lighter-friendlier-data-management"><i class="fa fa-check"></i><b>14.3.4</b> Lighter, friendlier data management</a></li>
<li class="chapter" data-level="14.3.5" data-path="drake.html"><a href="drake.html#cloud-storage-1"><i class="fa fa-check"></i><b>14.3.5</b> Cloud storage</a></li>
<li class="chapter" data-level="14.3.6" data-path="drake.html"><a href="drake.html#show-status-of-functions-and-global-objects"><i class="fa fa-check"></i><b>14.3.6</b> Show status of functions and global objects</a></li>
<li class="chapter" data-level="14.3.7" data-path="drake.html"><a href="drake.html#dynamic-branching-with-dplyrgroup_by"><i class="fa fa-check"></i><b>14.3.7</b> Dynamic branching with <code>dplyr::group_by()</code></a></li>
<li class="chapter" data-level="14.3.8" data-path="drake.html"><a href="drake.html#composable-dynamic-branching"><i class="fa fa-check"></i><b>14.3.8</b> Composable dynamic branching</a></li>
<li class="chapter" data-level="14.3.9" data-path="drake.html"><a href="drake.html#improved-parallel-efficiency"><i class="fa fa-check"></i><b>14.3.9</b> Improved parallel efficiency</a></li>
<li class="chapter" data-level="14.3.10" data-path="drake.html"><a href="drake.html#metaprogramming-1"><i class="fa fa-check"></i><b>14.3.10</b> Metaprogramming</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="markdown.html"><a href="markdown.html"><i class="fa fa-check"></i><b>15</b> Literate programming</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The targets R Package User Manual</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="walkthrough" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Chapter 2</span> Walkthrough<a href="walkthrough.html#walkthrough" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This chapter walks through a short example of a <a href="https://github.com/ropensci/targets"><code>targets</code></a>-powered data analysis project. The source code is available at <a href="https://github.com/wlandau/targets-four-minutes" class="uri">https://github.com/wlandau/targets-four-minutes</a>, and you can visit <a href="https://rstudio.cloud/project/3946303" class="uri">https://rstudio.cloud/project/3946303</a> to try out the code in a web browser (no download or installation required). The <a href="https://docs.ropensci.org/targets/index.html#examples">documentation website</a> links to other examples. The contents of the chapter are also explained in a four-minute video tutorial:</p>
<center>
<iframe src="https://player.vimeo.com/video/700982360?h=38c890bd4f" width="640" height="360" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen>
</iframe>
</center>
<div id="about-this-example" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> About this example<a href="walkthrough.html#about-this-example" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The goal of this short analysis is to assess the relationship among ozone and temperature in base R’s <code>airquality</code> dataset. We track a data file, prepare a dataset, fit a model, and plot the model against the data.</p>
</div>
<div id="file-structure" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> File structure<a href="walkthrough.html#file-structure" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The file structure of the project looks like this.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="walkthrough.html#cb1-1" aria-hidden="true" tabindex="-1"></a>├── _targets.R</span>
<span id="cb1-2"><a href="walkthrough.html#cb1-2" aria-hidden="true" tabindex="-1"></a>├── data.csv</span>
<span id="cb1-3"><a href="walkthrough.html#cb1-3" aria-hidden="true" tabindex="-1"></a>└── R<span class="sc">/</span></span>
<span id="cb1-4"><a href="walkthrough.html#cb1-4" aria-hidden="true" tabindex="-1"></a>  └──── functions.R</span></code></pre></div>
<p><code>data.csv</code> contains the data we want to analyze.</p>
<pre><code>Ozone,Solar.R,Wind,Temp,Month,Day
36,118,8.0,72,5,2
12,149,12.6,74,5,3
...</code></pre>
<p><code>R/functions.R</code> contains our custom user-defined functions. (See the <a href="functions.html#functions">functions chapter</a> for a discussion of function-oriented workflows.)</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="walkthrough.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># R/functions.R</span></span>
<span id="cb3-2"><a href="walkthrough.html#cb3-2" aria-hidden="true" tabindex="-1"></a>get_data <span class="ot">&lt;-</span> <span class="cf">function</span>(file) {</span>
<span id="cb3-3"><a href="walkthrough.html#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(file, <span class="at">col_types =</span> <span class="fu">cols</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb3-4"><a href="walkthrough.html#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Ozone))</span>
<span id="cb3-5"><a href="walkthrough.html#cb3-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-6"><a href="walkthrough.html#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="walkthrough.html#cb3-7" aria-hidden="true" tabindex="-1"></a>fit_model <span class="ot">&lt;-</span> <span class="cf">function</span>(data) {</span>
<span id="cb3-8"><a href="walkthrough.html#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lm</span>(Ozone <span class="sc">~</span> Temp, data) <span class="sc">%&gt;%</span></span>
<span id="cb3-9"><a href="walkthrough.html#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coefficients</span>()</span>
<span id="cb3-10"><a href="walkthrough.html#cb3-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-11"><a href="walkthrough.html#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="walkthrough.html#cb3-12" aria-hidden="true" tabindex="-1"></a>plot_model <span class="ot">&lt;-</span> <span class="cf">function</span>(model, data) {</span>
<span id="cb3-13"><a href="walkthrough.html#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(data) <span class="sc">+</span></span>
<span id="cb3-14"><a href="walkthrough.html#cb3-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Temp, <span class="at">y =</span> Ozone)) <span class="sc">+</span></span>
<span id="cb3-15"><a href="walkthrough.html#cb3-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_abline</span>(<span class="at">intercept =</span> model[<span class="dv">1</span>], <span class="at">slope =</span> model[<span class="dv">2</span>])</span>
<span id="cb3-16"><a href="walkthrough.html#cb3-16" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="target-script-file" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Target script file<a href="walkthrough.html#target-script-file" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Whereas files <code>data.csv</code> and <code>functions.R</code> are typical user-defined components of a <a href="https://rstats.wtf/project-oriented-workflow.html">project-oriented workflow</a>, the target script file <code>_targets.R</code> file is special. Every <a href="https://github.com/ropensci/targets"><code>targets</code></a> workflow needs a <a href="https://docs.ropensci.org/targets/reference/tar_script.html">target script file</a> to configure and define the pipeline.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> The <a href="https://docs.ropensci.org/targets/reference/use_targets.html"><code>use_targets()</code></a> function in <code>targets</code> version &gt;= 0.12.0 creates an initial target script for you to fill in. Ours looks like this:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="walkthrough.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># _targets.R file</span></span>
<span id="cb4-2"><a href="walkthrough.html#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(targets)</span>
<span id="cb4-3"><a href="walkthrough.html#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;R/functions.R&quot;</span>)</span>
<span id="cb4-4"><a href="walkthrough.html#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_option_set</span>(<span class="at">packages =</span> <span class="fu">c</span>(<span class="st">&quot;readr&quot;</span>, <span class="st">&quot;dplyr&quot;</span>, <span class="st">&quot;ggplot2&quot;</span>))</span>
<span id="cb4-5"><a href="walkthrough.html#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">list</span>(</span>
<span id="cb4-6"><a href="walkthrough.html#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(file, <span class="st">&quot;data.csv&quot;</span>, <span class="at">format =</span> <span class="st">&quot;file&quot;</span>),</span>
<span id="cb4-7"><a href="walkthrough.html#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(data, <span class="fu">get_data</span>(file)),</span>
<span id="cb4-8"><a href="walkthrough.html#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(model, <span class="fu">fit_model</span>(data)),</span>
<span id="cb4-9"><a href="walkthrough.html#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(plot, <span class="fu">plot_model</span>(model, data))</span>
<span id="cb4-10"><a href="walkthrough.html#cb4-10" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>All target script files have these requirements.</p>
<ol style="list-style-type: decimal">
<li>Load the packages required for configuration, e.g. <a href="https://github.com/ropensci/targets"><code>targets</code></a> itself.<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a></li>
<li>Load your custom functions and small input objects into the R session: in our case, with <code>source("R/functions.R")</code>.</li>
<li>Use <code>tar_option_set()</code> to declare the packages required for analysis, as well as other settings such as the default <a href="https://docs.ropensci.org/targets/reference/tar_target.html#storage-formats">storage format</a>.</li>
<li>Write the pipeline at the bottom of <code>_targets.R</code>. A pipeline is a list of target objects, which you can create with <code>tar_target()</code>. Each target is a step of the analysis. It looks and feels like a variable in R, but it runs reproducibly and stores a value in <code>_targets/objects/</code> when we run the pipeline with <code>tar_make()</code>.</li>
<li>Set additional arguments in <a href="https://docs.ropensci.org/targets/reference/tar_target.html#arguments"><code>tar_target()</code></a> as needed. For example, <code>format = "file"</code> says that the target is an external file, and changes to the contents of the file will invalidate the target (i.e. cause it to rerun).<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></li>
</ol>
</div>
<div id="inspect-the-pipeline" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Inspect the pipeline<a href="walkthrough.html#inspect-the-pipeline" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Before you run the pipeline for real, it is best to check for obvious errors. <a href="https://docs.ropensci.org/targets/reference/tar_manifest.html"><code>tar_manifest()</code></a> lists verbose information about each target.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="walkthrough.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_manifest</span>(<span class="at">fields =</span> <span class="fu">all_of</span>(<span class="st">&quot;command&quot;</span>))</span>
<span id="cb5-2"><a href="walkthrough.html#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 4 × 2</span></span>
<span id="cb5-3"><a href="walkthrough.html#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   name  command                  </span></span>
<span id="cb5-4"><a href="walkthrough.html#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;                    </span></span>
<span id="cb5-5"><a href="walkthrough.html#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 file  &quot;\&quot;data.csv\&quot;&quot;           </span></span>
<span id="cb5-6"><a href="walkthrough.html#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 data  &quot;get_data(file)&quot;         </span></span>
<span id="cb5-7"><a href="walkthrough.html#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 model &quot;fit_model(data)&quot;        </span></span>
<span id="cb5-8"><a href="walkthrough.html#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 plot  &quot;plot_model(model, data)&quot;</span></span></code></pre></div>
<p><a href="https://docs.ropensci.org/targets/reference/tar_visnetwork.html"><code>tar_visnetwork()</code></a> displays the dependency graph. It should show a natural progression of work from left to right as the pipeline progresses, and it targets and functions that depend on one another should have directed edges to identify the dependency relationships.<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a> Dependency relationships are automatically detected using <a href="https://adv-r.hadley.nz/expressions.html#ast-funs">static code analysis</a>, and the order of <code>tar_target()</code> calls in the target list does not matter at all.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="walkthrough.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_visnetwork</span>()</span></code></pre></div>
<div id="htmlwidget-efca96096a73d7c5f34b" style="width:672px;height:480px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-efca96096a73d7c5f34b">{"x":{"nodes":{"name":["data","file","model","plot","fit_model","get_data","plot_model"],"type":["stem","stem","stem","stem","function","function","function"],"status":["outdated","outdated","outdated","outdated","outdated","outdated","outdated"],"seconds":[null,null,null,null,null,null,null],"bytes":[null,null,null,null,null,null,null],"branches":[null,null,null,null,null,null,null],"label":["data","file","model","plot","fit_model","get_data","plot_model"],"color":["#78B7C5","#78B7C5","#78B7C5","#78B7C5","#78B7C5","#78B7C5","#78B7C5"],"id":["data","file","model","plot","fit_model","get_data","plot_model"],"level":[2,1,3,4,1,1,1],"shape":["dot","dot","dot","dot","triangle","triangle","triangle"]},"edges":{"from":["data","model","plot_model","file","get_data","data","fit_model"],"to":["plot","plot","plot","data","data","model","model"],"arrows":["to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":{"type":"cubicBezier","forceDirection":"horizontal"}},"physics":{"stabilization":false},"interaction":{"zoomSpeed":1},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":{"from":1,"to":1},"algorithm":"hierarchical","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"right","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Outdated","Stem","Function"],"color":["#78B7C5","#899DA4","#899DA4"],"shape":["dot","dot","triangle"]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="run-the-pipeline" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Run the pipeline<a href="walkthrough.html#run-the-pipeline" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>tar_make()</code> runs the pipeline. It creates a reproducible new external R process which then reads the target script and runs the correct targets in the correct order.<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="walkthrough.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_make</span>()</span>
<span id="cb7-2"><a href="walkthrough.html#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • start target file</span></span>
<span id="cb7-3"><a href="walkthrough.html#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • built target file</span></span>
<span id="cb7-4"><a href="walkthrough.html#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • start target data</span></span>
<span id="cb7-5"><a href="walkthrough.html#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • built target data</span></span>
<span id="cb7-6"><a href="walkthrough.html#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • start target model</span></span>
<span id="cb7-7"><a href="walkthrough.html#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • built target model</span></span>
<span id="cb7-8"><a href="walkthrough.html#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • start target plot</span></span>
<span id="cb7-9"><a href="walkthrough.html#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • built target plot</span></span>
<span id="cb7-10"><a href="walkthrough.html#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • end pipeline: 0.799 seconds</span></span></code></pre></div>
<p>The output of the pipeline is saved to the <code>_targets/</code> data store, and you can read the output with <code>tar_read()</code> (see also <code>tar_load()</code>).</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="walkthrough.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_read</span>(plot)</span></code></pre></div>
<p><img src="targets-manual_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>The next time you run <code>tar_make()</code>, <code>targets</code> skips everything that is already up to date, which saves a lot of time in large projects with long runtimes.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="walkthrough.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_make</span>()</span>
<span id="cb9-2"><a href="walkthrough.html#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✔ skip target file</span></span>
<span id="cb9-3"><a href="walkthrough.html#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✔ skip target data</span></span>
<span id="cb9-4"><a href="walkthrough.html#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✔ skip target model</span></span>
<span id="cb9-5"><a href="walkthrough.html#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✔ skip target plot</span></span>
<span id="cb9-6"><a href="walkthrough.html#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✔ skip pipeline: 0.125 seconds</span></span></code></pre></div>
<p>You can use <code>tar_visnetwork()</code> and <code>tar_outdated()</code> to check ahead of time which targets are up to date.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="walkthrough.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_visnetwork</span>()</span></code></pre></div>
<div id="htmlwidget-6f575e12cf8342221aad" style="width:672px;height:480px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-6f575e12cf8342221aad">{"x":{"nodes":{"name":["data","file","model","plot","fit_model","get_data","plot_model"],"type":["stem","stem","stem","stem","function","function","function"],"status":["uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate"],"seconds":[0.186,0.478,0.003,0.011,null,null,null],"bytes":[1356,2890,110,39425,null,null,null],"branches":[null,null,null,null,null,null,null],"label":["data","file","model","plot","fit_model","get_data","plot_model"],"color":["#354823","#354823","#354823","#354823","#354823","#354823","#354823"],"id":["data","file","model","plot","fit_model","get_data","plot_model"],"level":[2,1,3,4,1,1,1],"shape":["dot","dot","dot","dot","triangle","triangle","triangle"]},"edges":{"from":["data","model","plot_model","file","get_data","data","fit_model"],"to":["plot","plot","plot","data","data","model","model"],"arrows":["to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":{"type":"cubicBezier","forceDirection":"horizontal"}},"physics":{"stabilization":false},"interaction":{"zoomSpeed":1},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":{"from":1,"to":1},"algorithm":"hierarchical","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"right","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Up to date","Stem","Function"],"color":["#354823","#899DA4","#899DA4"],"shape":["dot","dot","triangle"]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="walkthrough.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_outdated</span>()</span>
<span id="cb11-2"><a href="walkthrough.html#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; character(0)</span></span></code></pre></div>
</div>
<div id="changes" class="section level2 hasAnchor" number="2.6">
<h2><span class="header-section-number">2.6</span> Changes<a href="walkthrough.html#changes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <code>targets</code> package notices when you make changes to code and data, and those changes affect which targets rerun and which targets are skipped.<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a></p>
<div id="change-code" class="section level3 hasAnchor" number="2.6.1">
<h3><span class="header-section-number">2.6.1</span> Change code<a href="walkthrough.html#change-code" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you change one of your functions, the targets that depend on it will no longer be up to date, and <code>tar_make()</code> will rebuild them. For example, let’s increase the font size of the plot.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="walkthrough.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Edit functions.R...</span></span>
<span id="cb12-2"><a href="walkthrough.html#cb12-2" aria-hidden="true" tabindex="-1"></a>plot_model <span class="ot">&lt;-</span> <span class="cf">function</span>(model, data) {</span>
<span id="cb12-3"><a href="walkthrough.html#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(data) <span class="sc">+</span></span>
<span id="cb12-4"><a href="walkthrough.html#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Temp, <span class="at">y =</span> Ozone)) <span class="sc">+</span></span>
<span id="cb12-5"><a href="walkthrough.html#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_abline</span>(<span class="at">intercept =</span> model[<span class="dv">1</span>], <span class="at">slope =</span> model[<span class="dv">2</span>]) <span class="sc">+</span></span>
<span id="cb12-6"><a href="walkthrough.html#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_gray</span>(<span class="dv">24</span>) <span class="co"># Increased the font size.</span></span>
<span id="cb12-7"><a href="walkthrough.html#cb12-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><code>targets</code> detects the change. <code>plot</code> is “outdated” (i.e. invalidated) and the others are still up to date.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="walkthrough.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_visnetwork</span>()</span></code></pre></div>
<div id="htmlwidget-ded96ead20a8868e2644" style="width:672px;height:480px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-ded96ead20a8868e2644">{"x":{"nodes":{"name":["data","file","model","plot","fit_model","get_data","plot_model"],"type":["stem","stem","stem","stem","function","function","function"],"status":["uptodate","uptodate","uptodate","outdated","uptodate","uptodate","outdated"],"seconds":[0.186,0.478,0.003,0.011,null,null,null],"bytes":[1356,2890,110,39425,null,null,null],"branches":[null,null,null,null,null,null,null],"label":["data","file","model","plot","fit_model","get_data","plot_model"],"color":["#354823","#354823","#354823","#78B7C5","#354823","#354823","#78B7C5"],"id":["data","file","model","plot","fit_model","get_data","plot_model"],"level":[2,1,3,4,1,1,1],"shape":["dot","dot","dot","dot","triangle","triangle","triangle"]},"edges":{"from":["data","model","plot_model","file","get_data","data","fit_model"],"to":["plot","plot","plot","data","data","model","model"],"arrows":["to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":{"type":"cubicBezier","forceDirection":"horizontal"}},"physics":{"stabilization":false},"interaction":{"zoomSpeed":1},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":{"from":1,"to":1},"algorithm":"hierarchical","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"right","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Up to date","Outdated","Stem","Function"],"color":["#354823","#78B7C5","#899DA4","#899DA4"],"shape":["dot","dot","dot","triangle"]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="walkthrough.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_outdated</span>()</span>
<span id="cb14-2"><a href="walkthrough.html#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;plot&quot;</span></span></code></pre></div>
<p>Thus, <code>tar_make()</code> reruns <code>plot</code> and nothing else.<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="walkthrough.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_make</span>()</span>
<span id="cb15-2"><a href="walkthrough.html#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✔ skip target file</span></span>
<span id="cb15-3"><a href="walkthrough.html#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✔ skip target data</span></span>
<span id="cb15-4"><a href="walkthrough.html#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✔ skip target model</span></span>
<span id="cb15-5"><a href="walkthrough.html#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • start target plot</span></span>
<span id="cb15-6"><a href="walkthrough.html#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • built target plot</span></span>
<span id="cb15-7"><a href="walkthrough.html#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • end pipeline: 0.605 seconds</span></span></code></pre></div>
<p>Sure enough, we have a new plot.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="walkthrough.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_read</span>(plot)</span></code></pre></div>
<p><img src="targets-manual_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
</div>
<div id="change-data" class="section level3 hasAnchor" number="2.6.2">
<h3><span class="header-section-number">2.6.2</span> Change data<a href="walkthrough.html#change-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If we change the data file <code>data.csv</code>, <code>targets</code> notices the change. This is because <code>file</code> is a file target (i.e. with <code>format = "file"</code> in <code>tar_target()</code>), and the return value from last <code>tar_make()</code> identified <code>"data.csv"</code> as the file to be tracked for changes. Let’s try it out. Below, let’s use only the first 100 rows of the <code>airquality</code> dataset.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="walkthrough.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(<span class="fu">head</span>(airquality, <span class="at">n =</span> <span class="dv">100</span>), <span class="st">&quot;data.csv&quot;</span>)</span></code></pre></div>
<p>Sure enough, <code>raw_data_file</code> and everything downstream is out of date, so all our targets are outdated.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="walkthrough.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_visnetwork</span>()</span></code></pre></div>
<div id="htmlwidget-f26687d41721a42d537b" style="width:672px;height:480px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-f26687d41721a42d537b">{"x":{"nodes":{"name":["data","file","model","plot","fit_model","get_data","plot_model"],"type":["stem","stem","stem","stem","function","function","function"],"status":["outdated","outdated","outdated","outdated","uptodate","uptodate","uptodate"],"seconds":[0.186,0.478,0.003,0.014,null,null,null],"bytes":[1356,2890,110,40863,null,null,null],"branches":[null,null,null,null,null,null,null],"label":["data","file","model","plot","fit_model","get_data","plot_model"],"color":["#78B7C5","#78B7C5","#78B7C5","#78B7C5","#354823","#354823","#354823"],"id":["data","file","model","plot","fit_model","get_data","plot_model"],"level":[2,1,3,4,1,1,1],"shape":["dot","dot","dot","dot","triangle","triangle","triangle"]},"edges":{"from":["data","model","plot_model","file","get_data","data","fit_model"],"to":["plot","plot","plot","data","data","model","model"],"arrows":["to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":{"type":"cubicBezier","forceDirection":"horizontal"}},"physics":{"stabilization":false},"interaction":{"zoomSpeed":1},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":{"from":1,"to":1},"algorithm":"hierarchical","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"right","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Outdated","Up to date","Stem","Function"],"color":["#78B7C5","#354823","#899DA4","#899DA4"],"shape":["dot","dot","dot","triangle"]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="walkthrough.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_outdated</span>()</span>
<span id="cb19-2"><a href="walkthrough.html#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;file&quot;  &quot;plot&quot;  &quot;data&quot;  &quot;model&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="walkthrough.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_make</span>()</span>
<span id="cb20-2"><a href="walkthrough.html#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • start target file</span></span>
<span id="cb20-3"><a href="walkthrough.html#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • built target file</span></span>
<span id="cb20-4"><a href="walkthrough.html#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • start target data</span></span>
<span id="cb20-5"><a href="walkthrough.html#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • built target data</span></span>
<span id="cb20-6"><a href="walkthrough.html#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • start target model</span></span>
<span id="cb20-7"><a href="walkthrough.html#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • built target model</span></span>
<span id="cb20-8"><a href="walkthrough.html#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • start target plot</span></span>
<span id="cb20-9"><a href="walkthrough.html#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • built target plot</span></span>
<span id="cb20-10"><a href="walkthrough.html#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; • end pipeline: 0.737 seconds</span></span></code></pre></div>
</div>
</div>
<div id="read-metadata" class="section level2 hasAnchor" number="2.7">
<h2><span class="header-section-number">2.7</span> Read metadata<a href="walkthrough.html#read-metadata" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To read the build progress of your targets while <code>tar_make()</code> is running, you can open a new R session and run <code>tar_progress()</code>. It reads the flat file in <code>_targets/meta/progress</code> and tells you which targets are running, built, errored, or cancelled.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="walkthrough.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_progress</span>()</span>
<span id="cb21-2"><a href="walkthrough.html#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 4 × 2</span></span>
<span id="cb21-3"><a href="walkthrough.html#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   name  progress</span></span>
<span id="cb21-4"><a href="walkthrough.html#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;   </span></span>
<span id="cb21-5"><a href="walkthrough.html#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 file  built   </span></span>
<span id="cb21-6"><a href="walkthrough.html#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 data  built   </span></span>
<span id="cb21-7"><a href="walkthrough.html#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 model built   </span></span>
<span id="cb21-8"><a href="walkthrough.html#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 plot  built</span></span></code></pre></div>
<p>Likewise, the <code>tar_meta()</code> function reads <code>_targets/meta/meta</code> and tells you high-level information about the target’s settings, data, and results. The <code>warnings</code>, <code>error</code>, and <code>traceback</code> columns give you diagnostic information about targets with problems.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="walkthrough.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_meta</span>()</span>
<span id="cb22-2"><a href="walkthrough.html#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 7 × 18</span></span>
<span id="cb22-3"><a href="walkthrough.html#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   name  type  data  command depend    seed path  time                size  bytes</span></span>
<span id="cb22-4"><a href="walkthrough.html#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;int&gt; &lt;lis&gt; &lt;dttm&gt;              &lt;chr&gt; &lt;int&gt;</span></span>
<span id="cb22-5"><a href="walkthrough.html#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 data  stem  52b5… 4525b9… 60955…  1.59e9 &lt;chr&gt; 2022-06-30 18:50:08 6754…  1004</span></span>
<span id="cb22-6"><a href="walkthrough.html#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 file  stem  2b16… 0d4b75… ef46d… -1.30e9 &lt;chr&gt; 2022-06-30 18:50:02 9fb6…  1884</span></span>
<span id="cb22-7"><a href="walkthrough.html#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 fit_… func… 9826… &lt;NA&gt;    &lt;NA&gt;   NA      &lt;chr&gt; NA                  &lt;NA&gt;     NA</span></span>
<span id="cb22-8"><a href="walkthrough.html#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 get_… func… caaa… &lt;NA&gt;    &lt;NA&gt;   NA      &lt;chr&gt; NA                  &lt;NA&gt;     NA</span></span>
<span id="cb22-9"><a href="walkthrough.html#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 model stem  bc77… f3249b… f4bf1…  1.82e9 &lt;chr&gt; 2022-06-30 18:50:08 c4a6…   111</span></span>
<span id="cb22-10"><a href="walkthrough.html#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 plot  stem  7eac… 1239c9… 3d5d9…  1.93e9 &lt;chr&gt; 2022-06-30 18:50:08 2410… 40439</span></span>
<span id="cb22-11"><a href="walkthrough.html#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7 plot… func… 53e9… &lt;NA&gt;    &lt;NA&gt;   NA      &lt;chr&gt; NA                  &lt;NA&gt;     NA</span></span>
<span id="cb22-12"><a href="walkthrough.html#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 8 more variables: format &lt;chr&gt;, repository &lt;chr&gt;, iteration &lt;chr&gt;,</span></span>
<span id="cb22-13"><a href="walkthrough.html#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   parent &lt;lgl&gt;, children &lt;list&gt;, seconds &lt;dbl&gt;, warnings &lt;lgl&gt;, error &lt;lgl&gt;</span></span></code></pre></div>
<p>The <code>_targets/meta/meta</code> file is critically important. Although <code>targets</code> can still work properly if files are missing from <code>_targets/objects</code>, the pipeline will error out if <code>_targets/meta/meta</code> is corrupted. If <code>tar_meta()</code> works, the project should be fine.</p>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>By default, the target script is a file called <code>_targets.R</code> in the project’s <a href="https://martinctc.github.io/blog/rstudio-projects-and-working-directories-a-beginner%27s-guide/">root directory</a>. However, in <code>targets</code> version 0.5.0.9000 and above, you can set the target script file path to something other than <code>_targets.R</code>. You can either set the path persistently for your project using <a href="https://docs.ropensci.org/targets/reference/tar_config_set.html"><code>tar_config_set()</code></a>, or you can set it temporarily for an individual function call using the <code>script</code> argument of <a href="https://docs.ropensci.org/targets/reference/tar_make.html"><code>tar_make()</code></a> and related functions.<a href="walkthrough.html#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>target scripts created with <code>tar_script()</code> automatically insert a <code>library(targets)</code> line at the top by default.<a href="walkthrough.html#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p><code>format = "file"</code> allows you to track multiple files and directories.<a href="walkthrough.html#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p>If you have hundreds of targets, then <a href="https://docs.ropensci.org/targets/reference/tar_visnetwork.html"><code>tar_visnetwork()</code></a> may be slow. If that happens, consider temporarily commenting out some targets in <code>_targets.R</code> just for visualization purposes.<a href="walkthrough.html#fnref4" class="footnote-back">↩︎</a></p></li>
<li id="fn5"><p>In <code>targets</code> version 0.3.1.9000 and above, you can set the path of the local data store to something other than <code>_targets/</code>. A project-level <code>_targets.yaml</code> file keeps track of the path. Functions <a href="https://docs.ropensci.org/targets/reference/tar_config_set.html"><code>tar_config_set()</code></a> and <a href="https://docs.ropensci.org/targets/reference/tar_config_get.html"><code>tar_config_get()</code></a> can help.<a href="walkthrough.html#fnref5" class="footnote-back">↩︎</a></p></li>
<li id="fn6"><p>Internally, special rules called “cues” decide whether a target reruns. The <a href="https://docs.ropensci.org/targets/reference/tar_cue.html"><code>tar_cue()</code></a> function lets you suppress some of these cues, and the <a href="https://docs.ropensci.org/tarchetypes/"><code>tarchetypes</code></a> package supports nuanced <a href="https://docs.ropensci.org/tarchetypes/reference/index.html#section-cues">cue factories</a> and <a href="https://docs.ropensci.org/tarchetypes/reference/index.html#section-targets-with-custom-invalidation-rules">target factories</a> to further customize target invalidation behavior. The <a href="https://docs.ropensci.org/targets/reference/tar_cue.html"><code>tar_cue()</code></a> function documentation <a href="https://docs.ropensci.org/targets/reference/tar_cue.html#target-invalidation-rules">explains cues in detail</a>, as well as <a href="https://docs.ropensci.org/targets/reference/tar_cue.html#dependency-based-invalidation-and-user-defined-functions">specifics on how <code>targets</code> detects changes to upstream dependencies</a>.<a href="walkthrough.html#fnref6" class="footnote-back">↩︎</a></p></li>
<li id="fn7"><p>We would see similar behavior if we changed the R expressions in any <code>tar_target()</code> calls in the target script file.<a href="walkthrough.html#fnref7" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<div style = "background: #1C356D; color: white; padding: 10px 10px 10px 25px; font-size: 1em; width: 100%;">
  Copyright Eli Lilly and Company
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="debugging.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ropensci-books/targets/edit/main/walkthrough.Rmd",
"text": "Edit this chapter"
},
"history": {
"link": "https://github.com/ropensci-books/targets/commits/main/walkthrough.Rmd",
"text": "Chapter edit history"
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
