<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Target Markdown | The targets R Package User Manual</title>
  <meta name="description" content="In-depth discussion of the major functionality of targets." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Target Markdown | The targets R Package User Manual" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://books.ropensci.org/targets" />
  <meta property="og:image" content="https://books.ropensci.org/targets//man/figures/logo.png" />
  <meta property="og:description" content="In-depth discussion of the major functionality of targets." />
  <meta name="github-repo" content="ropensci-books/targets" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Target Markdown | The targets R Package User Manual" />
  
  <meta name="twitter:description" content="In-depth discussion of the major functionality of targets." />
  <meta name="twitter:image" content="https://books.ropensci.org/targets//man/figures/logo.png" />

<meta name="author" content="Will Landau" />
<meta name="author" content="Copyright Eli Lilly and Company" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="man/figures/apple-touch-icon.png" />
  <link rel="shortcut icon" href="man/figures/favicon.ico" type="image/x-icon" />
<link rel="prev" href="walkthrough.html"/>
<link rel="next" href="debugging.html"/>
<script src="libs/header-attrs-2.8/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/vis-4.20.1/vis.css" rel="stylesheet" />
<script src="libs/vis-4.20.1/vis.min.js"></script>
<script src="libs/visNetwork-binding-2.0.9/visNetwork.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-150843595-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-150843595-1');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The targets R Package User Manual</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#motivation"><i class="fa fa-check"></i><b>1.1</b> Motivation</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#pipeline-toolkits"><i class="fa fa-check"></i><b>1.2</b> Pipeline toolkits</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#the-targets-package"><i class="fa fa-check"></i><b>1.3</b> The <code>targets</code> package</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#about-this-manual"><i class="fa fa-check"></i><b>1.4</b> About this manual</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#what-about-drake"><i class="fa fa-check"></i><b>1.5</b> What about <code>drake</code>?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="walkthrough.html"><a href="walkthrough.html"><i class="fa fa-check"></i><b>2</b> Walkthrough</a>
<ul>
<li class="chapter" data-level="2.1" data-path="walkthrough.html"><a href="walkthrough.html#about-this-minimal-example"><i class="fa fa-check"></i><b>2.1</b> About this minimal example</a></li>
<li class="chapter" data-level="2.2" data-path="walkthrough.html"><a href="walkthrough.html#file-structure"><i class="fa fa-check"></i><b>2.2</b> File structure</a></li>
<li class="chapter" data-level="2.3" data-path="walkthrough.html"><a href="walkthrough.html#target-script-file"><i class="fa fa-check"></i><b>2.3</b> Target script file</a></li>
<li class="chapter" data-level="2.4" data-path="walkthrough.html"><a href="walkthrough.html#inspect-the-pipeline"><i class="fa fa-check"></i><b>2.4</b> Inspect the pipeline</a></li>
<li class="chapter" data-level="2.5" data-path="walkthrough.html"><a href="walkthrough.html#run-the-pipeline"><i class="fa fa-check"></i><b>2.5</b> Run the pipeline</a></li>
<li class="chapter" data-level="2.6" data-path="walkthrough.html"><a href="walkthrough.html#changes"><i class="fa fa-check"></i><b>2.6</b> Changes</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="walkthrough.html"><a href="walkthrough.html#change-code"><i class="fa fa-check"></i><b>2.6.1</b> Change code</a></li>
<li class="chapter" data-level="2.6.2" data-path="walkthrough.html"><a href="walkthrough.html#change-data"><i class="fa fa-check"></i><b>2.6.2</b> Change data</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="walkthrough.html"><a href="walkthrough.html#read-your-data"><i class="fa fa-check"></i><b>2.7</b> Read your data</a></li>
<li class="chapter" data-level="2.8" data-path="walkthrough.html"><a href="walkthrough.html#read-metadata"><i class="fa fa-check"></i><b>2.8</b> Read metadata</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="markdown.html"><a href="markdown.html"><i class="fa fa-check"></i><b>3</b> Target Markdown</a>
<ul>
<li class="chapter" data-level="3.1" data-path="markdown.html"><a href="markdown.html#access"><i class="fa fa-check"></i><b>3.1</b> Access</a></li>
<li class="chapter" data-level="3.2" data-path="markdown.html"><a href="markdown.html#engine"><i class="fa fa-check"></i><b>3.2</b> Engine</a></li>
<li class="chapter" data-level="3.3" data-path="markdown.html"><a href="markdown.html#modes"><i class="fa fa-check"></i><b>3.3</b> Modes</a></li>
<li class="chapter" data-level="3.4" data-path="markdown.html"><a href="markdown.html#example"><i class="fa fa-check"></i><b>3.4</b> Example</a></li>
<li class="chapter" data-level="3.5" data-path="markdown.html"><a href="markdown.html#packages"><i class="fa fa-check"></i><b>3.5</b> Packages</a></li>
<li class="chapter" data-level="3.6" data-path="markdown.html"><a href="markdown.html#setup"><i class="fa fa-check"></i><b>3.6</b> Setup</a></li>
<li class="chapter" data-level="3.7" data-path="markdown.html"><a href="markdown.html#globals"><i class="fa fa-check"></i><b>3.7</b> Globals</a></li>
<li class="chapter" data-level="3.8" data-path="markdown.html"><a href="markdown.html#targets"><i class="fa fa-check"></i><b>3.8</b> Targets</a></li>
<li class="chapter" data-level="3.9" data-path="markdown.html"><a href="markdown.html#pipeline"><i class="fa fa-check"></i><b>3.9</b> Pipeline</a></li>
<li class="chapter" data-level="3.10" data-path="markdown.html"><a href="markdown.html#output"><i class="fa fa-check"></i><b>3.10</b> Output</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="debugging.html"><a href="debugging.html"><i class="fa fa-check"></i><b>4</b> Debugging</a>
<ul>
<li class="chapter" data-level="4.1" data-path="debugging.html"><a href="debugging.html#error-messages"><i class="fa fa-check"></i><b>4.1</b> Error messages</a></li>
<li class="chapter" data-level="4.2" data-path="debugging.html"><a href="debugging.html#environment-browser"><i class="fa fa-check"></i><b>4.2</b> Environment browser</a></li>
<li class="chapter" data-level="4.3" data-path="debugging.html"><a href="debugging.html#the-debug-option"><i class="fa fa-check"></i><b>4.3</b> The debug option</a></li>
<li class="chapter" data-level="4.4" data-path="debugging.html"><a href="debugging.html#workspaces"><i class="fa fa-check"></i><b>4.4</b> Workspaces</a></li>
<li class="chapter" data-level="4.5" data-path="debugging.html"><a href="debugging.html#tradeoffs"><i class="fa fa-check"></i><b>4.5</b> Tradeoffs</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>5</b> Functions</a>
<ul>
<li class="chapter" data-level="5.1" data-path="functions.html"><a href="functions.html#problems-with-script-based-workflows"><i class="fa fa-check"></i><b>5.1</b> Problems with script-based workflows</a></li>
<li class="chapter" data-level="5.2" data-path="functions.html"><a href="functions.html#functions-1"><i class="fa fa-check"></i><b>5.2</b> Functions</a></li>
<li class="chapter" data-level="5.3" data-path="functions.html"><a href="functions.html#writing-functions"><i class="fa fa-check"></i><b>5.3</b> Writing functions</a></li>
<li class="chapter" data-level="5.4" data-path="functions.html"><a href="functions.html#functions-in-pipelines"><i class="fa fa-check"></i><b>5.4</b> Functions in pipelines</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="practices.html"><a href="practices.html"><i class="fa fa-check"></i><b>6</b> Best practices</a>
<ul>
<li class="chapter" data-level="6.1" data-path="practices.html"><a href="practices.html#how-to-define-good-targets"><i class="fa fa-check"></i><b>6.1</b> How to define good targets</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="practices.html"><a href="practices.html#what-a-target-should-do"><i class="fa fa-check"></i><b>6.1.1</b> What a target should do</a></li>
<li class="chapter" data-level="6.1.2" data-path="practices.html"><a href="practices.html#loading-dependencies"><i class="fa fa-check"></i><b>6.1.2</b> Loading dependencies</a></li>
<li class="chapter" data-level="6.1.3" data-path="practices.html"><a href="practices.html#return-value"><i class="fa fa-check"></i><b>6.1.3</b> Return value</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="practices.html"><a href="practices.html#side-effects"><i class="fa fa-check"></i><b>6.2</b> Side effects</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="practices.html"><a href="practices.html#how-much-a-target-should-do"><i class="fa fa-check"></i><b>6.2.1</b> How much a target should do</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="practices.html"><a href="practices.html#dependencies"><i class="fa fa-check"></i><b>6.3</b> Dependencies</a></li>
<li class="chapter" data-level="6.4" data-path="practices.html"><a href="practices.html#loading-and-configuring-r-packages"><i class="fa fa-check"></i><b>6.4</b> Loading and configuring R packages</a></li>
<li class="chapter" data-level="6.5" data-path="practices.html"><a href="practices.html#packages-based-invalidation"><i class="fa fa-check"></i><b>6.5</b> Packages-based invalidation</a></li>
<li class="chapter" data-level="6.6" data-path="practices.html"><a href="practices.html#working-with-tools-outside-r"><i class="fa fa-check"></i><b>6.6</b> Working with tools outside R</a></li>
<li class="chapter" data-level="6.7" data-path="practices.html"><a href="practices.html#monitoring-the-pipeline"><i class="fa fa-check"></i><b>6.7</b> Monitoring the pipeline</a></li>
<li class="chapter" data-level="6.8" data-path="practices.html"><a href="practices.html#performance"><i class="fa fa-check"></i><b>6.8</b> Performance</a></li>
<li class="chapter" data-level="6.9" data-path="practices.html"><a href="practices.html#cleaning-up"><i class="fa fa-check"></i><b>6.9</b> Cleaning up</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="files.html"><a href="files.html"><i class="fa fa-check"></i><b>7</b> External files and literate programming</a>
<ul>
<li class="chapter" data-level="7.1" data-path="files.html"><a href="files.html#internal-files"><i class="fa fa-check"></i><b>7.1</b> Internal files</a></li>
<li class="chapter" data-level="7.2" data-path="files.html"><a href="files.html#external-input-files"><i class="fa fa-check"></i><b>7.2</b> External input files</a></li>
<li class="chapter" data-level="7.3" data-path="files.html"><a href="files.html#external-output-files"><i class="fa fa-check"></i><b>7.3</b> External output files</a></li>
<li class="chapter" data-level="7.4" data-path="files.html"><a href="files.html#literate-programming"><i class="fa fa-check"></i><b>7.4</b> Literate programming</a></li>
<li class="chapter" data-level="7.5" data-path="files.html"><a href="files.html#parameterized-r-markdown"><i class="fa fa-check"></i><b>7.5</b> Parameterized R Markdown</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="files.html"><a href="files.html#single-parameter-set"><i class="fa fa-check"></i><b>7.5.1</b> Single parameter set</a></li>
<li class="chapter" data-level="7.5.2" data-path="files.html"><a href="files.html#multiple-parameter-sets"><i class="fa fa-check"></i><b>7.5.2</b> Multiple parameter sets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="dynamic.html"><a href="dynamic.html"><i class="fa fa-check"></i><b>8</b> Dynamic branching</a>
<ul>
<li class="chapter" data-level="8.1" data-path="dynamic.html"><a href="dynamic.html#branching"><i class="fa fa-check"></i><b>8.1</b> Branching</a></li>
<li class="chapter" data-level="8.2" data-path="dynamic.html"><a href="dynamic.html#about-dynamic-branching"><i class="fa fa-check"></i><b>8.2</b> About dynamic branching</a></li>
<li class="chapter" data-level="8.3" data-path="dynamic.html"><a href="dynamic.html#patterns"><i class="fa fa-check"></i><b>8.3</b> Patterns</a></li>
<li class="chapter" data-level="8.4" data-path="dynamic.html"><a href="dynamic.html#pattern-construction"><i class="fa fa-check"></i><b>8.4</b> Pattern construction</a></li>
<li class="chapter" data-level="8.5" data-path="dynamic.html"><a href="dynamic.html#branch-provenance"><i class="fa fa-check"></i><b>8.5</b> Branch provenance</a></li>
<li class="chapter" data-level="8.6" data-path="dynamic.html"><a href="dynamic.html#testing-patterns"><i class="fa fa-check"></i><b>8.6</b> Testing patterns</a></li>
<li class="chapter" data-level="8.7" data-path="dynamic.html"><a href="dynamic.html#branching-over-files"><i class="fa fa-check"></i><b>8.7</b> Branching over files</a></li>
<li class="chapter" data-level="8.8" data-path="dynamic.html"><a href="dynamic.html#branching-over-rows"><i class="fa fa-check"></i><b>8.8</b> Branching over rows</a></li>
<li class="chapter" data-level="8.9" data-path="dynamic.html"><a href="dynamic.html#iteration"><i class="fa fa-check"></i><b>8.9</b> Iteration</a>
<ul>
<li class="chapter" data-level="8.9.1" data-path="dynamic.html"><a href="dynamic.html#vector-iteration"><i class="fa fa-check"></i><b>8.9.1</b> Vector iteration</a></li>
<li class="chapter" data-level="8.9.2" data-path="dynamic.html"><a href="dynamic.html#list-iteration"><i class="fa fa-check"></i><b>8.9.2</b> List iteration</a></li>
<li class="chapter" data-level="8.9.3" data-path="dynamic.html"><a href="dynamic.html#group-iteration"><i class="fa fa-check"></i><b>8.9.3</b> Group iteration</a></li>
</ul></li>
<li class="chapter" data-level="8.10" data-path="dynamic.html"><a href="dynamic.html#batching"><i class="fa fa-check"></i><b>8.10</b> Batching</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="static.html"><a href="static.html"><i class="fa fa-check"></i><b>9</b> Static branching</a>
<ul>
<li class="chapter" data-level="9.1" data-path="static.html"><a href="static.html#branching-1"><i class="fa fa-check"></i><b>9.1</b> Branching</a></li>
<li class="chapter" data-level="9.2" data-path="static.html"><a href="static.html#when-to-use-static-branching"><i class="fa fa-check"></i><b>9.2</b> When to use static branching</a></li>
<li class="chapter" data-level="9.3" data-path="static.html"><a href="static.html#map"><i class="fa fa-check"></i><b>9.3</b> Map</a></li>
<li class="chapter" data-level="9.4" data-path="static.html"><a href="static.html#dynamic-within-static-branching"><i class="fa fa-check"></i><b>9.4</b> Dynamic-within-static branching</a></li>
<li class="chapter" data-level="9.5" data-path="static.html"><a href="static.html#combine"><i class="fa fa-check"></i><b>9.5</b> Combine</a></li>
<li class="chapter" data-level="9.6" data-path="static.html"><a href="static.html#metaprogramming"><i class="fa fa-check"></i><b>9.6</b> Metaprogramming</a></li>
<li class="chapter" data-level="9.7" data-path="static.html"><a href="static.html#hooks"><i class="fa fa-check"></i><b>9.7</b> Hooks</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="hpc.html"><a href="hpc.html"><i class="fa fa-check"></i><b>10</b> High-performance computing</a>
<ul>
<li class="chapter" data-level="10.1" data-path="hpc.html"><a href="hpc.html#clustermq"><i class="fa fa-check"></i><b>10.1</b> Clustermq</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="hpc.html"><a href="hpc.html#persistent-workers"><i class="fa fa-check"></i><b>10.1.1</b> Persistent workers</a></li>
<li class="chapter" data-level="10.1.2" data-path="hpc.html"><a href="hpc.html#clustermq-installation"><i class="fa fa-check"></i><b>10.1.2</b> Clustermq installation</a></li>
<li class="chapter" data-level="10.1.3" data-path="hpc.html"><a href="hpc.html#clustermq-locally"><i class="fa fa-check"></i><b>10.1.3</b> Clustermq locally</a></li>
<li class="chapter" data-level="10.1.4" data-path="hpc.html"><a href="hpc.html#clustermq-remotely"><i class="fa fa-check"></i><b>10.1.4</b> Clustermq remotely</a></li>
<li class="chapter" data-level="10.1.5" data-path="hpc.html"><a href="hpc.html#clustermq-configuration"><i class="fa fa-check"></i><b>10.1.5</b> Clustermq configuration</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="hpc.html"><a href="hpc.html#future"><i class="fa fa-check"></i><b>10.2</b> Future</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="hpc.html"><a href="hpc.html#transient-workers"><i class="fa fa-check"></i><b>10.2.1</b> Transient workers</a></li>
<li class="chapter" data-level="10.2.2" data-path="hpc.html"><a href="hpc.html#future-installation"><i class="fa fa-check"></i><b>10.2.2</b> Future installation</a></li>
<li class="chapter" data-level="10.2.3" data-path="hpc.html"><a href="hpc.html#future-locally"><i class="fa fa-check"></i><b>10.2.3</b> Future locally</a></li>
<li class="chapter" data-level="10.2.4" data-path="hpc.html"><a href="hpc.html#future-remotely"><i class="fa fa-check"></i><b>10.2.4</b> Future remotely</a></li>
<li class="chapter" data-level="10.2.5" data-path="hpc.html"><a href="hpc.html#future-configuration"><i class="fa fa-check"></i><b>10.2.5</b> Future configuration</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="hpc.html"><a href="hpc.html#advanced"><i class="fa fa-check"></i><b>10.3</b> Advanced</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="cloud.html"><a href="cloud.html"><i class="fa fa-check"></i><b>11</b> Cloud integration</a>
<ul>
<li class="chapter" data-level="11.1" data-path="cloud.html"><a href="cloud.html#compute"><i class="fa fa-check"></i><b>11.1</b> Compute</a></li>
<li class="chapter" data-level="11.2" data-path="cloud.html"><a href="cloud.html#storage"><i class="fa fa-check"></i><b>11.2</b> Storage</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="cloud.html"><a href="cloud.html#a-disclaimer"><i class="fa fa-check"></i><b>11.2.1</b> A disclaimer</a></li>
<li class="chapter" data-level="11.2.2" data-path="cloud.html"><a href="cloud.html#communicate-with-your-collaborators"><i class="fa fa-check"></i><b>11.2.2</b> Communicate with your collaborators</a></li>
<li class="chapter" data-level="11.2.3" data-path="cloud.html"><a href="cloud.html#get-started-with-the-amazon-s3-web-console"><i class="fa fa-check"></i><b>11.2.3</b> Get started with the Amazon S3 web console</a></li>
<li class="chapter" data-level="11.2.4" data-path="cloud.html"><a href="cloud.html#configure-your-local-machine"><i class="fa fa-check"></i><b>11.2.4</b> Configure your local machine</a></li>
<li class="chapter" data-level="11.2.5" data-path="cloud.html"><a href="cloud.html#create-s3-buckets"><i class="fa fa-check"></i><b>11.2.5</b> Create S3 buckets</a></li>
<li class="chapter" data-level="11.2.6" data-path="cloud.html"><a href="cloud.html#configure-the-pipeline"><i class="fa fa-check"></i><b>11.2.6</b> Configure the pipeline</a></li>
<li class="chapter" data-level="11.2.7" data-path="cloud.html"><a href="cloud.html#run-the-pipeline-1"><i class="fa fa-check"></i><b>11.2.7</b> Run the pipeline</a></li>
<li class="chapter" data-level="11.2.8" data-path="cloud.html"><a href="cloud.html#manage-the-data"><i class="fa fa-check"></i><b>11.2.8</b> Manage the data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="drake.html"><a href="drake.html"><i class="fa fa-check"></i><b>12</b> What about <code>drake</code>?</a>
<ul>
<li class="chapter" data-level="12.1" data-path="drake.html"><a href="drake.html#why-is-drake-superseded"><i class="fa fa-check"></i><b>12.1</b> Why is <code>drake</code> superseded?</a></li>
<li class="chapter" data-level="12.2" data-path="drake.html"><a href="drake.html#transitioning-to-targets"><i class="fa fa-check"></i><b>12.2</b> Transitioning to <code>targets</code></a></li>
<li class="chapter" data-level="12.3" data-path="drake.html"><a href="drake.html#advantages-of-targets-over-drake"><i class="fa fa-check"></i><b>12.3</b> Advantages of <code>targets</code> over <code>drake</code></a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="drake.html"><a href="drake.html#better-guardrails-by-design"><i class="fa fa-check"></i><b>12.3.1</b> Better guardrails by design</a></li>
<li class="chapter" data-level="12.3.2" data-path="drake.html"><a href="drake.html#enhanced-debugging-support"><i class="fa fa-check"></i><b>12.3.2</b> Enhanced debugging support</a></li>
<li class="chapter" data-level="12.3.3" data-path="drake.html"><a href="drake.html#improved-tracking-of-package-functions"><i class="fa fa-check"></i><b>12.3.3</b> Improved tracking of package functions</a></li>
<li class="chapter" data-level="12.3.4" data-path="drake.html"><a href="drake.html#lighter-friendlier-data-management"><i class="fa fa-check"></i><b>12.3.4</b> Lighter, friendlier data management</a></li>
<li class="chapter" data-level="12.3.5" data-path="drake.html"><a href="drake.html#cloud-storage"><i class="fa fa-check"></i><b>12.3.5</b> Cloud storage</a></li>
<li class="chapter" data-level="12.3.6" data-path="drake.html"><a href="drake.html#show-status-of-functions-and-global-objects"><i class="fa fa-check"></i><b>12.3.6</b> Show status of functions and global objects</a></li>
<li class="chapter" data-level="12.3.7" data-path="drake.html"><a href="drake.html#dynamic-branching-with-dplyrgroup_by"><i class="fa fa-check"></i><b>12.3.7</b> Dynamic branching with <code>dplyr::group_by()</code></a></li>
<li class="chapter" data-level="12.3.8" data-path="drake.html"><a href="drake.html#composable-dynamic-branching"><i class="fa fa-check"></i><b>12.3.8</b> Composable dynamic branching</a></li>
<li class="chapter" data-level="12.3.9" data-path="drake.html"><a href="drake.html#improved-parallel-efficiency"><i class="fa fa-check"></i><b>12.3.9</b> Improved parallel efficiency</a></li>
<li class="chapter" data-level="12.3.10" data-path="drake.html"><a href="drake.html#metaprogramming-1"><i class="fa fa-check"></i><b>12.3.10</b> Metaprogramming</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The targets R Package User Manual</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="markdown" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Target Markdown</h1>
<p>Target Markdown, available in <code>targets</code> &gt; 0.4.2.9000, is a powerful R Markdown interface for reproducible analysis pipelines. With Target Markdown, you can define a fully scalable pipeline from within one or more R Markdown reports, anything from a single report to a whole <code>bookdown</code> or <code>workflowr</code> project. You get the best of both worlds: the human readable narrative of literate programming, and the sophisticated caching and dependency management systems of <code>targets</code>.</p>
<div id="access" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Access</h2>
<p>The example from this chapter is available as a Target Markdown document through RStudio R Markdown template system: <a href="https://rstudio.github.io/rstudio-extensions/rmarkdown_templates.html" class="uri">https://rstudio.github.io/rstudio-extensions/rmarkdown_templates.html</a>. In the RStudio IDE, select a new R Markdown document in the New File dropdown menu in the upper left-hand corner of the window.</p>
<p><img src="man/figures/new_rmd.png" /></p>
<p>Then, select the Target Markdown template and click OK to open a copy of the report for editing.</p>
<p><img src="man/figures/target_markdown.png" /></p>
</div>
<div id="engine" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Engine</h2>
<p>Target Markdown uses a special <code>knitr</code> language engine. R Markdown code chunks begin with <code>{targets}</code> rather than <code>{r}</code>, and there are special chunk options:</p>
<ul>
<li><code>tar_globals</code>: Logical, whether to define globals or targets. If <code>TRUE</code>, the chunk code defines functions, objects, and options common to all the targets. If <code>FALSE</code> or <code>NULL</code> (default), then the chunk returns formal targets for the pipeline.</li>
<li><code>tar_interactive</code>: Logical, whether to run in interactive mode or non-interactive mode. Defaults to the return value of <code>interactive()</code>.</li>
<li><code>tar_script</code>: Character of length 1, where to write the target script file in non-interactive mode. Most users can skip this option and stick with the default <code>_targets.R</code> script path. Helper script files are always written next to the target script in a folder with an <code>"_r"</code> suffix. The <code>tar_script</code> path must either be absolute or be relative to the project root (where you call <code>tar_make()</code> or similar). If not specified, the target script path defaults to <code>tar_config_get("script")</code> (default: <code>_targets.R</code>; helpers default: <code>_targets_r/</code>). When you run <code>tar_make()</code> etc. with a non-default target script, you must select the correct target script file either with the <code>script</code> argument or with <code>tar_config_set(script = ...)</code>. The function will <code>source()</code> the script file from the current working directory (i.e. with <code>chdir = FALSE</code> in <code>source()</code>).</li>
</ul>
</div>
<div id="modes" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Modes</h2>
<p>The <code>{targets}</code> engine can run in interactive or non-interactive mode. Interactive mode is for prototyping and testing, while non-interactive mode is for pipeline construction. Pipeline development is continual back-and-forth between exploratory analysis and serious runs, so most users will frequently switch modes. The default mode is whatever <code>interactive()</code> returns, so the notebook interface defaults to interactive (<a href="https://bookdown.org/yihui/rmarkdown/notebook.html" class="uri">https://bookdown.org/yihui/rmarkdown/notebook.html</a>) and the Knit button in RStudio defaults to non-interactive. However, you can control the mode with the <code>tar_interactive</code> chunk option. You can even set the default mode for the whole report:</p>
<pre><code>```{r}
knitr::opts_chunk$set(tar_interactive = FALSE)
```</code></pre>
<p>The following example demonstrates both modes.</p>
</div>
<div id="example" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Example</h2>
<p>The following example is based on the minimal <code>targets</code> project at <a href="https://github.com/wlandau/targets-minimal/" class="uri">https://github.com/wlandau/targets-minimal/</a>. We process the base <code>airquality</code> dataset, fit a model, and display a histogram of ozone concentration.</p>
</div>
<div id="packages" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> Packages</h2>
<p>This example requires several R packages, and <code>targets</code> must be version 0.5.0 or above.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="markdown.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># R console</span></span>
<span id="cb25-2"><a href="markdown.html#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">&quot;biglm&quot;</span>, <span class="st">&quot;dplyr&quot;</span>, <span class="st">&quot;ggplot2&quot;</span>, <span class="st">&quot;readr&quot;</span>, <span class="st">&quot;targets&quot;</span>, <span class="st">&quot;tidyr&quot;</span>))</span></code></pre></div>
</div>
<div id="setup" class="section level2" number="3.6">
<h2><span class="header-section-number">3.6</span> Setup</h2>
<p>First, load <code>targets</code> to activate the specialized <code>knitr</code> engine for Target Markdown.</p>
<pre><code>```{r}
library(targets)
```</code></pre>
<p>Early on, you may also wish to remove the leftover <code>_targets_r</code> directory from a previous run in non-interactive mode.</p>
<pre><code>```{r}
tar_unscript()
```</code></pre>
</div>
<div id="globals" class="section level2" number="3.7">
<h2><span class="header-section-number">3.7</span> Globals</h2>
<p>As usual, your targets depend on custom functions, global objects, and <code>tar_option_set()</code> options you define before the pipeline begins. Define these globals using the <code>{targets}</code> engine with <code>tar_globals = TRUE</code> chunk option. In interactive mode, the chunk simply runs the R code in the <code>tar_option_get("envir")</code> environment (usually the global environment).</p>
<pre><code>```{targets, tar_globals = TRUE, tar_interactive = TRUE}
options(tidyverse.quiet = TRUE)
tar_option_set(packages = c(&quot;biglm&quot;, &quot;dplyr&quot;, &quot;ggplot2&quot;, &quot;readr&quot;, &quot;tidyr&quot;))
create_plot &lt;- function(data) {
  ggplot(data) +
    geom_histogram(aes(x = Ozone), bins = 12) +
    theme_gray(24)
}
```</code></pre>
<pre><code>#&gt; Assigned objects to the environment.</code></pre>
<p>Here is the same chunk in non-interactive mode. Normally, there is no need to duplicate chunks like this, but we do so here in order to demonstrate both modes.</p>
<pre><code>```{targets chunk-name, tar_globals = TRUE, tar_interactive = FALSE}
options(tidyverse.quiet = TRUE)
tar_option_set(packages = c(&quot;biglm&quot;, &quot;dplyr&quot;, &quot;ggplot2&quot;, &quot;readr&quot;, &quot;tidyr&quot;))
create_plot &lt;- function(data) {
  ggplot(data) +
    geom_histogram(aes(x = Ozone), bins = 12) +
    theme_gray(24)
}
```</code></pre>
<pre><code>#&gt; Established _targets.R and _targets_r/globals/chunk-name.R</code></pre>
<p>In non-interactive mode, the chunk establishes a common <code>_targets.R</code> file and writes the R code to a script in <code>_targets_r/globals/</code>.<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a> It is good practice to assign explicit chunk labels because they are used as script names. (The labels of unnamed chunks depend on chunk order, which is brittle).<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a></p>
</div>
<div id="targets" class="section level2" number="3.8">
<h2><span class="header-section-number">3.8</span> Targets</h2>
<p>To define targets for the workflow, use the <code>targets</code> engine with the <code>tar_globals</code> chunk option equal <code>FALSE</code> or <code>NULL</code> (default). The return value of the chunk must be a target object or a list of target objects, created by <code>tar_target()</code> or a similar function.</p>
<p>Below, we define a target to establish the air quality dataset in the pipeline. If you run this chunk in interactive mode, the target’s R command runs, the engine tests if the output can be saved and loaded from disk correctly, and then the return value gets assigned to the <code>tar_option_get("envir")</code> environment (usually the global environment). In the process, some temporary files are created and destroyed, but your local file space will remain untouched (barring any custom side effects in your custom code).</p>
<pre><code>```{targets, tar_interactive = TRUE}
tar_target(raw_data, airquality)
```</code></pre>
<pre><code>#&gt; Ran targets and assigned them to the environment.</code></pre>
<p>After you run a target in interactive mode, the return value is available in memory.</p>
<pre><code>```{r}
head(raw_data)
```</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="markdown.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(raw_data)</span>
<span id="cb35-2"><a href="markdown.html#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Ozone Solar.R Wind Temp Month Day</span></span>
<span id="cb35-3"><a href="markdown.html#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    41     190  7.4   67     5   1</span></span>
<span id="cb35-4"><a href="markdown.html#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    36     118  8.0   72     5   2</span></span>
<span id="cb35-5"><a href="markdown.html#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    12     149 12.6   74     5   3</span></span>
<span id="cb35-6"><a href="markdown.html#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4    18     313 11.5   62     5   4</span></span>
<span id="cb35-7"><a href="markdown.html#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5    NA      NA 14.3   56     5   5</span></span>
<span id="cb35-8"><a href="markdown.html#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6    28      NA 14.9   66     5   6</span></span></code></pre></div>
<p>For demonstration purposes, here is the same chunk in non-interactive mode. In non-interactive mode, the <code>{targets}</code> engine does not actually run any targets. Instead, it establishes a common <code>_targets.R</code> and writes the code to a script in <code>_targets_r/targets/</code>.</p>
<pre><code>```{targets chunk-name-with-target, tar_interactive = FALSE}
tar_target(raw_data, airquality)
```</code></pre>
<pre><code>#&gt; Established _targets.R and _targets_r/targets/chunk-name-with-target.R</code></pre>
<p>Next, we define more targets to process the raw data, plot a histogram, and fit a model. Remember: when it comes to targets in the pipeline, only the return value of the chunk actually counts. So if you define multiple targets in a single chunk, be sure to wrap them in a list.</p>
<pre><code>```{targets downstream-targets}
list(
  tar_target(data, raw_data %&gt;% filter(!is.na(Ozone))),
  tar_target(hist, create_plot(data)),
  tar_target(fit, biglm(Ozone ~ Wind + Temp, data))
)
```</code></pre>
<pre><code>#&gt; Established _targets.R and _targets_r/targets/downstream-targets.R</code></pre>
<p>In interactive mode, it is good practice to inspect the outputs to make sure the targets ran properly. You can do this with ordinary <code>{r}</code> code chunks.</p>
<pre><code>```{r, eval = FALSE}
fit
```</code></pre>
<pre><code>```{r, eval = FALSE}
hist
```</code></pre>
</div>
<div id="pipeline" class="section level2" number="3.9">
<h2><span class="header-section-number">3.9</span> Pipeline</h2>
<p>If you ran all the <code>{targets}</code> chunks in non-interactive mode, you are ready to run the pipeline in with <code>tar_make()</code> in an ordinary <code>{r}</code> code chunk. This time, the output is written to persistent storage at the project root.</p>
<pre><code>```{r}
tar_make()
```</code></pre>
<pre><code>#&gt; • start target raw_data
#&gt; • built target raw_data
#&gt; • start target data
#&gt; • built target data
#&gt; • start target fit
#&gt; • built target fit
#&gt; • start target hist
#&gt; • built target hist
#&gt; • end pipeline</code></pre>
</div>
<div id="output" class="section level2" number="3.10">
<h2><span class="header-section-number">3.10</span> Output</h2>
<p>You can retrieve results from the <code>_targets/</code> data store using <code>tar_read()</code> or <code>tar_load()</code>.</p>
<pre><code>```{r}
library(biglm)
tar_read(fit)
```</code></pre>
<pre><code>#&gt; Large data regression model: biglm(Ozone ~ Wind + Temp, data)
#&gt; Sample size =  116</code></pre>
<pre><code>```{r}
tar_read(hist)
```</code></pre>
<p><img src="targets-manual_files/figure-html/unnamed-chunk-36-1.png" width="672" /></p>
<p>The <code>targets</code> dependency graph helps your readers understand the steps of your pipeline at a high level.</p>
<pre><code>```{r}
tar_visnetwork()
```</code></pre>
<div id="htmlwidget-f1bee120f5823a51f424" style="width:672px;height:480px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-f1bee120f5823a51f424">{"x":{"nodes":{"name":["data","fit","hist","raw_data","create_plot"],"type":["stem","stem","stem","stem","function"],"status":["uptodate","uptodate","uptodate","uptodate","uptodate"],"seconds":[0.01,0.004,0.014,0.522,null],"bytes":[1079,1574,44216,1260,null],"branches":[null,null,null,null,null],"id":["data","fit","hist","raw_data","create_plot"],"label":["data","fit","hist","raw_data","create_plot"],"level":[2,3,3,1,1],"color":["#354823","#354823","#354823","#354823","#354823"],"shape":["dot","dot","dot","dot","triangle"]},"edges":{"from":["data","create_plot","data","raw_data"],"to":["fit","hist","hist","data"],"arrows":["to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":{"type":"cubicBezier","forceDirection":"horizontal"}},"physics":{"stabilization":false},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":{"from":1,"to":1},"algorithm":"hierarchical","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"right","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Up to date","Stem","Function"],"color":["#354823","#899DA4","#899DA4"],"shape":["dot","dot","triangle"]},"nodesToDataframe":true}},"evals":[],"jsHooks":[]}</script>
<p>At this point, you can go back and run <code>{targets}</code> chunks in interactive mode without interfering with the code or data of the non-interactive pipeline.</p>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="3">
<li id="fn3"><p>The <code>_targets.R</code> file from Target Markdown never changes from chunk to chunk or report to report, so you can spread your work over multiple reports without worrying about aligning <code>_targets.R</code> scripts. Just be sure all your chunk names are unique across all the reports of a project.<a href="markdown.html#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p>All chunk labels must be unique. And for <code>bookdown</code> projects, chunk labels should only use alphanumeric characters and dashes.<a href="markdown.html#fnref4" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<div style = "background: #1C356D; color: white; padding: 10px 10px 10px 25px; font-size: 1em; width: 100%;">
  Copyright Eli Lilly and Company
</div>
            </section>

          </div>
        </div>
      </div>
<a href="walkthrough.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="debugging.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ropensci-books/targets/edit/main/markdown.Rmd",
"text": "Edit this chapter"
},
"history": {
"link": "https://github.com/ropensci-books/targets/commits/main/markdown.Rmd",
"text": "Chapter edit history"
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
