<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 10 External files and literate programming | The targets R Package User Manual</title>
  <meta name="description" content="In-depth discussion of the major functionality of targets." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 10 External files and literate programming | The targets R Package User Manual" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://books.ropensci.org/targets" />
  <meta property="og:image" content="https://books.ropensci.org/targets/man/figures/logo.png" />
  <meta property="og:description" content="In-depth discussion of the major functionality of targets." />
  <meta name="github-repo" content="ropensci-books/targets" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 10 External files and literate programming | The targets R Package User Manual" />
  
  <meta name="twitter:description" content="In-depth discussion of the major functionality of targets." />
  <meta name="twitter:image" content="https://books.ropensci.org/targets/man/figures/logo.png" />

<meta name="author" content="Will Landau" />
<meta name="author" content="Copyright Eli Lilly and Company" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="man/figures/apple-touch-icon.png" />
  <link rel="shortcut icon" href="man/figures/favicon.ico" type="image/x-icon" />
<link rel="prev" href="projects.html"/>
<link rel="next" href="dynamic.html"/>
<script src="libs/header-attrs-2.13/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet" />
<script src="libs/vis-9.1.0/vis-network.min.js"></script>
<script src="libs/visNetwork-binding-2.1.0/visNetwork.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-150843595-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-150843595-1');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The targets R Package User Manual</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction<span></span></a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#motivation"><i class="fa fa-check"></i><b>1.1</b> Motivation<span></span></a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#pipeline-toolkits"><i class="fa fa-check"></i><b>1.2</b> Pipeline toolkits<span></span></a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#the-targets-package"><i class="fa fa-check"></i><b>1.3</b> The <code>targets</code> package<span></span></a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#about-this-manual"><i class="fa fa-check"></i><b>1.4</b> About this manual<span></span></a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#what-about-drake"><i class="fa fa-check"></i><b>1.5</b> What about <code>drake</code>?<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="walkthrough.html"><a href="walkthrough.html"><i class="fa fa-check"></i><b>2</b> Walkthrough<span></span></a>
<ul>
<li class="chapter" data-level="2.1" data-path="walkthrough.html"><a href="walkthrough.html#about-this-minimal-example"><i class="fa fa-check"></i><b>2.1</b> About this minimal example<span></span></a></li>
<li class="chapter" data-level="2.2" data-path="walkthrough.html"><a href="walkthrough.html#file-structure"><i class="fa fa-check"></i><b>2.2</b> File structure<span></span></a></li>
<li class="chapter" data-level="2.3" data-path="walkthrough.html"><a href="walkthrough.html#target-script-file"><i class="fa fa-check"></i><b>2.3</b> Target script file<span></span></a></li>
<li class="chapter" data-level="2.4" data-path="walkthrough.html"><a href="walkthrough.html#inspect-the-pipeline"><i class="fa fa-check"></i><b>2.4</b> Inspect the pipeline<span></span></a></li>
<li class="chapter" data-level="2.5" data-path="walkthrough.html"><a href="walkthrough.html#run-the-pipeline"><i class="fa fa-check"></i><b>2.5</b> Run the pipeline<span></span></a></li>
<li class="chapter" data-level="2.6" data-path="walkthrough.html"><a href="walkthrough.html#changes"><i class="fa fa-check"></i><b>2.6</b> Changes<span></span></a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="walkthrough.html"><a href="walkthrough.html#change-code"><i class="fa fa-check"></i><b>2.6.1</b> Change code<span></span></a></li>
<li class="chapter" data-level="2.6.2" data-path="walkthrough.html"><a href="walkthrough.html#change-data"><i class="fa fa-check"></i><b>2.6.2</b> Change data<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="walkthrough.html"><a href="walkthrough.html#read-your-data"><i class="fa fa-check"></i><b>2.7</b> Read your data<span></span></a></li>
<li class="chapter" data-level="2.8" data-path="walkthrough.html"><a href="walkthrough.html#read-metadata"><i class="fa fa-check"></i><b>2.8</b> Read metadata<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="markdown.html"><a href="markdown.html"><i class="fa fa-check"></i><b>3</b> Target Markdown<span></span></a>
<ul>
<li class="chapter" data-level="3.1" data-path="markdown.html"><a href="markdown.html#access"><i class="fa fa-check"></i><b>3.1</b> Access<span></span></a></li>
<li class="chapter" data-level="3.2" data-path="markdown.html"><a href="markdown.html#purpose"><i class="fa fa-check"></i><b>3.2</b> Purpose<span></span></a></li>
<li class="chapter" data-level="3.3" data-path="markdown.html"><a href="markdown.html#example"><i class="fa fa-check"></i><b>3.3</b> Example<span></span></a></li>
<li class="chapter" data-level="3.4" data-path="markdown.html"><a href="markdown.html#required-packages"><i class="fa fa-check"></i><b>3.4</b> Required packages<span></span></a></li>
<li class="chapter" data-level="3.5" data-path="markdown.html"><a href="markdown.html#setup"><i class="fa fa-check"></i><b>3.5</b> Setup<span></span></a></li>
<li class="chapter" data-level="3.6" data-path="markdown.html"><a href="markdown.html#globals"><i class="fa fa-check"></i><b>3.6</b> Globals<span></span></a></li>
<li class="chapter" data-level="3.7" data-path="markdown.html"><a href="markdown.html#target-definitions"><i class="fa fa-check"></i><b>3.7</b> Target definitions<span></span></a></li>
<li class="chapter" data-level="3.8" data-path="markdown.html"><a href="markdown.html#pipeline"><i class="fa fa-check"></i><b>3.8</b> Pipeline<span></span></a></li>
<li class="chapter" data-level="3.9" data-path="markdown.html"><a href="markdown.html#output"><i class="fa fa-check"></i><b>3.9</b> Output<span></span></a></li>
<li class="chapter" data-level="3.10" data-path="markdown.html"><a href="markdown.html#conditioning-on-interactive-mode"><i class="fa fa-check"></i><b>3.10</b> Conditioning on interactive mode<span></span></a>
<ul>
<li class="chapter" data-level="3.10.1" data-path="markdown.html"><a href="markdown.html#tar_interactive"><i class="fa fa-check"></i><b>3.10.1</b> <code>tar_interactive()</code><span></span></a></li>
<li class="chapter" data-level="3.10.2" data-path="markdown.html"><a href="markdown.html#tar_toggle"><i class="fa fa-check"></i><b>3.10.2</b> <code>tar_toggle()</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.11" data-path="markdown.html"><a href="markdown.html#chunk-options"><i class="fa fa-check"></i><b>3.11</b> Chunk options<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="debugging.html"><a href="debugging.html"><i class="fa fa-check"></i><b>4</b> Debugging<span></span></a>
<ul>
<li class="chapter" data-level="4.1" data-path="debugging.html"><a href="debugging.html#error-messages"><i class="fa fa-check"></i><b>4.1</b> Error messages<span></span></a></li>
<li class="chapter" data-level="4.2" data-path="debugging.html"><a href="debugging.html#environment-browser"><i class="fa fa-check"></i><b>4.2</b> Environment browser<span></span></a></li>
<li class="chapter" data-level="4.3" data-path="debugging.html"><a href="debugging.html#the-debug-option"><i class="fa fa-check"></i><b>4.3</b> The debug option<span></span></a></li>
<li class="chapter" data-level="4.4" data-path="debugging.html"><a href="debugging.html#workspaces"><i class="fa fa-check"></i><b>4.4</b> Workspaces<span></span></a></li>
<li class="chapter" data-level="4.5" data-path="debugging.html"><a href="debugging.html#tradeoffs"><i class="fa fa-check"></i><b>4.5</b> Tradeoffs<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="performance.html"><a href="performance.html"><i class="fa fa-check"></i><b>5</b> Performance<span></span></a>
<ul>
<li class="chapter" data-level="5.1" data-path="performance.html"><a href="performance.html#monitoring-the-pipeline"><i class="fa fa-check"></i><b>5.1</b> Monitoring the pipeline<span></span></a></li>
<li class="chapter" data-level="5.2" data-path="performance.html"><a href="performance.html#performance-1"><i class="fa fa-check"></i><b>5.2</b> Performance<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>6</b> Functions<span></span></a>
<ul>
<li class="chapter" data-level="6.1" data-path="functions.html"><a href="functions.html#problems-with-script-based-workflows"><i class="fa fa-check"></i><b>6.1</b> Problems with script-based workflows<span></span></a></li>
<li class="chapter" data-level="6.2" data-path="functions.html"><a href="functions.html#functions-1"><i class="fa fa-check"></i><b>6.2</b> Functions<span></span></a></li>
<li class="chapter" data-level="6.3" data-path="functions.html"><a href="functions.html#writing-functions"><i class="fa fa-check"></i><b>6.3</b> Writing functions<span></span></a></li>
<li class="chapter" data-level="6.4" data-path="functions.html"><a href="functions.html#functions-in-pipelines"><i class="fa fa-check"></i><b>6.4</b> Functions in pipelines<span></span></a></li>
<li class="chapter" data-level="6.5" data-path="functions.html"><a href="functions.html#tracking-changes"><i class="fa fa-check"></i><b>6.5</b> Tracking changes<span></span></a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="targets.html"><a href="targets.html"><i class="fa fa-check"></i><b>7</b> Target construction<span></span></a>
<ul>
<li class="chapter" data-level="7.1" data-path="targets.html"><a href="targets.html#target-names"><i class="fa fa-check"></i><b>7.1</b> Target names<span></span></a></li>
<li class="chapter" data-level="7.2" data-path="targets.html"><a href="targets.html#what-a-target-should-do"><i class="fa fa-check"></i><b>7.2</b> What a target should do<span></span></a></li>
<li class="chapter" data-level="7.3" data-path="targets.html"><a href="targets.html#how-much-a-target-should-do"><i class="fa fa-check"></i><b>7.3</b> How much a target should do<span></span></a></li>
<li class="chapter" data-level="7.4" data-path="targets.html"><a href="targets.html#working-with-tools-outside-r"><i class="fa fa-check"></i><b>7.4</b> Working with tools outside R<span></span></a></li>
<li class="chapter" data-level="7.5" data-path="targets.html"><a href="targets.html#side-effects"><i class="fa fa-check"></i><b>7.5</b> Side effects<span></span></a></li>
<li class="chapter" data-level="7.6" data-path="targets.html"><a href="targets.html#dependencies"><i class="fa fa-check"></i><b>7.6</b> Dependencies<span></span></a></li>
<li class="chapter" data-level="7.7" data-path="targets.html"><a href="targets.html#return-value"><i class="fa fa-check"></i><b>7.7</b> Return value<span></span></a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="targets.html"><a href="targets.html#saving"><i class="fa fa-check"></i><b>7.7.1</b> Saving<span></span></a></li>
<li class="chapter" data-level="7.7.2" data-path="targets.html"><a href="targets.html#hashing"><i class="fa fa-check"></i><b>7.7.2</b> Hashing<span></span></a></li>
<li class="chapter" data-level="7.7.3" data-path="targets.html"><a href="targets.html#workaround"><i class="fa fa-check"></i><b>7.7.3</b> Workaround<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>8</b> Packages<span></span></a>
<ul>
<li class="chapter" data-level="8.1" data-path="packages.html"><a href="packages.html#loading-and-configuring-r-packages"><i class="fa fa-check"></i><b>8.1</b> Loading and configuring R packages<span></span></a></li>
<li class="chapter" data-level="8.2" data-path="packages.html"><a href="packages.html#r-packages-as-projects"><i class="fa fa-check"></i><b>8.2</b> R packages as projects<span></span></a></li>
<li class="chapter" data-level="8.3" data-path="packages.html"><a href="packages.html#target-factories"><i class="fa fa-check"></i><b>8.3</b> Target Factories<span></span></a></li>
<li class="chapter" data-level="8.4" data-path="packages.html"><a href="packages.html#package-based-invalidation"><i class="fa fa-check"></i><b>8.4</b> Package-based invalidation<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="projects.html"><a href="projects.html"><i class="fa fa-check"></i><b>9</b> Projects<span></span></a>
<ul>
<li class="chapter" data-level="9.1" data-path="projects.html"><a href="projects.html#extra-reproducibility"><i class="fa fa-check"></i><b>9.1</b> Extra reproducibility<span></span></a></li>
<li class="chapter" data-level="9.2" data-path="projects.html"><a href="projects.html#project-files"><i class="fa fa-check"></i><b>9.2</b> Project files<span></span></a></li>
<li class="chapter" data-level="9.3" data-path="projects.html"><a href="projects.html#multiple-projects"><i class="fa fa-check"></i><b>9.3</b> Multiple projects<span></span></a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="projects.html"><a href="projects.html#create-each-project."><i class="fa fa-check"></i><b>9.3.1</b> Create each project.<span></span></a></li>
<li class="chapter" data-level="9.3.2" data-path="projects.html"><a href="projects.html#configure-each-project."><i class="fa fa-check"></i><b>9.3.2</b> Configure each project.<span></span></a></li>
<li class="chapter" data-level="9.3.3" data-path="projects.html"><a href="projects.html#run-each-project"><i class="fa fa-check"></i><b>9.3.3</b> Run each project<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="projects.html"><a href="projects.html#interdependent-projects"><i class="fa fa-check"></i><b>9.4</b> Interdependent projects<span></span></a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="projects.html"><a href="projects.html#config-inheritance"><i class="fa fa-check"></i><b>9.4.1</b> Config inheritance<span></span></a></li>
<li class="chapter" data-level="9.4.2" data-path="projects.html"><a href="projects.html#sharing-targets"><i class="fa fa-check"></i><b>9.4.2</b> Sharing targets<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="projects.html"><a href="projects.html#the-config-package"><i class="fa fa-check"></i><b>9.5</b> The config package<span></span></a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="files.html"><a href="files.html"><i class="fa fa-check"></i><b>10</b> External files and literate programming<span></span></a>
<ul>
<li class="chapter" data-level="10.1" data-path="files.html"><a href="files.html#internal-data-files"><i class="fa fa-check"></i><b>10.1</b> Internal data files<span></span></a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="files.html"><a href="files.html#data-version-control-and-the-cloud"><i class="fa fa-check"></i><b>10.1.1</b> Data version control and the cloud<span></span></a></li>
<li class="chapter" data-level="10.1.2" data-path="files.html"><a href="files.html#cleaning-up-local-internal-data-files"><i class="fa fa-check"></i><b>10.1.2</b> Cleaning up local internal data files<span></span></a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="files.html"><a href="files.html#internal-script-files"><i class="fa fa-check"></i><b>10.2</b> Internal script files<span></span></a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="files.html"><a href="files.html#cleaning-up-internal-script-files"><i class="fa fa-check"></i><b>10.2.1</b> Cleaning up internal script files<span></span></a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="files.html"><a href="files.html#external-input-files"><i class="fa fa-check"></i><b>10.3</b> External input files<span></span></a></li>
<li class="chapter" data-level="10.4" data-path="files.html"><a href="files.html#external-output-files"><i class="fa fa-check"></i><b>10.4</b> External output files<span></span></a></li>
<li class="chapter" data-level="10.5" data-path="files.html"><a href="files.html#literate-programming"><i class="fa fa-check"></i><b>10.5</b> Literate programming<span></span></a></li>
<li class="chapter" data-level="10.6" data-path="files.html"><a href="files.html#parameterized-r-markdown"><i class="fa fa-check"></i><b>10.6</b> Parameterized R Markdown<span></span></a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="files.html"><a href="files.html#single-parameter-set"><i class="fa fa-check"></i><b>10.6.1</b> Single parameter set<span></span></a></li>
<li class="chapter" data-level="10.6.2" data-path="files.html"><a href="files.html#multiple-parameter-sets"><i class="fa fa-check"></i><b>10.6.2</b> Multiple parameter sets<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="dynamic.html"><a href="dynamic.html"><i class="fa fa-check"></i><b>11</b> Dynamic branching<span></span></a>
<ul>
<li class="chapter" data-level="11.1" data-path="dynamic.html"><a href="dynamic.html#branching"><i class="fa fa-check"></i><b>11.1</b> Branching<span></span></a></li>
<li class="chapter" data-level="11.2" data-path="dynamic.html"><a href="dynamic.html#about-dynamic-branching"><i class="fa fa-check"></i><b>11.2</b> About dynamic branching<span></span></a></li>
<li class="chapter" data-level="11.3" data-path="dynamic.html"><a href="dynamic.html#patterns"><i class="fa fa-check"></i><b>11.3</b> Patterns<span></span></a></li>
<li class="chapter" data-level="11.4" data-path="dynamic.html"><a href="dynamic.html#pattern-construction"><i class="fa fa-check"></i><b>11.4</b> Pattern construction<span></span></a></li>
<li class="chapter" data-level="11.5" data-path="dynamic.html"><a href="dynamic.html#branch-provenance"><i class="fa fa-check"></i><b>11.5</b> Branch provenance<span></span></a></li>
<li class="chapter" data-level="11.6" data-path="dynamic.html"><a href="dynamic.html#testing-patterns"><i class="fa fa-check"></i><b>11.6</b> Testing patterns<span></span></a></li>
<li class="chapter" data-level="11.7" data-path="dynamic.html"><a href="dynamic.html#branching-over-files"><i class="fa fa-check"></i><b>11.7</b> Branching over files<span></span></a></li>
<li class="chapter" data-level="11.8" data-path="dynamic.html"><a href="dynamic.html#branching-over-rows"><i class="fa fa-check"></i><b>11.8</b> Branching over rows<span></span></a></li>
<li class="chapter" data-level="11.9" data-path="dynamic.html"><a href="dynamic.html#iteration"><i class="fa fa-check"></i><b>11.9</b> Iteration<span></span></a>
<ul>
<li class="chapter" data-level="11.9.1" data-path="dynamic.html"><a href="dynamic.html#vector-iteration"><i class="fa fa-check"></i><b>11.9.1</b> Vector iteration<span></span></a></li>
<li class="chapter" data-level="11.9.2" data-path="dynamic.html"><a href="dynamic.html#list-iteration"><i class="fa fa-check"></i><b>11.9.2</b> List iteration<span></span></a></li>
<li class="chapter" data-level="11.9.3" data-path="dynamic.html"><a href="dynamic.html#group-iteration"><i class="fa fa-check"></i><b>11.9.3</b> Group iteration<span></span></a></li>
</ul></li>
<li class="chapter" data-level="11.10" data-path="dynamic.html"><a href="dynamic.html#dynamic-branching-performance"><i class="fa fa-check"></i><b>11.10</b> Dynamic branching performance<span></span></a></li>
<li class="chapter" data-level="11.11" data-path="dynamic.html"><a href="dynamic.html#batching"><i class="fa fa-check"></i><b>11.11</b> Batching<span></span></a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="static.html"><a href="static.html"><i class="fa fa-check"></i><b>12</b> Static branching<span></span></a>
<ul>
<li class="chapter" data-level="12.1" data-path="static.html"><a href="static.html#branching-1"><i class="fa fa-check"></i><b>12.1</b> Branching<span></span></a></li>
<li class="chapter" data-level="12.2" data-path="static.html"><a href="static.html#when-to-use-static-branching"><i class="fa fa-check"></i><b>12.2</b> When to use static branching<span></span></a></li>
<li class="chapter" data-level="12.3" data-path="static.html"><a href="static.html#map"><i class="fa fa-check"></i><b>12.3</b> Map<span></span></a></li>
<li class="chapter" data-level="12.4" data-path="static.html"><a href="static.html#dynamic-within-static-branching"><i class="fa fa-check"></i><b>12.4</b> Dynamic-within-static branching<span></span></a></li>
<li class="chapter" data-level="12.5" data-path="static.html"><a href="static.html#combine"><i class="fa fa-check"></i><b>12.5</b> Combine<span></span></a></li>
<li class="chapter" data-level="12.6" data-path="static.html"><a href="static.html#metaprogramming"><i class="fa fa-check"></i><b>12.6</b> Metaprogramming<span></span></a></li>
<li class="chapter" data-level="12.7" data-path="static.html"><a href="static.html#hooks"><i class="fa fa-check"></i><b>12.7</b> Hooks<span></span></a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="hpc.html"><a href="hpc.html"><i class="fa fa-check"></i><b>13</b> High-performance computing<span></span></a>
<ul>
<li class="chapter" data-level="13.1" data-path="hpc.html"><a href="hpc.html#clustermq"><i class="fa fa-check"></i><b>13.1</b> Clustermq<span></span></a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="hpc.html"><a href="hpc.html#persistent-workers"><i class="fa fa-check"></i><b>13.1.1</b> Persistent workers<span></span></a></li>
<li class="chapter" data-level="13.1.2" data-path="hpc.html"><a href="hpc.html#clustermq-installation"><i class="fa fa-check"></i><b>13.1.2</b> Clustermq installation<span></span></a></li>
<li class="chapter" data-level="13.1.3" data-path="hpc.html"><a href="hpc.html#clustermq-locally"><i class="fa fa-check"></i><b>13.1.3</b> Clustermq locally<span></span></a></li>
<li class="chapter" data-level="13.1.4" data-path="hpc.html"><a href="hpc.html#clustermq-remotely"><i class="fa fa-check"></i><b>13.1.4</b> Clustermq remotely<span></span></a></li>
<li class="chapter" data-level="13.1.5" data-path="hpc.html"><a href="hpc.html#clustermq-configuration"><i class="fa fa-check"></i><b>13.1.5</b> Clustermq configuration<span></span></a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="hpc.html"><a href="hpc.html#future"><i class="fa fa-check"></i><b>13.2</b> Future<span></span></a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="hpc.html"><a href="hpc.html#transient-workers"><i class="fa fa-check"></i><b>13.2.1</b> Transient workers<span></span></a></li>
<li class="chapter" data-level="13.2.2" data-path="hpc.html"><a href="hpc.html#future-installation"><i class="fa fa-check"></i><b>13.2.2</b> Future installation<span></span></a></li>
<li class="chapter" data-level="13.2.3" data-path="hpc.html"><a href="hpc.html#future-locally"><i class="fa fa-check"></i><b>13.2.3</b> Future locally<span></span></a></li>
<li class="chapter" data-level="13.2.4" data-path="hpc.html"><a href="hpc.html#future-remotely"><i class="fa fa-check"></i><b>13.2.4</b> Future remotely<span></span></a></li>
<li class="chapter" data-level="13.2.5" data-path="hpc.html"><a href="hpc.html#future-configuration"><i class="fa fa-check"></i><b>13.2.5</b> Future configuration<span></span></a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="hpc.html"><a href="hpc.html#advanced"><i class="fa fa-check"></i><b>13.3</b> Advanced<span></span></a></li>
<li class="chapter" data-level="13.4" data-path="hpc.html"><a href="hpc.html#cloud-computing"><i class="fa fa-check"></i><b>13.4</b> Cloud computing<span></span></a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="storage_amazon.html"><a href="storage_amazon.html"><i class="fa fa-check"></i><b>14</b> Integration with Amazon S3 storage<span></span></a>
<ul>
<li class="chapter" data-level="14.1" data-path="storage_amazon.html"><a href="storage_amazon.html#a-disclaimer"><i class="fa fa-check"></i><b>14.1</b> A disclaimer<span></span></a></li>
<li class="chapter" data-level="14.2" data-path="storage_amazon.html"><a href="storage_amazon.html#communicate-with-your-collaborators"><i class="fa fa-check"></i><b>14.2</b> Communicate with your collaborators<span></span></a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="storage_amazon.html"><a href="storage_amazon.html#get-started-with-the-amazon-s3-web-console"><i class="fa fa-check"></i><b>14.2.1</b> Get started with the Amazon S3 web console<span></span></a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="storage_amazon.html"><a href="storage_amazon.html#configure-your-local-machine"><i class="fa fa-check"></i><b>14.3</b> Configure your local machine<span></span></a></li>
<li class="chapter" data-level="14.4" data-path="storage_amazon.html"><a href="storage_amazon.html#create-s3-buckets"><i class="fa fa-check"></i><b>14.4</b> Create S3 buckets<span></span></a></li>
<li class="chapter" data-level="14.5" data-path="storage_amazon.html"><a href="storage_amazon.html#configure-the-pipeline"><i class="fa fa-check"></i><b>14.5</b> Configure the pipeline<span></span></a></li>
<li class="chapter" data-level="14.6" data-path="storage_amazon.html"><a href="storage_amazon.html#run-the-pipeline-1"><i class="fa fa-check"></i><b>14.6</b> Run the pipeline<span></span></a></li>
<li class="chapter" data-level="14.7" data-path="storage_amazon.html"><a href="storage_amazon.html#manage-the-data"><i class="fa fa-check"></i><b>14.7</b> Manage the data<span></span></a></li>
<li class="chapter" data-level="14.8" data-path="storage_amazon.html"><a href="storage_amazon.html#data-version-control"><i class="fa fa-check"></i><b>14.8</b> Data version control<span></span></a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="drake.html"><a href="drake.html"><i class="fa fa-check"></i><b>15</b> What about <code>drake</code>?<span></span></a>
<ul>
<li class="chapter" data-level="15.1" data-path="drake.html"><a href="drake.html#why-is-drake-superseded"><i class="fa fa-check"></i><b>15.1</b> Why is <code>drake</code> superseded?<span></span></a></li>
<li class="chapter" data-level="15.2" data-path="drake.html"><a href="drake.html#transitioning-to-targets"><i class="fa fa-check"></i><b>15.2</b> Transitioning to <code>targets</code><span></span></a></li>
<li class="chapter" data-level="15.3" data-path="drake.html"><a href="drake.html#advantages-of-targets-over-drake"><i class="fa fa-check"></i><b>15.3</b> Advantages of <code>targets</code> over <code>drake</code><span></span></a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="drake.html"><a href="drake.html#better-guardrails-by-design"><i class="fa fa-check"></i><b>15.3.1</b> Better guardrails by design<span></span></a></li>
<li class="chapter" data-level="15.3.2" data-path="drake.html"><a href="drake.html#enhanced-debugging-support"><i class="fa fa-check"></i><b>15.3.2</b> Enhanced debugging support<span></span></a></li>
<li class="chapter" data-level="15.3.3" data-path="drake.html"><a href="drake.html#improved-tracking-of-package-functions"><i class="fa fa-check"></i><b>15.3.3</b> Improved tracking of package functions<span></span></a></li>
<li class="chapter" data-level="15.3.4" data-path="drake.html"><a href="drake.html#lighter-friendlier-data-management"><i class="fa fa-check"></i><b>15.3.4</b> Lighter, friendlier data management<span></span></a></li>
<li class="chapter" data-level="15.3.5" data-path="drake.html"><a href="drake.html#cloud-storage"><i class="fa fa-check"></i><b>15.3.5</b> Cloud storage<span></span></a></li>
<li class="chapter" data-level="15.3.6" data-path="drake.html"><a href="drake.html#show-status-of-functions-and-global-objects"><i class="fa fa-check"></i><b>15.3.6</b> Show status of functions and global objects<span></span></a></li>
<li class="chapter" data-level="15.3.7" data-path="drake.html"><a href="drake.html#dynamic-branching-with-dplyrgroup_by"><i class="fa fa-check"></i><b>15.3.7</b> Dynamic branching with <code>dplyr::group_by()</code><span></span></a></li>
<li class="chapter" data-level="15.3.8" data-path="drake.html"><a href="drake.html#composable-dynamic-branching"><i class="fa fa-check"></i><b>15.3.8</b> Composable dynamic branching<span></span></a></li>
<li class="chapter" data-level="15.3.9" data-path="drake.html"><a href="drake.html#improved-parallel-efficiency"><i class="fa fa-check"></i><b>15.3.9</b> Improved parallel efficiency<span></span></a></li>
<li class="chapter" data-level="15.3.10" data-path="drake.html"><a href="drake.html#metaprogramming-1"><i class="fa fa-check"></i><b>15.3.10</b> Metaprogramming<span></span></a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The targets R Package User Manual</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="files" class="section level1 hasAnchor" number="10">
<h1><span class="header-section-number">Chapter 10</span> External files and literate programming<a href="files.html#files" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>The <code>targets</code> package automatically stores data and automatically responds to changed files to keep your targets up to date. The chapter below explains how to leverage this reproducibility for external datasets, external output files, and literate programming artifacts such as R Markdown reports. Real-world applications of these techniques are <a href="https://docs.ropensci.org/targets/index.html#examples">linked from here</a>.</p>
<div id="internal-data-files" class="section level2 hasAnchor" number="10.1">
<h2><span class="header-section-number">10.1</span> Internal data files<a href="files.html#internal-data-files" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Each project has a local data store. This is usually a special <code>_targets/</code> folder at the project root directory (where you call <code>tar_make()</code>). In <code>targets</code> version 0.3.1.9000 and above, you can set the location to something other than <code>_targets/</code> using <a href="https://docs.ropensci.org/targets/reference/tar_config_set.html"><code>tar_config_set()</code></a>, which writes to a project-level <code>_targets.yaml</code> file at the project root. The files in the data store are structured as follows.</p>
<pre><code>_targets/ # Can be customized with tar_config_set().
├── meta/
├────── meta
├────── process
├────── progress
├── objects/
├────── target1 
├────── target2
├────── branching_target_c7bcb4bd
├────── branching_target_285fb6a9
├────── branching_target_874ca381
├── scratch/ # tar_make() deletes this folder after it finishes.
└── user/ # gittargets users can put custom files here for data version control.</code></pre>
<p>Spreadsheets <code>_targets/meta/meta</code> keeps track of target metadata, <code>_targets/meta/progress</code> records runtime progress, and <code>_targets/meta/process</code> has high-level information (such as process ID) about the external R session orchestrating the targets. The <code>scratch/</code> directory contains temporary files which can be safely deleted after <code>tar_make()</code> finishes. The <code>_targets/objects/</code> folder contains the return values of the targets themselves.</p>
<p>A typical target returns an R object: for example, a dataset with <code>tar_target(dataset, data.frame(x = rnorm(1000)), format = "fst")</code> or a fitted model <code>tar_target(model, biglm(ozone ~ temp + wind), format = "qs")</code>. When you run the pipeline, <code>targets</code> computes this object and saves it as a file in <code>_targets/objects/</code>. The file name in <code>_targets/objects/</code> is always the target name, and type of the file is determined by the <code>format</code> argument of <code>tar_target()</code>, and formats <code>"fst"</code> and <code>"qs"</code> are two of many choices explained in the help file of <code>tar_target()</code>. No matter what format you pick, <code>targets</code> watches the file for changes and recomputes the target in <code>tar_make()</code> if the the file gets corrupted (unless you suppress the file cue with <code>tar_target(cue = tar_cue(file = FALSE))</code>).</p>
<div id="data-version-control-and-the-cloud" class="section level3 hasAnchor" number="10.1.1">
<h3><span class="header-section-number">10.1.1</span> Data version control and the cloud<a href="files.html#data-version-control-and-the-cloud" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <a href="storage_amazon.html#storage_amazon">chapter on Amazon cloud storage</a> describes how to continuously upload and track each target as an object in an <a href="https://aws.amazon.com/aws/s3">Amazon S3 bucket</a>. As of version 0.9.0, this feature allows you to opt int automatic data version control. If your bucket has <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/Versioning.html">versioning enabled</a>, then <code>targets</code> records the version ID of each target (in <code>tar_meta(your_target)$path</code>), and it uses that version ID to read the data and check the status. So if you revert the metadata file <code>_targets/meta/meta</code> to a prior state, then your pipeline will automatically revert to prior versions of your targets. This allows you to quickly switch your entire project to a <a href="https://git-scm.com/docs/git-checkout">previous state</a> or <a href="https://git-scm.com/docs/git-branch">alternate branch</a> while keeping your AWS-backed targets in sync and up to date. It works best if you commit <code>_targets/meta/meta</code> to the same <a href="https://git-scm.com">version control repository</a> you use for your code. (<a href="https://happygitwithr.com" class="uri">https://happygitwithr.com</a> is an excellent resource to get started with version control for code.)</p>
<p>If your S3 bucket has <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/Versioning.html">versioing enabled</a>, then <code>targets</code> &gt;= 0.8.1.9000 tracks the version of each target in the bucket automatically. That means if you revert your code and metadata file to a prior state, then your pipeline will revert to prior versions of your targets in the cloud, and those targets may be up to date. This is extremely useful if you are managing your project code and <code>targets</code> metadata with version control (e.g. Git) and frequently move among multiple branches. To check if data versioning is working properly, you can verify that the AWS S3 version IDs of your targets appear in <code>tar_meta()$path</code>.</p>
<p>Alternatively, for users without access to Amazon Web Services, <a href="https://wlandau.github.io/gittargets"><code>gittargets</code></a> is a data version control solution that works entirely locally. Designed for data analysis projects whose code is already under version control with Git, <code>gittargets</code> takes snapshots of the data store and linking those snapshots to commits in the code repository. This allows you to transition among multiple code branches without invalidating your pipeline: when you check out an old code branch and its data snapshot together, you restore your old targets while keeping the data up to date.</p>
</div>
<div id="cleaning-up-local-internal-data-files" class="section level3 hasAnchor" number="10.1.2">
<h3><span class="header-section-number">10.1.2</span> Cleaning up local internal data files<a href="files.html#cleaning-up-local-internal-data-files" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are <a href="https://docs.ropensci.org/targets/reference/index.html#section-clean">multiple functions</a> to remove target storage or modify the metadata to force one or more targets to rerun in the next call to <code>tar_make()</code>.</p>
<ul>
<li><a href="https://docs.ropensci.org/targets/reference/tar_destroy.html"><code>tar_destroy()</code></a> is by far the most commonly used cleaning function. It removes the <code>_targets/</code> data store completely, deleting all the results from <a href="https://docs.ropensci.org/targets/reference/tar_make.html"><code>tar_make()</code></a> except for external files. Use it if you intend to start the pipeline from scratch without any trace of a previous run.</li>
<li><a href="https://docs.ropensci.org/targets/reference/tar_prune.html"><code>tar_prune()</code></a> deletes the data and metadata of all the targets no longer present in your current target script file (default: <code>_targets.R</code>). This is useful if you recently worked through multiple changes to your project and are now trying to discard irrelevant data while keeping the results that still matter.</li>
<li><a href="https://docs.ropensci.org/targets/reference/tar_delete.html"><code>tar_delete()</code></a> is more selective than <a href="https://docs.ropensci.org/targets/reference/tar_destroy.html"><code>tar_destroy()</code></a> and <a href="https://docs.ropensci.org/targets/reference/tar_prune.html"><code>tar_prune()</code></a>. It removes the individual data files of a given set of targets from <code>_targets/objects/</code> while leaving the metadata in <code>_targets/meta/meta</code> alone. If you have a small number of data-heavy targets you need to discard to conserve storage, this function can help.</li>
<li><a href="https://docs.ropensci.org/targets/reference/tar_invalidate.html"><code>tar_invalidate()</code></a> is the opposite of <a href="https://docs.ropensci.org/targets/reference/tar_delete.html"><code>tar_delete()</code></a>: for the selected targets, it deletes the metadata in <code>_targets/meta/meta</code> but keeps the return values in <code>_targets/objects/</code>. After invalidation, you will still be able to locate the data files with <a href="https://docs.ropensci.org/targets/reference/tar_path.html"><code>tar_path()</code></a> and manually salvage them in an emergency. However, <a href="https://docs.ropensci.org/targets/reference/tar_load.html"><code>tar_load()</code></a> and <a href="https://docs.ropensci.org/targets/reference/tar_read.html"><code>tar_read()</code></a> will not be able to read the data into R, and subsequent calls to <a href="https://docs.ropensci.org/targets/reference/tar_make.html"><code>tar_make()</code></a> will attempt to rebuild those targets.</li>
</ul>
</div>
</div>
<div id="internal-script-files" class="section level2 hasAnchor" number="10.2">
<h2><span class="header-section-number">10.2</span> Internal script files<a href="files.html#internal-script-files" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Target Markdown automatically supplies a <code>_targets.R</code> file and supporting scripts in a folder called <code>_targets_r/</code>. These paths can be customized together the <code>script</code> argument of <a href="https://docs.ropensci.org/targets/reference/tar_config_set.html"><code>tar_config_set()</code></a>.</p>
<pre><code>_targets_r/ # Can be customized with tar_config_set(script = &quot;...&quot;).
├── globals/ # Code chunks to define globals and settings (tar_globals = TRUE)
├────── globals_chunk1.R # Names follow chunk names or the tar_name chunk opt.
├────── globals_chunk2.R
├────── ...
├── targets/ # Code chunks to define groups of one or more targets
├────── targets_chunk1.R
├────── targets_chunk2.R
└────── ...</code></pre>
<div id="cleaning-up-internal-script-files" class="section level3 hasAnchor" number="10.2.1">
<h3><span class="header-section-number">10.2.1</span> Cleaning up internal script files<a href="files.html#cleaning-up-internal-script-files" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Over time, the number of script files in <code>_targets_r/</code> starts to build up, and <code>targets</code> has no way of automatically removing helper scripts files that are no longer necessary. To keep your pipeline up to date with the code chunks in the Target Markdown document(s), it is good practice to call <a href="https://docs.ropensci.org/targets/reference/tar_unscript.html"><code>tar_unscript()</code></a> at the beginning of your first Target Markdown document. That way, extraneous/discarded targets are automatically removed from the pipeline when the document starts render.</p>
</div>
</div>
<div id="external-input-files" class="section level2 hasAnchor" number="10.3">
<h2><span class="header-section-number">10.3</span> External input files<a href="files.html#external-input-files" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To reproducibly track an external input file, you need to define a new target that has</p>
<ol style="list-style-type: decimal">
<li>A command that returns the file path as a character vector, and</li>
<li><code>format = "file"</code> in <code>tar_target()</code>.</li>
</ol>
<p>When the target runs in the pipeline, the returned character vector gets recorded in <code>_targets/meta</code>, and <code>targets</code> watches the data file and invalidates the target when that file changes. To track multiple files this way, simply define a multi-element character vector where each element is a path. Each element can also be a directory, but this directory must not be empty at the time the target runs.</p>
<p>The first two targets of the <a href="https://github.com/ropensci/targets-minimal">minimal example</a> demonstrate how to track an input file.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="files.html#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># _targets.R</span></span>
<span id="cb98-2"><a href="files.html#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(targets)</span>
<span id="cb98-3"><a href="files.html#cb98-3" aria-hidden="true" tabindex="-1"></a>path_to_data <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb98-4"><a href="files.html#cb98-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;data/raw_data.csv&quot;</span></span>
<span id="cb98-5"><a href="files.html#cb98-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb98-6"><a href="files.html#cb98-6" aria-hidden="true" tabindex="-1"></a><span class="fu">list</span>(</span>
<span id="cb98-7"><a href="files.html#cb98-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(</span>
<span id="cb98-8"><a href="files.html#cb98-8" aria-hidden="true" tabindex="-1"></a>    raw_data_file,</span>
<span id="cb98-9"><a href="files.html#cb98-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">path_to_data</span>(),</span>
<span id="cb98-10"><a href="files.html#cb98-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">format =</span> <span class="st">&quot;file&quot;</span></span>
<span id="cb98-11"><a href="files.html#cb98-11" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb98-12"><a href="files.html#cb98-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(</span>
<span id="cb98-13"><a href="files.html#cb98-13" aria-hidden="true" tabindex="-1"></a>    raw_data,</span>
<span id="cb98-14"><a href="files.html#cb98-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">read_csv</span>(raw_data_file, <span class="at">col_types =</span> <span class="fu">cols</span>())</span>
<span id="cb98-15"><a href="files.html#cb98-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb98-16"><a href="files.html#cb98-16" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Above, <code>raw_data_file</code> is the dynamic file target. The file <code>data/raw_data.csv</code> exists before we ever run the pipeline, and the R expression for the target returns the character vector <code>"data/raw_data.csv"</code>. (We use the <code>path_to_data()</code> function to demonstrate that you need not literally write <code>"data/raw_data.csv"</code> as long as the path is returned somehow.)</p>
<p>All subsequent targets that depend on the file must reference the file using the symbol <code>raw_data_file</code>. This allows <code>targets</code>’ automatic static code analysis routines to detect which targets depend on the file. Because the <code>raw_data</code> target literally mentions the symbol <code>raw_data_file</code>, <code>targets</code> knows <code>raw_data</code> depends on <code>raw_data_file</code>. This ensures that</p>
<ol style="list-style-type: decimal">
<li><code>raw_data_file</code> gets processed before <code>raw_data</code>, and</li>
<li><code>tar_make()</code> automatically reruns <code>raw_data</code> if <code>raw_data_file</code> or <code>"data/raw_data.csv"</code> change.</li>
</ol>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="files.html#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_visnetwork</span>()</span></code></pre></div>
<div id="htmlwidget-45661cadd117c5696da2" style="width:672px;height:480px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-45661cadd117c5696da2">{"x":{"nodes":{"name":["raw_data","raw_data_file","path_to_data"],"type":["stem","stem","function"],"status":["outdated","outdated","outdated"],"seconds":[null,null,null],"bytes":[null,null,null],"branches":[null,null,null],"label":["raw_data","raw_data_file","path_to_data"],"color":["#78B7C5","#78B7C5","#78B7C5"],"id":["raw_data","raw_data_file","path_to_data"],"level":[3,2,1],"shape":["dot","dot","triangle"]},"edges":{"from":["raw_data_file","path_to_data"],"to":["raw_data","raw_data_file"],"arrows":["to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":{"type":"cubicBezier","forceDirection":"horizontal"}},"physics":{"stabilization":false},"interaction":{"zoomSpeed":1},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":{"from":1,"to":1},"algorithm":"hierarchical","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"right","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Outdated","Stem","Function"],"color":["#78B7C5","#899DA4","#899DA4"],"shape":["dot","dot","triangle"]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
<p>If we were to omit the symbol <code>raw_data_file</code> from the R expression of <code>raw_data</code>, those targets would be disconnected in the graph and <code>tar_make()</code> would make incorrect decisions.</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="files.html#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co"># _targets.R</span></span>
<span id="cb100-2"><a href="files.html#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(targets)</span>
<span id="cb100-3"><a href="files.html#cb100-3" aria-hidden="true" tabindex="-1"></a>path_to_data <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb100-4"><a href="files.html#cb100-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;data/raw_data.csv&quot;</span></span>
<span id="cb100-5"><a href="files.html#cb100-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb100-6"><a href="files.html#cb100-6" aria-hidden="true" tabindex="-1"></a><span class="fu">list</span>(</span>
<span id="cb100-7"><a href="files.html#cb100-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(</span>
<span id="cb100-8"><a href="files.html#cb100-8" aria-hidden="true" tabindex="-1"></a>    raw_data_file,</span>
<span id="cb100-9"><a href="files.html#cb100-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">path_to_data</span>(),</span>
<span id="cb100-10"><a href="files.html#cb100-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">format =</span> <span class="st">&quot;file&quot;</span></span>
<span id="cb100-11"><a href="files.html#cb100-11" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb100-12"><a href="files.html#cb100-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(</span>
<span id="cb100-13"><a href="files.html#cb100-13" aria-hidden="true" tabindex="-1"></a>    raw_data,</span>
<span id="cb100-14"><a href="files.html#cb100-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">read_csv</span>(<span class="st">&quot;data/raw_data.csv&quot;</span>, <span class="at">col_types =</span> <span class="fu">cols</span>()) <span class="co"># incorrect</span></span>
<span id="cb100-15"><a href="files.html#cb100-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb100-16"><a href="files.html#cb100-16" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="files.html#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_visnetwork</span>()</span></code></pre></div>
<div id="htmlwidget-f050e88b3eaf26e1b1c0" style="width:672px;height:480px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-f050e88b3eaf26e1b1c0">{"x":{"nodes":{"name":["raw_data","raw_data_file","path_to_data"],"type":["stem","stem","function"],"status":["outdated","outdated","outdated"],"seconds":[null,null,null],"bytes":[null,null,null],"branches":[null,null,null],"label":["raw_data","raw_data_file","path_to_data"],"color":["#78B7C5","#78B7C5","#78B7C5"],"id":["raw_data","raw_data_file","path_to_data"],"level":[0,2,1],"shape":["dot","dot","triangle"]},"edges":{"from":["path_to_data"],"to":["raw_data_file"],"arrows":["to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":{"type":"cubicBezier","forceDirection":"horizontal"}},"physics":{"stabilization":false},"interaction":{"zoomSpeed":1},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":{"from":1,"to":1},"algorithm":"hierarchical","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"right","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Outdated","Stem","Function"],"color":["#78B7C5","#899DA4","#899DA4"],"shape":["dot","dot","triangle"]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="external-output-files" class="section level2 hasAnchor" number="10.4">
<h2><span class="header-section-number">10.4</span> External output files<a href="files.html#external-output-files" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Output files have the same mechanics as input files. The target uses <code>format = "file"</code>, and the return value is a character value of paths to existing files and nonempty directories. The only difference here is that the target’s R command writes to storage before it returns a value. For example, here is an output file target that saves a visualization.</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="files.html#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_target</span>(</span>
<span id="cb102-2"><a href="files.html#cb102-2" aria-hidden="true" tabindex="-1"></a>  plot_file,</span>
<span id="cb102-3"><a href="files.html#cb102-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">save_plot_and_return_path</span>(),</span>
<span id="cb102-4"><a href="files.html#cb102-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">format =</span> <span class="st">&quot;file&quot;</span></span>
<span id="cb102-5"><a href="files.html#cb102-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Here, our custom <code>save_plot_and_return_path()</code> function does exactly what the name describes.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="files.html#cb103-1" aria-hidden="true" tabindex="-1"></a>save_plot_and_return_path <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb103-2"><a href="files.html#cb103-2" aria-hidden="true" tabindex="-1"></a>  plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars) <span class="sc">+</span></span>
<span id="cb103-3"><a href="files.html#cb103-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> wt, <span class="at">y =</span> mpg))</span>
<span id="cb103-4"><a href="files.html#cb103-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggsave</span>(<span class="st">&quot;plot_file.png&quot;</span>, plot, <span class="at">width =</span> <span class="dv">7</span>, <span class="at">height =</span> <span class="dv">7</span>)</span>
<span id="cb103-5"><a href="files.html#cb103-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="st">&quot;plot_file.png&quot;</span>)</span>
<span id="cb103-6"><a href="files.html#cb103-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="literate-programming" class="section level2 hasAnchor" number="10.5">
<h2><span class="header-section-number">10.5</span> Literate programming<a href="files.html#literate-programming" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>targets</code> has two ways to handle literate programming. The first is <a href="markdown.html#markdown">Target Markdown</a>, which is covered in a <a href="markdown.html#markdown">different chapter</a>. In <a href="markdown.html#markdown">Target Markdown</a>, <code>targets</code> serves as a caching mechanism for projects that use R Markdown as the primary overarching workflow manager. The second way <code>targets</code> handles literate programming is to render lightweight dependency-aware R Markdown reports inside the individual targets of a pipeline. This second approach is covered in this section.</p>
<p>If you render an R Markdown report as part of a target, the report should be lightweight: mostly prose, minimal code, fast execution, and no output other than the rendered HTML/PDF document. In other words, R Markdown reports are just targets that document prior results. The bulk of the computation should have already happened upstream, and the most of the code chunks in the report itself should be terse calls to <code>tar_read()</code> and <code>tar_load()</code>.</p>
<p>The report from the <a href="https://github.com/ropensci/targets-minimal">minimal example</a> looks like this:</p>
<p><img src="man/figures/knitr-source.png" /></p>
<p>Above, the report depends on targets <code>fit</code> and <code>hist</code>. The use of <code>tar_read()</code> and <code>tar_load()</code> allows us to run the report outside the pipeline. As long as <code>_targets/</code> folder has data on the required targets from a previous <code>tar_make()</code>, you can open the RStudio IDE, edit the report, and click the Knit button like you would for any other R Markdown report.</p>
<p><img src="man/figures/knitr-ide.png" /></p>
<p>To connect the target with the pipeline, we define a special kind of target using <code>tar_render()</code> from the <a href="https://github.com/ropensci/tarchetypes"><code>tarchetypes</code></a> package instead of the usual <code>tar_target()</code>, which</p>
<ol style="list-style-type: decimal">
<li>Finds all the <code>tar_load()</code>/<code>tar_read()</code> dependencies in the report and inserts them into the target’s command. This enforces the proper dependency relationships. (<code>tar_load_raw()</code> and <code>tar_read_raw()</code> are ignored because those dependencies cannot be resolved with static code analysis.)</li>
<li>Sets <code>format = "file"</code> (see <code>tar_target()</code>) so <code>targets</code> watches the files at the returned paths.</li>
<li>Configures the target’s command to return both the output report files and the input source file. All these file paths are relative paths so the project stays portable.</li>
<li>Forces the report to run in the user’s current working directory instead of the working directory of the report.</li>
<li>Sets convenient default options such as <code>deployment = "main"</code> in <code>tar_target()</code> and <code>quiet = TRUE</code> in <code>rmarkdown::render()</code>.</li>
</ol>
<p>The target definition looks like this.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="files.html#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tarchetypes)</span>
<span id="cb104-2"><a href="files.html#cb104-2" aria-hidden="true" tabindex="-1"></a>target <span class="ot">&lt;-</span> <span class="fu">tar_render</span>(report, <span class="st">&quot;report.Rmd&quot;</span>) <span class="co"># Just defines a target object.</span></span>
<span id="cb104-3"><a href="files.html#cb104-3" aria-hidden="true" tabindex="-1"></a>target<span class="sc">$</span>command<span class="sc">$</span>expr[[<span class="dv">1</span>]]</span>
<span id="cb104-4"><a href="files.html#cb104-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; tarchetypes::tar_render_run(path = &quot;report.Rmd&quot;, args = list(input = &quot;report.Rmd&quot;, </span></span>
<span id="cb104-5"><a href="files.html#cb104-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     knit_root_dir = getwd(), quiet = TRUE), deps = list(fit, </span></span>
<span id="cb104-6"><a href="files.html#cb104-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     hist))</span></span></code></pre></div>
<p>Because symbols <code>fit</code> and <code>hist</code> appear in the command, <code>targets</code> knows that <code>report</code> depends on <code>fit</code> and <code>hist</code>. When we put the <code>report</code> target in the pipeline, these dependency relationships show up in the graph.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="files.html#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co"># _targets.R</span></span>
<span id="cb105-2"><a href="files.html#cb105-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(targets)</span>
<span id="cb105-3"><a href="files.html#cb105-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tarchetypes)</span>
<span id="cb105-4"><a href="files.html#cb105-4" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;R/functions.R&quot;</span>)</span>
<span id="cb105-5"><a href="files.html#cb105-5" aria-hidden="true" tabindex="-1"></a><span class="fu">list</span>(</span>
<span id="cb105-6"><a href="files.html#cb105-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(</span>
<span id="cb105-7"><a href="files.html#cb105-7" aria-hidden="true" tabindex="-1"></a>    raw_data_file,</span>
<span id="cb105-8"><a href="files.html#cb105-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;data/raw_data.csv&quot;</span>,</span>
<span id="cb105-9"><a href="files.html#cb105-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">format =</span> <span class="st">&quot;file&quot;</span></span>
<span id="cb105-10"><a href="files.html#cb105-10" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb105-11"><a href="files.html#cb105-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(</span>
<span id="cb105-12"><a href="files.html#cb105-12" aria-hidden="true" tabindex="-1"></a>    raw_data,</span>
<span id="cb105-13"><a href="files.html#cb105-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">read_csv</span>(raw_data_file, <span class="at">col_types =</span> <span class="fu">cols</span>())</span>
<span id="cb105-14"><a href="files.html#cb105-14" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb105-15"><a href="files.html#cb105-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(</span>
<span id="cb105-16"><a href="files.html#cb105-16" aria-hidden="true" tabindex="-1"></a>    data,</span>
<span id="cb105-17"><a href="files.html#cb105-17" aria-hidden="true" tabindex="-1"></a>    raw_data <span class="sc">%&gt;%</span></span>
<span id="cb105-18"><a href="files.html#cb105-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">Ozone =</span> <span class="fu">replace_na</span>(Ozone, <span class="fu">mean</span>(Ozone, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)))</span>
<span id="cb105-19"><a href="files.html#cb105-19" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb105-20"><a href="files.html#cb105-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(hist, <span class="fu">create_plot</span>(data)),</span>
<span id="cb105-21"><a href="files.html#cb105-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(fit, <span class="fu">biglm</span>(Ozone <span class="sc">~</span> Wind <span class="sc">+</span> Temp, data)),</span>
<span id="cb105-22"><a href="files.html#cb105-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_render</span>(report, <span class="st">&quot;report.Rmd&quot;</span>) <span class="co"># Here is our call to tar_render().</span></span>
<span id="cb105-23"><a href="files.html#cb105-23" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="files.html#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co"># R console</span></span>
<span id="cb106-2"><a href="files.html#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_visnetwork</span>()</span></code></pre></div>
<p><img src="man/figures/knitr-graph.png" /></p>
</div>
<div id="parameterized-r-markdown" class="section level2 hasAnchor" number="10.6">
<h2><span class="header-section-number">10.6</span> Parameterized R Markdown<a href="files.html#parameterized-r-markdown" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Functions in <a href="https://docs.ropensci.org/tarchetypes"><code>tarchetypes</code></a> make it straightforward to use <a href="https://rmarkdown.rstudio.com/developer_parameterized_reports.html">parameterized R Markdown</a> in a <code>targets</code> pipeline. The next two subsections walk through the major use cases.</p>
<div id="single-parameter-set" class="section level3 hasAnchor" number="10.6.1">
<h3><span class="header-section-number">10.6.1</span> Single parameter set<a href="files.html#single-parameter-set" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this scenario, the pipeline renders your <a href="https://rmarkdown.rstudio.com/developer_parameterized_reports.html">parameterized R Markdown</a> report one time using a single set of parameters. These parameters can be upstream targets, global objects, or fixed values. Simply pass a <code>params</code> argument to <a href="https://docs.ropensci.org/tarchetypes/reference/tar_render.html"><code>tarchetypes::tar_render()</code></a>:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="files.html#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># _targets.R</span></span>
<span id="cb107-2"><a href="files.html#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(targets)</span>
<span id="cb107-3"><a href="files.html#cb107-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tarchetypes)</span>
<span id="cb107-4"><a href="files.html#cb107-4" aria-hidden="true" tabindex="-1"></a><span class="fu">list</span>(</span>
<span id="cb107-5"><a href="files.html#cb107-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(data, <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">seq_len</span>(<span class="dv">26</span>), <span class="at">y =</span> letters))</span>
<span id="cb107-6"><a href="files.html#cb107-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_render</span>(report, <span class="st">&quot;report.Rmd&quot;</span>, <span class="at">params =</span> <span class="fu">list</span>(<span class="at">your_param =</span> data))</span>
<span id="cb107-7"><a href="files.html#cb107-7" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>the <code>report</code> target will run:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="files.html#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># R console</span></span>
<span id="cb108-2"><a href="files.html#cb108-2" aria-hidden="true" tabindex="-1"></a>rmarkdown<span class="sc">::</span><span class="fu">render</span>(<span class="st">&quot;report.Rmd&quot;</span>, <span class="at">params =</span> <span class="fu">list</span>(<span class="at">your_param =</span> your_target))</span></code></pre></div>
<p>where <code>report.Rmd</code> has the following YAML front matter:</p>
<pre><code>---
title: report
output_format: html_document
params:
  your_param: &quot;default value&quot;
---</code></pre>
<p>and the following code chunk:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="files.html#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(params<span class="sc">$</span>your_param)</span></code></pre></div>
<p>See <a href="https://docs.ropensci.org/tarchetypes/reference/tar_render.html#examples">these examples</a> for a demonstration.</p>
</div>
<div id="multiple-parameter-sets" class="section level3 hasAnchor" number="10.6.2">
<h3><span class="header-section-number">10.6.2</span> Multiple parameter sets<a href="files.html#multiple-parameter-sets" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this scenario, you still have a single report, but you render it multiple times over multiple sets of <a href="https://rmarkdown.rstudio.com/developer_parameterized_reports.html">R Markdown parameters</a>. This time, use <a href="https://docs.ropensci.org/tarchetypes/reference/tar_render_rep.html"><code>tarchetypes::tar_render_rep()</code></a> and write code to reference or generate a grid of parameters with one row per rendered report and one column per parameter. Optionally, you can also include an <code>output_file</code> column to control the file paths of the generated reports, and you can set the number of batches to reduce the overhead that would otherwise ensue from creating a large number of targets.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="files.html#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># _targets.R</span></span>
<span id="cb111-2"><a href="files.html#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(targets)</span>
<span id="cb111-3"><a href="files.html#cb111-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tarchetypes)</span>
<span id="cb111-4"><a href="files.html#cb111-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_option_set</span>(<span class="at">packages =</span> <span class="st">&quot;tibble&quot;</span>)</span>
<span id="cb111-5"><a href="files.html#cb111-5" aria-hidden="true" tabindex="-1"></a><span class="fu">list</span>(</span>
<span id="cb111-6"><a href="files.html#cb111-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(x, <span class="st">&quot;value_of_x&quot;</span>),</span>
<span id="cb111-7"><a href="files.html#cb111-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_render_rep</span>(</span>
<span id="cb111-8"><a href="files.html#cb111-8" aria-hidden="true" tabindex="-1"></a>    report,</span>
<span id="cb111-9"><a href="files.html#cb111-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;report.Rmd&quot;</span>,</span>
<span id="cb111-10"><a href="files.html#cb111-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">params =</span> <span class="fu">tibble</span>(</span>
<span id="cb111-11"><a href="files.html#cb111-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">par =</span> <span class="fu">c</span>(<span class="st">&quot;par_val_1&quot;</span>, <span class="st">&quot;par_val_2&quot;</span>, <span class="st">&quot;par_val_3&quot;</span>, <span class="st">&quot;par_val_4&quot;</span>),</span>
<span id="cb111-12"><a href="files.html#cb111-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">output_file =</span> <span class="fu">c</span>(<span class="st">&quot;f1.html&quot;</span>, <span class="st">&quot;f2.html&quot;</span>, <span class="st">&quot;f3.html&quot;</span>, <span class="st">&quot;f4.html&quot;</span>)</span>
<span id="cb111-13"><a href="files.html#cb111-13" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb111-14"><a href="files.html#cb111-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">batches =</span> <span class="dv">2</span></span>
<span id="cb111-15"><a href="files.html#cb111-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb111-16"><a href="files.html#cb111-16" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>where <code>report.Rmd</code> has the following YAML front matter:</p>
<pre><code>title: report
output_format: html_document
params:
  par: &quot;default value&quot;</code></pre>
<p>and the following R code chunk:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="files.html#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(params<span class="sc">$</span>par)</span>
<span id="cb113-2"><a href="files.html#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">tar_read</span>(x))</span></code></pre></div>
<p><code>tar_render_rep()</code> creates multiple targets to set up the R Markdown part of the workflow, including a target for the grid of parameters and a <a href="dynamic.html#dynamic">dynamic branching</a> target to iterate over the parameters in batches. In this case, we have two batches (dynamic branches) and each one renders the report twice.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="files.html#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># R console</span></span>
<span id="cb114-2"><a href="files.html#cb114-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_make</span>()</span>
<span id="cb114-3"><a href="files.html#cb114-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ● run target x</span></span>
<span id="cb114-4"><a href="files.html#cb114-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ● run target report_params</span></span>
<span id="cb114-5"><a href="files.html#cb114-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ● run branch report_9e7470a1</span></span>
<span id="cb114-6"><a href="files.html#cb114-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ● run branch report_457829de</span></span>
<span id="cb114-7"><a href="files.html#cb114-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ● end pipeline</span></span></code></pre></div>
<p>The third output file <code>f3.html</code> is below, and the rest look similar.</p>
<p><img src="man/figures/dynamic-rmarkdown-params.png" /></p>
<p>For more information, see <a href="https://docs.ropensci.org/tarchetypes/reference/tar_render_rep.html#examples">these examples</a>.</p>

</div>
</div>
</div>
<div style = "background: #1C356D; color: white; padding: 10px 10px 10px 25px; font-size: 1em; width: 100%;">
  Copyright Eli Lilly and Company
</div>
            </section>

          </div>
        </div>
      </div>
<a href="projects.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="dynamic.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ropensci-books/targets/edit/main/files.Rmd",
"text": "Edit this chapter"
},
"history": {
"link": "https://github.com/ropensci-books/targets/commits/main/files.Rmd",
"text": "Chapter edit history"
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
